//////////////////////////////////////////////////////////////////////
// Pano2VR 7.0.12/20035 HTML5/CSS3 & WebGL Panorama Player          //
// Trial License: For evaluation only!                              //
// (c) 2024, Garden Gnome Software, https://ggnome.com              //
//////////////////////////////////////////////////////////////////////

var aa="function"==typeof Object.defineProperties?Object.defineProperty:function(y,x,v){if(y==Array.prototype||y==Object.prototype)return y;y[x]=v.value;return y};function ba(y){y=["object"==typeof globalThis&&globalThis,y,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var x=0;x<y.length;++x){var v=y[x];if(v&&v.Math==Math)return v}throw Error("Cannot find global object");}var ca=ba(this);
function da(y,x){if(x)a:{var v=ca;y=y.split(".");for(var f=0;f<y.length-1;f++){var e=y[f];if(!(e in v))break a;v=v[e]}y=y[y.length-1];f=v[y];x=x(f);x!=f&&null!=x&&aa(v,y,{configurable:!0,writable:!0,value:x})}}da("Array.prototype.includes",function(y){return y?y:function(x,v){var f=this;f instanceof String&&(f=String(f));var e=f.length;v=v||0;for(0>v&&(v=Math.max(v+e,0));v<e;v++){var a=f[v];if(a===x||Object.is(a,x))return!0}return!1}});
var __extends=this&&this.__extends||function(){function y(x,v){y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,e){f.__proto__=e}||function(f,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(f[a]=e[a])};return y(x,v)}return function(x,v){function f(){this.constructor=x}if("function"!==typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");y(x,v);x.prototype=null===v?Object.create(v):(f.prototype=v.prototype,new f)}}();
function p(){var y="perspective",x=["Webkit","Moz","O","ms","Ms"],v;for(v=0;v<x.length;v++)"undefined"!==typeof document.documentElement.style[x[v]+"Perspective"]&&(y=x[v]+"Perspective");"undefined"!==typeof document.documentElement.style[y]?"webkitPerspective"in document.documentElement.style?(y=document.createElement("style"),x=document.createElement("div"),v=document.head||document.getElementsByTagName("head")[0],y.textContent="@media (-webkit-transform-3d) {#ggswhtml5{height:5px}}",v.appendChild(y),
x.id="ggswhtml5",document.documentElement.appendChild(x),v=5===x.offsetHeight,y.parentNode.removeChild(y),x.parentNode.removeChild(x)):v=!0:v=!1;return v}function Q(){var y;if(y=!!window.WebGLRenderingContext)try{var x=document.createElement("canvas");x.width=100;x.height=100;var v=x.getContext("webgl");v||(v=x.getContext("experimental-webgl"));y=!!v}catch(f){y=!1}return y}var ggP2VR;
(function(y){var x=function(){function e(a){this.o=null;this.ue=this.qo=this.La=!1;this.jc=!0;this.nd=!1;this.vb=this.Ma=this.Ia=0;this.fov=70;this.Gj=this.za=0;this.autoplay=this.fg=this.mf=!1;this.id="";this.u=this.pan=0;this.o=a;this.Nc=this.kc=100;this.Ec=1}e.prototype.ub=function(a){var b;if(b=a.getAttributeNode("id"))this.id=b.nodeValue.toString();if(b=a.getAttributeNode("pan"))this.pan=Number(b.nodeValue);if(b=a.getAttributeNode("tilt"))this.u=Number(b.nodeValue)};e.prototype.Em=function(a){var b=
"",c=this.o,m=!0;if(c.pj){var h=new y.Ra(0,0,-100);h.Ia(-this.u*Math.PI/180);h.Ma(this.pan*Math.PI/180);h.Ma(-c.pan.m*Math.PI/180);h.Ia(c.u.m*Math.PI/180);h.vb(c.W.m*Math.PI/180);.01<=h.z&&(m=!1)}c.Je&&(b+="perspective("+a+"px) ");b=b+("translate3d(0px,0px,"+a+"px) rotateZ(")+(c.W.m.toFixed(10)+"deg) ");b+="rotateX("+c.u.m.toFixed(10)+"deg) ";b+="rotateY("+(-c.pan.m).toFixed(10)+"deg) ";b+="rotateY("+this.pan.toFixed(10)+"deg) ";b+="rotateX("+(-this.u).toFixed(10)+"deg) ";a=1E4;h=this.j.videoWidth;
var n=this.j.videoHeight;if(0==h||0==n)h=640,n=480;0<this.kc&&(h=this.kc);0<this.Nc&&(n=this.Nc);0<h&&0<n&&(this.j.width=h,this.j.height=n,this.j.style.width=h+"px",this.j.style.height=n+"px");0<this.fov&&(a=h/(2*Math.tan(this.fov/2*Math.PI/180)));b+="translate3d(0px,0px,"+(-a).toFixed(10)+"px) ";b+="rotateZ("+this.vb.toFixed(10)+"deg) ";b+="rotateY("+(-this.Ma).toFixed(10)+"deg) ";b+="rotateX("+this.Ia.toFixed(10)+"deg) ";this.Ec&&1!=this.Ec&&(b+="scaleY("+this.Ec+") ");b+="translate3d("+-h/2+"px,"+
-n/2+"px,0px) ";this.j.style[c.xd+"Origin"]="0% 0%";this.La&&(b="",1==this.za&&(b+="scale("+Math.min(c.D.width/h,c.D.height/n)+") "),b+="translate3d("+-h/2+"px,"+-n/2+"px,0px) ");this.Ds!=b&&(this.Ds=b,this.j.style[c.xd]=b,this.j.style.visibility=m&&this.jc&&(!this.mf||this.ue||this.La)?"visible":"hidden",this.ue&&this.qo==this.La&&(this.j.style[c.Sb]="all 0s linear 0s"),this.qo=this.La)};e.prototype.Bf=function(a){this.j&&(this.j.style.visibility=a?"visible":"hidden")};e.prototype.ge=function(){var a=
this.o;a.na?(this.j.style.left=a.D.width/2+"px",this.j.style.top=a.D.height/2+"px"):(this.j.style.left=a.margin.left+a.D.width/2+"px",this.j.style.top=a.margin.top+a.D.height/2+"px")};e.prototype.Ie=function(){this.j.parentNode&&this.j.parentNode.removeChild(this.j);this.j=null};e.prototype.Od=function(){};return e}();y.ov=x;var v=function(e){function a(b){b=e.call(this,b)||this;b.ua=!1;b.fk=[];b.Up=!1;b.stopped=!1;b.muted=!1;b.Vo=!1;b.Ig=!1;b.Vk=!1;b.Nl=!1;b.Ld=!1;b.dc=null;b.Ji=null;b.ti=0;b.vf=
0;b.qg=!1;b.Jt=!1;b.j=null;b.url=[];b.loop=0;b.level=1;b.yc=0;b.mode=1;b.Xi=10;b.Cb=0;b.Hg=0;b.ta=1;b.Zc=0;b.$c=0;b.ad=0;b.bd=0;b.Dj=-1;return b}__extends(a,e);a.prototype.Bm=function(){var b=this,c=b.j.play();if(void 0!==c)c.then(function(){b.If()})["catch"](function(){b.j.pause();b.Up&&(b.j.muted=!0,b.j.play())})};a.prototype.Pp=function(){this.ua&&this.stopped?this.stopped=!1:0==this.loop?this.ua?(this.dc=null,this.oe()):this.j.play():(0<this.ib?(this.ua||(this.j.currentTime=0),this.Vk&&(this.Gb&&
0==this.Gb.gain.value||0==this.rb.gain.value&&0==this.Jb.gain.value&&0==this.Hb.gain.value&&0==this.Ib.gain.value)||(this.ua?(this.dc=null,this.oe()):this.j.play())):this.ua&&(this.dc=null,this.qg=!1),this.ib--)};a.prototype.If=function(){var b=this.o;b.G("Sound: Add WebAudio "+this.id);this.Ld=!1;var c=b.ga;c&&(this.ua||7==this.mode||(b.G("Sound: Create source element "+this.id),this.source=c.createMediaElementSource(this.j)),2==this.mode||3==this.mode||5==this.mode?(b.G("Sound: Create directional "+
this.id),this.Pd=c.createChannelSplitter(2),this.rb=c.createGain(),this.Hb=c.createGain(),this.Ib=c.createGain(),this.Jb=c.createGain(),this.eh=c.createChannelMerger(2),this.ua||this.source.connect(this.Pd),this.Pd.connect(this.rb,0),this.Pd.connect(this.Hb,0),this.Pd.connect(this.Ib,1),this.Pd.connect(this.Jb,1),this.rb.connect(this.eh,0,0),this.Hb.connect(this.eh,0,1),this.Ib.connect(this.eh,0,0),this.Jb.connect(this.eh,0,1),this.eh.connect(c.destination),1==this.Dj&&(b.G("Sound: Switch to Mono"+
this.id),this.Zp())):7!=this.mode&&(b.G("Create gain Node "+this.id),this.Gb=c.createGain(),this.ua||this.source.connect(this.Gb),this.Gb.connect(c.destination)))};a.prototype.Zp=function(){1!=this.Dj||this.Ld||!this.Pd||2!=this.mode&&3!=this.mode&&5!=this.mode||(this.Pd.connect(this.Ib,0),this.Pd.connect(this.Jb,0))};a.prototype.ki=function(){var b=this.o.ga;this.La||this.Nl||(this.rb?(this.rb.gain.setValueAtTime(this.Zc,b.currentTime),this.Jb.gain.setValueAtTime(this.bd,b.currentTime),this.Hb.gain.setValueAtTime(this.$c,
b.currentTime),this.Ib.gain.setValueAtTime(this.ad,b.currentTime)):this.Gb&&this.Gb.gain.setValueAtTime((this.Zc+this.bd)/2,b.currentTime+1))};a.prototype.Gp=function(b){var c=this.o.ga;(-1==b?this.muted:1!=b)?this.muted&&(this.muted=this.j.muted=!1,this instanceof f||!(0<=this.ib||0==this.loop)||this.o.Xd(this.id)):(this.muted=this.j.muted=!0,this.o.isPlaying(this.id)&&(this.rb?(this.rb.gain.setValueAtTime(0,c.currentTime+1),this.Jb.gain.setValueAtTime(0,c.currentTime+1),this.Hb.gain.setValueAtTime(0,
c.currentTime+1),this.Ib.gain.setValueAtTime(0,c.currentTime+1)):this.Gb&&this.Gb.gain.setValueAtTime(0,c.currentTime+1),this instanceof f||this.o.Yh(this.id)))};a.prototype.ek=function(){if(!this.Ld||4==this.mode||6==this.mode){var b=this.o,c=this.o.ga;if((this.j||this.ua)&&!this.muted){var m,h=this.pan-b.pan.m;for(m=this.u-b.u.m;-180>h;)h+=360;for(;180<h;)h-=360;var n=this.yc,q=this.Xi;0==q&&(q=.01);0>q&&(q=b.fov.m);this.Yb||(this.Yb=new y.Ra,this.Yb.Jn(this.pan,this.u));0!=this.mode&&1!=this.mode||
!c||this.Gb&&this.Gb.gain.setValueAtTime(this.level*b.aa*this.ta,c.currentTime);if(2==this.mode&&c){var r=.5*Math.cos(h*Math.PI/180)+.5;this.Zc=Math.sqrt(r)*this.ta*this.level*b.aa;this.bd=Math.sqrt(r)*this.ta*this.level*b.aa;this.$c=Math.sqrt(1-r)*this.ta*this.level*b.aa;this.ad=Math.sqrt(1-r)*this.ta*this.level*b.aa;this.ki()}if(3==this.mode){h=0>h?h<-this.Cb?h+this.Cb:0:h>this.Cb?h-this.Cb:0;var t=this.level;m=Math.abs(m);m=m<this.Hg?0:m-this.Hg;var w=1-m/q;if(Math.abs(h)>q||0>w)r=t*n*b.aa,c?(this.Zc=
r*this.ta,this.bd=r*this.ta,this.ad=this.$c=0,this.ki()):this.j.volume=t*n*b.aa;else if(r=1-Math.abs(h/q),c){var z=t*(n+(1-n)*w*r)*b.aa;r=t*n*b.aa;0<=h?(this.Zc=z*this.ta,this.bd=r*this.ta):(this.Zc=r*this.ta,this.bd=z*this.ta);2*Math.abs(h)<q?(r=1-Math.abs(2*h)/q,z=t*(n+(1-n)*w*r)*b.aa,r=.5*t*(1-n)*w*(1-r)*b.aa,0<=h?(this.bd=z*this.ta,this.ad=r*this.ta,this.$c=0):(this.Zc=z*this.ta,this.$c=r*this.ta,this.ad=0)):(r=1-(Math.abs(2*h)-q)/q,z=.5*t*(1-n)*w*r*b.aa,0<=h?(this.ad=z*this.ta,this.$c=0):(this.$c=
z*this.ta,this.ad=0));this.ki()}else this.j.volume=t*(n+(1-n)*w*r)*b.aa}4==this.mode&&(Math.abs(h)<this.Cb&&Math.abs(m)<this.Hg?this.Ig||(this.Ig=!0,this.ib=this.loop-1,b.se||(this.j.play(),this.Ld&&this.If())):this.Ig=!1);5==this.mode&&(m=180*Math.acos(b.Mk.Jj(this.Yb))/Math.PI,m<this.Cb?c?(this.Zc=this.level*b.aa*this.ta,this.bd=this.level*b.aa*this.ta,this.ad=this.$c=0,this.ki()):this.j.volume=this.level*b.aa:c?(m<this.Cb+q?(h=0>h?h>-this.Cb?0:h+this.Cb:h<this.Cb?0:h-this.Cb,z=1-Math.max(m-this.Cb,
0)/q,r=Math.max(1-Math.abs(h)*Math.cos(this.u*Math.PI/180)/q,0),0<h?(this.Zc=this.level*(z*(1-this.yc)+this.yc)*b.aa*this.ta,this.bd=this.level*(z*r*(1-this.yc)+this.yc)*b.aa*this.ta,this.$c=0,this.ad=this.level*z*(1-r)*b.aa*this.ta):(this.Zc=this.level*(z*r*(1-this.yc)+this.yc)*b.aa*this.ta,this.bd=this.level*(z*(1-this.yc)+this.yc)*b.aa*this.ta,this.$c=this.level*z*(1-r)*b.aa*this.ta,this.ad=0)):(z=this.level*this.yc*b.aa,this.Zc=z*this.ta,this.bd=z*this.ta,this.ad=this.$c=0),this.ki()):(m-=this.Cb,
m<q&&0<q?(r=1-Math.abs(m/q),this.j.volume=this.level*(n+(1-n)*r)*b.aa):this.j.volume=n*b.aa));6==this.mode&&(m=180*Math.acos(b.Mk.Jj(this.Yb))/Math.PI,Math.abs(m)<this.Cb?this.Ig||(this.Ig=!0,this.ib=this.loop-1,this.ua?this.qg||this.oe():this.j.play()):this.Ig=!1)}}};a.prototype.gr=function(){var b=this;b.dc=this.o.ga.createBufferSource();b.dc.addEventListener("ended",function(){b.Pp()},!1);2==b.mode||3==b.mode||5==b.mode?b.dc.connect(b.Pd):b.dc.connect(b.Gb)};a.prototype.oe=function(){this.o.G("play buffer sound: "+
this.id);var b=this.o.ga,c=this.vf;this.Ji?(null==this.dc&&(this.gr(),this.dc.buffer=this.Ji),this.ti=b.currentTime-c,this.vf=0,this.qg=!0,this.stopped=!1,this.dc.start(0,c),this.o.G("buffer Source started")):(this.o.G("bufferSoundPlay() -> no audio buffer -> playWhenReady"),this.Jt=!0)};a.prototype.xk=function(){var b=this.o.ga.currentTime-this.ti;this.Mf();this.vf=b};a.prototype.Mf=function(){this.dc&&this.qg&&(this.stopped=!0,this.dc.disconnect(),this.dc.stop(0),this.dc=null);this.ti=this.vf=0;
this.qg=!1};a.prototype.Uq=function(){var b=this.o.ga;return this.vf?this.vf:this.ti?b.currentTime-this.ti:0};a.prototype.Vq=function(b){this.Mf();this.vf=b;this.oe()};a.prototype.addElement=function(){var b=-1,c=this,m=this.o,h=this.o.ga;try{for(var n=!1,q=0;q<m.X.length;q++)m.X[q].id==c.id&&(b=q,null==m.X[q].j&&!m.X[q].ua||m.X[q].url.join()!=c.url.join()||m.X[q].loop!=c.loop||m.X[q].mode!=c.mode||(n=!0,m.X[q].pan=c.pan,m.X[q].u=c.u,m.X[q].level=c.level,m.X[q].yc=c.yc,m.X[q].Xi=c.Xi,m.X[q].Cb=c.Cb,
m.X[q].Hg=c.Hg));if(n)m.G("Keep playing "+c.id);else{if(0<=b){var r=m.X[b];if(null!=r.j||r.ua)if(h&&m.Wa.enabled)m.Wa.zi.push(r),1!=m.C.ca&&2!=m.C.ca&&6!=m.C.ca&&m.Wa.En(r);else{try{r.ua?r.xk():r.j.pause()}catch(w){m.G(w)}try{r.Ie()}catch(w){m.G(w)}}}h&&(this.Ld=!0);c.j=document.createElement("audio");c.j.crossOrigin=m.crossOrigin;c.j.setAttribute("class","ggmedia");m.ze&&c.j.setAttribute("id",m.ze+c.id);for(q=0;q<c.url.length;q++)if(n=void 0,n=document.createElement("source"),""!=c.url[q]&&"#"!=
c.url[q]){n.crossOrigin=m.crossOrigin;var t=m.jb(m.Sa(c.url[q]));n.setAttribute("src",t);c.j.appendChild(n);c.fk.push(t)}c.j.volume=c.level*m.aa;0<c.j.childNodes.length&&(m.$.appendChild(c.j),c.j.addEventListener("ended",function(){c.Pp()},!1),h&&(c.Vk=!1,0==c.loop&&c.source&&c.source.mediaElement&&(c.source.mediaElement.loop=!0),1==c.Dj&&this.Zp()));1<=c.loop&&(c.ib=c.loop-1);0<=b?m.X[b]=c:m.X.push(c);c.ek();this.o.Uc||(1!=c.mode&&2!=c.mode&&3!=c.mode&&5!=c.mode||!(0<=c.loop)||h&&m.Wa.enabled||(c.ua||
(c.j.autoplay=!0,c.Bm()),c.autoplay=!0),0==c.mode&&0<=c.loop&&(c.autoplay=!0,c.Bm()))}}catch(w){this.o.G(w)}};a.prototype.Od=function(){for(var b=this.o.isPlaying(this.id),c=0,m=!1,h=0;h<this.j.children.length&&!(this.url.length<=c);h++){var n=this.j.children[h];if("SOURCE"==n.nodeName){var q=this.o.jb(this.o.Sa(this.url[c]));this.fk[c]!=q&&(b&&!m&&this.o.Yh(this.id),n.setAttribute("src",q),this.fk[c]=q,m=!0);c++}}m&&(this.j.load(),b&&this.o.Xd(this.id))};a.prototype.Ie=function(){try{this.o.G("Remove Snd:"+
this.id),this.ua||(this.o.$.removeChild(this.j),this.j=null)}catch(b){this.o.G(b)}};a.prototype.ub=function(b){e.prototype.ub.call(this,b);var c;(c=b.getAttributeNode("url"))&&this.url.push(c.nodeValue.toString());if(c=b.getAttributeNode("level"))this.level=Number(c.nodeValue);if(c=b.getAttributeNode("loop"))this.loop=Number(c.nodeValue);if(c=b.getAttributeNode("mode"))this.mode=Number(c.nodeValue);if(c=b.getAttributeNode("nodechangekeep"))this.Vo=1==Number(c.nodeValue);if(c=b.getAttributeNode("field"))this.Xi=
Number(c.nodeValue);if(c=b.getAttributeNode("ambientlevel"))this.yc=Number(c.nodeValue);if(c=b.getAttributeNode("pansize"))this.Cb=Number(c.nodeValue);if(c=b.getAttributeNode("tiltsize"))this.Hg=Number(c.nodeValue);for(b=b.firstChild;b;)"source"==b.nodeName&&((c=b.getAttributeNode("url"))&&this.url.push(c.nodeValue.toString()),c=b.getAttributeNode("mono"))&&(this.Dj=1==Number(c.nodeValue)?1:2),b=b.nextSibling};return a}(x);y.ie=v;var f=function(e){function a(b){b=e.call(this,b)||this;b.poster="";
b.Ia=0;b.Ma=0;b.vb=0;b.fov=50;b.za=0;b.Gj=0;b.mf=!1;b.fg=!1;return b}__extends(a,e);a.prototype.we=function(){1!=this.za&&4!=this.za||this.jf(!this.La);2==this.za&&this.o.gp(this.id)};a.prototype.jf=function(b){var c=this.o,m=c.ga;if(1==this.za||4==this.za){if(this.La=b)this.j.style.pointerEvents="auto",this.j.style.cursor="pointer",this.j.style.zIndex=(c.Gf+8E4).toString(),this.j.style[this.o.Sb]="all 1s ease 0s",this.j.muted=!1,this.o.isPlaying(this.id)||c.Xd(this.id);else{this.j.style.pointerEvents=
"none";this.j.style.cursor="default";this.j.style.zIndex=c.Gf.toString();this.j.style[this.o.Sb]="all 1s ease 0s";this.o.isPlaying(this.id)&&(0==this.Gj?c.Wj(this.id):2==this.Gj&&(this.j.muted=!0));this.Nl=!0;var h=this;setTimeout(function(){h.Nl=!1},1E3)}if(m&&(2==this.mode||3==this.mode||5==this.mode)&&(m=m.currentTime,this.rb&&this.Jb&&this.Hb.gain&&this.Hb&&this.Ib)){var n=this.rb.gain.value,q=this.Jb.gain.value,r=this.Hb.gain.value,t=this.Ib.gain.value;this.La?(this.rb.gain.linearRampToValueAtTime(n,
m),this.rb.gain.linearRampToValueAtTime(this.level*c.aa,m+1),this.Jb.gain.linearRampToValueAtTime(q,m),this.Jb.gain.linearRampToValueAtTime(this.level*c.aa,m+1),this.Hb.gain.linearRampToValueAtTime(r,m),this.Hb.gain.linearRampToValueAtTime(0,m+1),this.Ib.gain.linearRampToValueAtTime(t,m),this.Ib.gain.linearRampToValueAtTime(0,m+1)):(this.rb.gain.linearRampToValueAtTime(n,m),this.rb.gain.linearRampToValueAtTime(this.Zc,m+1),this.Jb.gain.linearRampToValueAtTime(q,m),this.Jb.gain.linearRampToValueAtTime(this.bd,
m+1),this.Hb.gain.linearRampToValueAtTime(r,m),this.Hb.gain.linearRampToValueAtTime(this.$c,m+1),this.Ib.gain.linearRampToValueAtTime(t,m),this.Ib.gain.linearRampToValueAtTime(this.ad,m+1))}this.ue=!0;this.o.kq()}2==this.za&&(b?this.o.Xd(this.id):this.o.Yh(this.id))};a.prototype.xe=function(){this.ue=!1;this.j.style[this.o.Sb]="none"};a.prototype.ev=function(){0==this.loop?this.j.play():0<this.ib?(this.j.currentTime=0,this.j.play()):(this.isRunning=!1,this.ib--)};a.prototype.ub=function(b){e.prototype.ub.call(this,
b);var c;if(c=b.getAttributeNode("poster"))this.poster=String(c.nodeValue);if(c=b.getAttributeNode("maskimage"))this.md=String(c.nodeValue);if(c=b.getAttributeNode("rotx"))this.Ia=Number(c.nodeValue);if(c=b.getAttributeNode("roty"))this.Ma=Number(c.nodeValue);if(c=b.getAttributeNode("rotz"))this.vb=Number(c.nodeValue);if(c=b.getAttributeNode("fov"))this.fov=Number(c.nodeValue);if(c=b.getAttributeNode("width"))this.kc=Number(c.nodeValue);if(c=b.getAttributeNode("height"))this.Nc=Number(c.nodeValue);
this.Ec=(c=b.getAttributeNode("stretch"))?Number(c.nodeValue):1;if(c=b.getAttributeNode("clickmode"))this.za=Number(c.nodeValue);if(c=b.getAttributeNode("popbackmode"))this.Gj=Number(c.nodeValue);if(c=b.getAttributeNode("handcursor"))this.fg=1==Number(c.nodeValue);if(c=b.getAttributeNode("startmutedmobile"))this.Up=1==Number(c.nodeValue)};a.prototype.addElement=function(){var b=this,c=this.o,m=this.o.ga;try{b.j=document.createElement("video");b.j.setAttribute("class","ggmedia");b.j.crossOrigin=c.crossOrigin;
b.j.hidden=!0;b.j.addEventListener("click",function(r){r.stopPropagation()});c.ze&&b.j.setAttribute("id",c.ze+b.id);if(c.Ci)b.j.setAttribute("playsinline","playsinline"),b.j.setAttribute("style","display: none; max-width:none;");else if(b.j.setAttribute("style","max-width:none;pointer-events:none;"),b.j.setAttribute("playsinline","playsinline"),1==b.za||4==b.za)b.j.addEventListener(c.Nm(),function(){b.xe()},!1),b.j.addEventListener("transitionend",function(){b.xe()},!1);var h=void 0;for(h=0;h<b.url.length;h++){var n=
void 0;n=document.createElement("source");n.crossOrigin=c.crossOrigin;var q=c.jb(c.Sa(b.url[h]));n.setAttribute("src",q);b.j.appendChild(n);b.fk.push(q)}""!=b.poster&&(b.j.poster=c.jb(c.Sa(b.poster)),0>b.loop&&(b.j.preload="none"));b.md&&""!=b.md&&(b.j.style.md="url('"+c.jb(b.md)+"')",b.j.style.webkitMaskImage="url('"+c.jb(b.md)+"')",b.j.style.maskSize="100% 100%",b.j.style.webkitMaskSize="100% 100%");b.j.volume=b.level*c.aa;1<=b.loop&&(b.ib=b.loop-1);m&&(this.Ld=!0);(1==b.mode||2==b.mode||3==b.mode||
5==b.mode)&&0<=b.loop&&(b.j.autoplay=!0,b.isRunning=!0,b.autoplay=!0,this.o.Uc&&(b.j.muted=!0),b.Bm());c.U.push(this);c.Ci?c.$.appendChild(b.j):(b.j.style.position="absolute",b.kc&&(b.j.width=b.kc),b.Nc&&(b.j.height=b.Nc),c.da.appendChild(b.j));b.j.addEventListener("ended",function(){b.ev()},!1)}catch(r){c.G(r)}};a.prototype.Od=function(){this.j.poster=this.o.jb(this.o.Sa(this.poster));e.prototype.Od.call(this)};a.prototype.registerElement=function(b,c){this.nd=!0;this.j=c;this.id=b;this.level=1;
this.o.U.push(this)};a.prototype.Ie=function(){var b=this.o;b.Ci&&(b.S.deleteTexture(this.texture),this.texture=0);this.j.parentNode&&this.j.parentNode.removeChild(this.j);this.j=null};return a}(v);y.Tm=f;v=function(e){function a(b){b=e.call(this,b)||this;b.url="";b.Ia=0;b.Ma=0;b.vb=0;b.fov=50;b.za=0;b.fg=!1;b.kc=100;b.Nc=100;b.Ec=1;return b}__extends(a,e);a.prototype.ub=function(b){e.prototype.ub.call(this,b);var c;if(c=b.getAttributeNode("url"))this.url=c.nodeValue.toString();if(c=b.getAttributeNode("maskimage"))this.md=
String(c.nodeValue);if(c=b.getAttributeNode("rotx"))this.Ia=Number(c.nodeValue);if(c=b.getAttributeNode("roty"))this.Ma=Number(c.nodeValue);if(c=b.getAttributeNode("rotz"))this.vb=Number(c.nodeValue);if(c=b.getAttributeNode("fov"))this.fov=Number(c.nodeValue);if(c=b.getAttributeNode("width"))this.kc=Number(c.nodeValue);if(c=b.getAttributeNode("height"))this.Nc=Number(c.nodeValue);this.Ec=(c=b.getAttributeNode("stretch"))?Number(c.nodeValue):1;if(c=b.getAttributeNode("clickmode"))this.za=Number(c.nodeValue);
if(c=b.getAttributeNode("hidepinned"))this.mf=1==Number(c.nodeValue);if(c=b.getAttributeNode("handcursor"))this.fg=1==Number(c.nodeValue);for(b=b.firstChild;b;)"source"==b.nodeName&&(c=b.getAttributeNode("url"))&&(this.url=c.nodeValue.toString()),b=b.nextSibling};a.prototype.xe=function(){this.ue=!1;this.j.style[this.o.Sb]="none";this.mf&&!this.La&&(this.j.style.visibility="hidden")};a.prototype.we=function(){1!==this.za&&4!==this.za||this.jf(!this.La)};a.prototype.jf=function(b){var c=this.o;if(1===
this.za||4===this.za)this.La=b,this.mf&&(this.j.style.visibility="visible",this.j.style.opacity=this.La?"0.0":"1.0"),this.La?(this.j.style.pointerEvents="auto",this.j.style.cursor="pointer",this.j.style.zIndex=(c.Gf+8E4).toString(),this.j.style[c.Sb]="all 1s ease 0s",this.j.style.opacity="1.0"):(this.j.style.pointerEvents="none",this.j.style.cursor="default",this.j.style.zIndex=c.Gf.toString(),this.j.style[c.Sb]="all 1s ease 0s",this.mf&&(this.j.style.opacity="0.0")),this.ue=!0,c.Dm()};a.prototype.addElement=
function(){var b=this,c=this.o;try{b.j=document.createElement("img");b.j.setAttribute("style","-webkit-user-drag:none; max-width:none; pointer-events:none;");b.j.setAttribute("class","ggmedia");b.j.hidden=!0;b.j.addEventListener("click",function(m){m.stopPropagation()});c.ze&&b.j.setAttribute("id",c.ze+b.id);b.j.ondragstart=function(){return!1};if(1===b.za||4===b.za)b.j.addEventListener(c.Nm(),function(){b.xe()},!1),b.j.addEventListener("transitionend",function(){b.xe()},!1);b.j.setAttribute("src",
c.jb(c.Sa(b.url)));b.kc&&(b.j.width=b.kc);b.Nc&&(b.j.height=b.Nc);c.Ua.push(b);b.j.style.position="absolute";b.md&&""!=b.md&&(b.j.style.md="url('"+c.jb(b.md)+"')",b.j.style.webkitMaskImage="url('"+c.jb(b.md)+"')",b.j.style.maskSize="100% 100%",b.j.style.webkitMaskSize="100% 100%");c.da.appendChild(b.j)}catch(m){c.G("Error addimage:"+m)}};a.prototype.Od=function(){this.j.setAttribute("src",this.o.jb(this.o.Sa(this.url)))};return a}(x);y.Cq=v;v=function(e){function a(b){b=e.call(this,b)||this;b.code=
"";return b}__extends(a,e);a.prototype.ub=function(b){e.prototype.ub.call(this,b);var c;if(c=b.getAttributeNode("rotx"))this.Ia=Number(c.nodeValue);if(c=b.getAttributeNode("roty"))this.Ma=Number(c.nodeValue);if(c=b.getAttributeNode("rotz"))this.vb=Number(c.nodeValue);if(c=b.getAttributeNode("fov"))this.fov=Number(c.nodeValue);if(c=b.getAttributeNode("width"))this.kc=Number(c.nodeValue);if(c=b.getAttributeNode("height"))this.Nc=Number(c.nodeValue);this.Ec=(c=b.getAttributeNode("stretch"))?Number(c.nodeValue):
1;if(c=b.getAttributeNode("clickmode"))this.za=Number(c.nodeValue);if(c=b.getAttributeNode("handcursor"))this.fg=1==Number(c.nodeValue);if(c=b.getAttributeNode("code"))this.code=c.nodeValue.toString()};a.prototype.xe=function(){this.ue=!1;this.j.style[this.o.Sb]="none"};a.prototype.we=function(){1!==this.za&&4!==this.za||this.jf(!this.La)};a.prototype.jf=function(b){var c=this.o;if(1===this.za||4===this.za)this.La=b,this.mf&&(this.j.style.visibility="visible",this.j.style.opacity=this.La?"0.0":"1.0"),
this.La?(this.j.style.cursor="pointer",this.j.style.zIndex=(c.Gf+8E4).toString(),this.j.style[c.Sb]="all 1s ease 0s",this.j.style.opacity="1.0"):(this.j.style.cursor="default",this.j.style.zIndex=c.Gf.toString(),this.j.style[c.Sb]="all 1s ease 0s"),this.ue=!0,c.Dm()};a.prototype.addElement=function(){var b=this,c=this.o;try{b.j=document.createElement("div");this.hq();b.j.setAttribute("style","max-width:none;");b.j.setAttribute("class","ggmedia");c.ze&&b.j.setAttribute("id",c.ze+b.id);if(1===b.za||
4===b.za)b.j.addEventListener(c.Nm(),function(){b.xe()},!1),b.j.addEventListener("transitionend",function(){b.xe()},!1);c.Pb.push(b);b.j.style.position="absolute";b.j.style.visibility="hidden";0==b.za?c.Ga.insertBefore(b.j,c.Ga.firstChild):c.da.appendChild(b.j)}catch(m){c.G("Error addwebelement:"+m)}};a.prototype.hq=function(){var b=this.j.innerHTML,c=this.o.Sa(this.code);c!=b&&(this.j.innerHTML=c)};a.prototype.Od=function(){this.hq()};return a}(x);y.Eq=v;x=function(e){function a(b){b=e.call(this,
b)||this;b.dn=50;b.alpha=50;b.type=0;b.color=16777215;return b}__extends(a,e);a.prototype.ub=function(b){e.prototype.ub.call(this,b);var c;if(c=b.getAttributeNode("blinding"))this.dn=Number(c.nodeValue);if(c=b.getAttributeNode("alpha"))this.alpha=Number(c.nodeValue);if(c=b.getAttributeNode("type"))this.type=Number(c.nodeValue);if(c=b.getAttributeNode("color"))this.color=1*Number(c.nodeValue)};return a}(x);y.Dq=x;x=function(){function e(a){this.o=a;this.type="empty";this.nm=this.id=this.target=this.description=
this.title=this.url="";this.w=100;this.h=20;this.mk=!1;this.j=null;this.Rl=this.Ql=this.uc=this.Jc=this.hb=this.Da=this.distance=this.u=this.pan=0;this.visible=!0;this.cc=a.R.cc;this.ac=a.R.ac;this.bc=a.R.bc;this.$b=a.R.$b;this.ye=a.R.ye;this.fd="";this.ud=this.af=0;this.Ef=!1;this.Ti=0;this.vertices=[]}e.prototype.Vf=function(){this.id=this.id;this.pan=this.pan;this.tilt=this.u;this.url=this.url;this.target=this.target;this.title=this.title;this.distance=this.distance;this.description=this.description;
this.skinid=this.nm;this.obj=this.j;this.customimage=this.fd;this.customimagewidth=this.af;this.customimageheight=this.ud;this.use3D=this.Ef;this.distance3D=this.Ti;this.j&&this.j.__div&&(this.div=this.j.__div)};e.prototype.Lu=function(){var a=this.url;return"{"==a.charAt(0)?a.substr(1,a.length-2):!1};e.prototype.ub=function(a){var b;if(b=a.getAttributeNode("url"))this.url=b.nodeValue.toString();if(b=a.getAttributeNode("target"))this.target=b.nodeValue.toString();if(b=a.getAttributeNode("title"))this.title=
b.nodeValue.toString();if(b=a.getAttributeNode("description"))this.description=b.nodeValue.toString();if(b=a.getAttributeNode("id"))this.id=b.nodeValue.toString();if(b=a.getAttributeNode("skinid"))this.nm=b.nodeValue.toString();if(b=a.getAttributeNode("width"))this.w=Number(b.nodeValue);if(b=a.getAttributeNode("height"))this.h=Number(b.nodeValue);if(b=a.getAttributeNode("wordwrap"))this.mk=1==Number(b.nodeValue);b=a.getAttributeNode("pan");this.pan=1*(b?Number(b.nodeValue):0);b=a.getAttributeNode("tilt");
this.u=1*(b?Number(b.nodeValue):0);b=a.getAttributeNode("fov");this.fov=1*(b?Number(b.nodeValue):0);b=a.getAttributeNode("distance");this.distance=1*(b?Number(b.nodeValue):0);if(b=a.getAttributeNode("bordercolor"))this.cc=1*Number(b.nodeValue);if(b=a.getAttributeNode("backgroundcolor"))this.ac=1*Number(b.nodeValue);if(b=a.getAttributeNode("borderalpha"))this.bc=1*Number(b.nodeValue);if(b=a.getAttributeNode("backgroundalpha"))this.$b=1*Number(b.nodeValue);if(b=a.getAttributeNode("handcursor"))this.ye=
1==Number(b.nodeValue);if(b=a.getAttributeNode("customimage"))this.fd=this.o.Un()+b.nodeValue;if(b=a.getAttributeNode("customimagewidth"))this.af=Number(b.nodeValue);if(b=a.getAttributeNode("customimageheight"))this.ud=Number(b.nodeValue);if(b=a.getAttributeNode("use3D"))this.Ef=1==Number(b.nodeValue);if(b=a.getAttributeNode("distance3D"))this.Ti=Number(b.nodeValue);for(a=a.firstChild;a;){if("polystring"==a.nodeName){b=a.textContent.toString().split("|");for(var c=0;c<b.length;c++){var m=b[c].split("/");
if(2==m.length){var h={pan:0,u:0};h.pan=Number(m[0]);h.u=Number(m[1]);this.vertices.push(h)}}}"vertex"==a.nodeName&&(h={pan:0,u:0},b=a.getAttributeNode("pan"),h.pan=1*(b?Number(b.nodeValue):0),b=a.getAttributeNode("tilt"),h.u=1*(b?Number(b.nodeValue):0),this.vertices.push(h));a=a.nextSibling}this.Vf()};return e}();y.Fi=x})(ggP2VR||(ggP2VR={}));
(function(y){var x=function(){function v(f,e){this.x=f;this.y=e}v.prototype.init=function(f,e){this.x=f;this.y=e};v.prototype.Ud=function(f,e,a){var b=e.y-f.y;this.x=f.x+(e.x-f.x)*a;this.y=f.y+b*a};v.prototype.Tq=function(f,e,a,b,c){var m=new v;m.Ud(f,a,c);f=new v;f.Ud(a,b,c);a=new v;a.Ud(b,e,c);e=new v;e.Ud(m,f,c);m=new v;m.Ud(f,a,c);f=new v;f.Ud(e,m,c);this.x=f.x;this.y=f.y};v.prototype.vk=function(f,e,a,b,c){var m=new v,h=.5,n=.25;do{m.Tq(f,e,a,b,h);var q=m.x-c;h=0<q?h-n:h+n;n/=2}while(.01<Math.abs(q));
this.x=m.x;this.y=m.y};return v}();y.Lc=x})(ggP2VR||(ggP2VR={}));
(function(y){var x=function(){function v(f,e,a,b,c){this.x=f;this.y=e;this.z=a;this.Jd=b;this.Yb=c}v.prototype.init=function(f,e,a,b,c){this.x=f;this.y=e;this.z=a;this.Jd=b;this.Yb=c};v.prototype.toString=function(){return"("+this.x+","+this.y+","+this.z+") - ("+this.Jd+","+this.Yb+")"};v.prototype.Ia=function(f){var e=Math.sin(f);f=Math.cos(f);var a=this.y,b=this.z;this.y=f*a-e*b;this.z=e*a+f*b};v.prototype.St=function(){var f=this.y;this.y=-this.z;this.z=f};v.prototype.Rt=function(){var f=this.y;
this.y=this.z;this.z=-f};v.prototype.Ma=function(f){var e=Math.sin(f);f=Math.cos(f);var a=this.x,b=this.z;this.x=f*a+e*b;this.z=-e*a+f*b};v.prototype.Tt=function(){var f=this.x;this.x=-this.z;this.z=f};v.prototype.vb=function(f){var e=Math.sin(f);f=Math.cos(f);var a=this.x,b=this.y;this.x=f*a-e*b;this.y=e*a+f*b};v.prototype.vp=function(){var f=this.x;this.x=-this.y;this.y=f};v.prototype.Zd=function(f){this.Ia(f*Math.PI/180)};v.prototype.zf=function(f){this.Ma(f*Math.PI/180)};v.prototype.Af=function(f){this.vb(f*
Math.PI/180)};v.prototype.clone=function(){return new v(this.x,this.y,this.z,this.Jd,this.Yb)};v.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};v.prototype.normalize=function(){var f=this.length();0<f&&(f=1/f,this.x*=f,this.y*=f,this.z*=f)};v.prototype.Jj=function(f){return this.x*f.x+this.y*f.y+this.z*f.z};v.prototype.Jn=function(f,e){var a=Math.cos(e*Math.PI/180);this.x=a*Math.sin(f*Math.PI/180);this.y=Math.sin(e*Math.PI/180);this.z=a*Math.cos(f*Math.PI/
180)};v.prototype.Pq=function(){return 180*Math.atan2(-this.x,-this.z)/Math.PI};v.prototype.Qq=function(){return 180*Math.asin(this.y/this.length())/Math.PI};v.prototype.Ud=function(f,e,a){this.x=f.x*a+e.x*(1-a);this.y=f.y*a+e.y*(1-a);this.z=f.z*a+e.z*(1-a);this.Jd=f.Jd*a+e.Jd*(1-a);this.Yb=f.Yb*a+e.Yb*(1-a)};return v}();y.Ra=x})(ggP2VR||(ggP2VR={}));
(function(y){var x=function(){function v(){this.Bp()}v.prototype.Bp=function(){this.nc=1;this.Hc=this.oc=this.Mb=0;this.pc=1;this.qc=this.Ub=this.Ic=0;this.Vb=1};v.prototype.clone=function(f){this.nc=f.nc;this.Mb=f.Mb;this.oc=f.oc;this.Hc=f.Hc;this.pc=f.pc;this.Ic=f.Ic;this.Ub=f.Ub;this.qc=f.qc;this.Vb=f.Vb};v.prototype.ju=function(f){var e=Math.cos(f);f=Math.sin(f);this.nc=1;this.Hc=this.oc=this.Mb=0;this.pc=e;this.Ic=-f;this.Ub=0;this.qc=f;this.Vb=e};v.prototype.ku=function(f){var e=Math.cos(f);
f=Math.sin(f);this.nc=e;this.Mb=0;this.oc=f;this.Hc=0;this.pc=1;this.Ic=0;this.Ub=-f;this.qc=0;this.Vb=e};v.prototype.lu=function(f){var e=Math.cos(f);f=Math.sin(f);this.nc=e;this.Mb=-f;this.oc=0;this.Hc=f;this.pc=e;this.qc=this.Ub=this.Ic=0;this.Vb=1};v.prototype.gu=function(f){this.ju(f*Math.PI/180)};v.prototype.hu=function(f){this.ku(f*Math.PI/180)};v.prototype.iu=function(f){this.lu(f*Math.PI/180)};v.prototype.Zd=function(f){this.ld||(this.ld=new v,this.De=new v);this.ld.gu(f);this.De.clone(this);
this.multiply(this.ld,this.De)};v.prototype.zf=function(f){this.ld||(this.ld=new v,this.De=new v);this.ld.hu(f);this.De.clone(this);this.multiply(this.ld,this.De)};v.prototype.Af=function(f){this.ld||(this.ld=new v,this.De=new v);this.ld.iu(f);this.De.clone(this);this.multiply(this.ld,this.De)};v.prototype.multiply=function(f,e){this.nc=f.nc*e.nc+f.Mb*e.Hc+f.oc*e.Ub;this.Mb=f.nc*e.Mb+f.Mb*e.pc+f.oc*e.qc;this.oc=f.nc*e.oc+f.Mb*e.Ic+f.oc*e.Vb;this.Hc=f.Hc*e.nc+f.pc*e.Hc+f.Ic*e.Ub;this.pc=f.Hc*e.Mb+
f.pc*e.pc+f.Ic*e.qc;this.Ic=f.Hc*e.oc+f.pc*e.Ic+f.Ic*e.Vb;this.Ub=f.Ub*e.nc+f.qc*e.Hc+f.Vb*e.Ub;this.qc=f.Ub*e.Mb+f.qc*e.pc+f.Vb*e.qc;this.Vb=f.Ub*e.oc+f.qc*e.Ic+f.Vb*e.Vb};v.prototype.it=function(f){var e=f.x;var a=f.y;var b=f.z;f.x=e*this.nc+a*this.Mb+b*this.oc;f.y=e*this.Hc+a*this.pc+b*this.Ic;f.z=e*this.Ub+a*this.qc+b*this.Vb};return v}();y.Qm=x})(ggP2VR||(ggP2VR={}));
(function(y){y.la={create:function(x){var v="undefined"!=typeof Float32Array?new Float32Array(16):Array(16);x&&(v[0]=x[0],v[1]=x[1],v[2]=x[2],v[3]=x[3],v[4]=x[4],v[5]=x[5],v[6]=x[6],v[7]=x[7],v[8]=x[8],v[9]=x[9],v[10]=x[10],v[11]=x[11],v[12]=x[12],v[13]=x[13],v[14]=x[14],v[15]=x[15]);return v},set:function(x,v){v[0]=x[0];v[1]=x[1];v[2]=x[2];v[3]=x[3];v[4]=x[4];v[5]=x[5];v[6]=x[6];v[7]=x[7];v[8]=x[8];v[9]=x[9];v[10]=x[10];v[11]=x[11];v[12]=x[12];v[13]=x[13];v[14]=x[14];v[15]=x[15];return v},identity:function(x){x[0]=
1;x[1]=0;x[2]=0;x[3]=0;x[4]=0;x[5]=1;x[6]=0;x[7]=0;x[8]=0;x[9]=0;x[10]=1;x[11]=0;x[12]=0;x[13]=0;x[14]=0;x[15]=1;return x},multiply:function(x,v,f){f||(f=x);var e=x[0],a=x[1],b=x[2],c=x[3],m=x[4],h=x[5],n=x[6],q=x[7],r=x[8],t=x[9],w=x[10],z=x[11],C=x[12],E=x[13],D=x[14];x=x[15];var F=v[0],A=v[1],G=v[2],I=v[3],J=v[4],H=v[5],L=v[6],K=v[7],M=v[8],O=v[9],R=v[10],S=v[11],V=v[12],W=v[13],X=v[14];v=v[15];f[0]=F*e+A*m+G*r+I*C;f[1]=F*a+A*h+G*t+I*E;f[2]=F*b+A*n+G*w+I*D;f[3]=F*c+A*q+G*z+I*x;f[4]=J*e+H*m+L*r+
K*C;f[5]=J*a+H*h+L*t+K*E;f[6]=J*b+H*n+L*w+K*D;f[7]=J*c+H*q+L*z+K*x;f[8]=M*e+O*m+R*r+S*C;f[9]=M*a+O*h+R*t+S*E;f[10]=M*b+O*n+R*w+S*D;f[11]=M*c+O*q+R*z+S*x;f[12]=V*e+W*m+X*r+v*C;f[13]=V*a+W*h+X*t+v*E;f[14]=V*b+W*n+X*w+v*D;f[15]=V*c+W*q+X*z+v*x;return f},translate:function(x,v,f){var e=v[0],a=v[1];v=v[2];if(!f||x==f)return x[12]=x[0]*e+x[4]*a+x[8]*v+x[12],x[13]=x[1]*e+x[5]*a+x[9]*v+x[13],x[14]=x[2]*e+x[6]*a+x[10]*v+x[14],x[15]=x[3]*e+x[7]*a+x[11]*v+x[15],x;var b=x[0],c=x[1],m=x[2],h=x[3],n=x[4],q=x[5],
r=x[6],t=x[7],w=x[8],z=x[9],C=x[10],E=x[11];f[0]=b;f[1]=c;f[2]=m;f[3]=h;f[4]=n;f[5]=q;f[6]=r;f[7]=t;f[8]=w;f[9]=z;f[10]=C;f[11]=E;f[12]=b*e+n*a+w*v+x[12];f[13]=c*e+q*a+z*v+x[13];f[14]=m*e+r*a+C*v+x[14];f[15]=h*e+t*a+E*v+x[15];return f},scale:function(x,v,f){var e=v[0],a=v[1];v=v[2];if(!f||x==f)return x[0]*=e,x[1]*=e,x[2]*=e,x[3]*=e,x[4]*=a,x[5]*=a,x[6]*=a,x[7]*=a,x[8]*=v,x[9]*=v,x[10]*=v,x[11]*=v,x;f[0]=x[0]*e;f[1]=x[1]*e;f[2]=x[2]*e;f[3]=x[3]*e;f[4]=x[4]*a;f[5]=x[5]*a;f[6]=x[6]*a;f[7]=x[7]*a;f[8]=
x[8]*v;f[9]=x[9]*v;f[10]=x[10]*v;f[11]=x[11]*v;f[12]=x[12];f[13]=x[13];f[14]=x[14];f[15]=x[15];return f},rotate:function(x,v,f,e){var a=f[0],b=f[1];f=f[2];var c=Math.sqrt(a*a+b*b+f*f);if(!c)return null;1!=c&&(c=1/c,a*=c,b*=c,f*=c);var m=Math.sin(v),h=Math.cos(v),n=1-h;v=x[0];c=x[1];var q=x[2],r=x[3],t=x[4],w=x[5],z=x[6],C=x[7],E=x[8],D=x[9],F=x[10],A=x[11],G=a*a*n+h,I=b*a*n+f*m,J=f*a*n-b*m,H=a*b*n-f*m,L=b*b*n+h,K=f*b*n+a*m,M=a*f*n+b*m;a=b*f*n-a*m;b=f*f*n+h;e?x!=e&&(e[12]=x[12],e[13]=x[13],e[14]=x[14],
e[15]=x[15]):e=x;e[0]=v*G+t*I+E*J;e[1]=c*G+w*I+D*J;e[2]=q*G+z*I+F*J;e[3]=r*G+C*I+A*J;e[4]=v*H+t*L+E*K;e[5]=c*H+w*L+D*K;e[6]=q*H+z*L+F*K;e[7]=r*H+C*L+A*K;e[8]=v*M+t*a+E*b;e[9]=c*M+w*a+D*b;e[10]=q*M+z*a+F*b;e[11]=r*M+C*a+A*b;return e},ur:function(x,v,f,e,a,b,c){c||(c=y.la.create());var m=v-x,h=e-f,n=b-a;c[0]=2*a/m;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*a/h;c[6]=0;c[7]=0;c[8]=(v+x)/m;c[9]=(e+f)/h;c[10]=-(b+a)/n;c[11]=-1;c[12]=0;c[13]=0;c[14]=-(b*a*2)/n;c[15]=0;return c},perspective:function(x,v,f,e,a){x=
f*Math.tan(x*Math.PI/360);v*=x;return y.la.ur(-v,v,-x,x,f,e,a)},vv:function(x,v,f,e,a,b,c){c||(c=y.la.create());var m=v-x,h=e-f,n=b-a;c[0]=2/m;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2/h;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=-2/n;c[11]=0;c[12]=-(x+v)/m;c[13]=-(e+f)/h;c[14]=-(b+a)/n;c[15]=1;return c}}})(ggP2VR||(ggP2VR={}));
(function(y){var x=function(){function v(f){this.wa=y.la.create();this.Bb=y.la.create();this.Sd=0;this.ab=[];this.Ih=!1;this.sm=this.Wk=this.Vl=1;this.Qf=1E6;this.Qi=[!1,!1,!1,!1,!1,!1];this.Tj=!1;this.Pk=[];this.ph=!1;this.Rm=8;this.Zs=new y.Qm;this.qe=[];this.Jm=null;this.o=f;this.L=f.L;if(f.jd||f.Fh)f.L.ym=2}v.prototype.Eh=function(){var f=this.o.S;if(f){var e=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(e,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\tgl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n\t\t\t\t\t}");
f.compileShader(e);f.getShaderParameter(e,f.COMPILE_STATUS)||(console&&console.log(f.getShaderInfoLog(e)),alert(f.getShaderInfoLog(e)),e=null);var a=f.createShader(f.VERTEX_SHADER);this.hd(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tattribute vec2 aTextureCoord;\n\t\t\t\tuniform mat4 uMVMatrix;\n\t\t\t\tuniform mat4 uPMatrix;\n\t\t\t\tuniform float uZoffset;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n\t\t\t\t\tgl_Position.z += uZoffset;\n\t\t\t\t\tvTextureCoord = aTextureCoord;\n\t\t\t\t}");
this.N=f.createProgram();this.lg(this.N,a,e);this.N.ja=f.getAttribLocation(this.N,"aVertexPosition");f.enableVertexAttribArray(this.N.ja);this.N.Ja=f.getAttribLocation(this.N,"aTextureCoord");f.enableVertexAttribArray(this.N.Ja);this.N.Ee=f.getUniformLocation(this.N,"uPMatrix");this.N.Vh=f.getUniformLocation(this.N,"uMVMatrix");this.N.ug=f.getUniformLocation(this.N,"uSampler");this.N.rk=f.getUniformLocation(this.N,"uZoffset");e=f.createShader(f.VERTEX_SHADER);this.hd(e,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n\t\t\t\t}");
a=f.createShader(f.FRAGMENT_SHADER);this.hd(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform vec3 uColor;\n\t\t\t\tuniform float uAlpha;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = vec4(uColor, uAlpha);\n\t\t\t\t}");this.Yd=f.createProgram();this.lg(this.Yd,e,a);this.Yd.ja=f.getAttribLocation(this.Yd,"aVertexPosition");f.enableVertexAttribArray(this.Yd.ja);a=f.createShader(f.VERTEX_SHADER);this.hd(a,"precision highp float;\n\t\t\t\tattribute vec3 aVertexPosition;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tuniform vec4 uRect;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pos = vec2(uRect.x + uRect.z*aVertexPosition.x,uRect.y + uRect.w*aVertexPosition.y);\n\t\t\t\t\tvec2 pointNorm = (pos / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 1.0, 1.0);\n\t\t\t\t\tvTextureCoord.s=aVertexPosition.x;\n\t\t\t\t\tvTextureCoord.t=1.0-aVertexPosition.y;\n\t\t\t\t}");
e=f.createShader(f.FRAGMENT_SHADER);this.hd(e,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = texture2D(uSampler,vTextureCoord);\n\t\t\t\t}");this.th=f.createProgram();this.lg(this.th,a,e)}};v.prototype.mj=function(){var f=this.o,e=f.S;if(e){var a=e.createShader(e.FRAGMENT_SHADER);var b=this.fl(13);this.hd(a,b);b=e.createShader(e.VERTEX_SHADER);
this.hd(b,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n");
this.mp=e.createProgram();this.lg(this.mp,b,a);a=e.createShader(e.FRAGMENT_SHADER);b=this.fl(4);this.hd(a,b);b=e.createShader(e.VERTEX_SHADER);this.hd(b,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n");
this.np=e.createProgram();this.lg(this.np,b,a);a=e.createShader(e.FRAGMENT_SHADER);b=this.fl(f.A.format);this.hd(a,b);b=e.createShader(e.VERTEX_SHADER);this.hd(b,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n");
this.op=e.createProgram();this.lg(this.op,b,a);this.Lj||(this.Lj=e.createBuffer())}else this.o.G("No WebGL to initRemapShader!")};v.prototype.hd=function(f,e){var a=this.o.S;a.shaderSource(f,e);a.compileShader(f);a.getShaderParameter(f,a.COMPILE_STATUS)||(console&&console.log(a.getShaderInfoLog(f)),U&&alert(a.getShaderInfoLog(f)))};v.prototype.lg=function(f,e,a){var b=this.o.S;b.attachShader(f,e);b.attachShader(f,a);b.linkProgram(f);b.getProgramParameter(f,b.LINK_STATUS)||(alert("Could not initialise shader program"),
console&&console.log(b.getError()));b.useProgram(f)};v.prototype.fl=function(f){var e=this.o;var a="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#define M_PI 3.14159265358979323846\nvarying vec2 dst;\nuniform vec2 srcScale;\nuniform vec2 srcOffset;\nuniform float rectDstDistance;\nuniform float fisheyeDistance;\nuniform float stereoDistance;\nuniform float directionBlend;\nuniform mat4 matRotate; // = mat4( 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0 );\nconst float rectSrcDistance = 1.0;\nuniform vec2 tonemap;\n";
a=(13==f?a+"uniform samplerCube cubeTexture;":a+"uniform sampler2D tileTexture;\n")+"void main()\n{\n";a+="vec4 direction;\n";a+="vec2 src;\n";a+="vec2 srcCord;\n";a+="vec2 texc;\n";var b=this.oo(e.Z());e.Z()!=e.Dc()&&0!=e.Dc()?(e=this.oo(e.Dc()),a+="vec4 direction1,direction2;\n",a+=b.replace("direction=","direction1="),a+=e.replace("direction=","direction2="),a+="direction=normalize(mix(direction1, direction2,1.0-directionBlend));\n"):a+=b;a+="direction=direction*matRotate;\n";13==f&&(a+="direction.z=-direction.z;",
a+="gl_FragColor = textureCube(cubeTexture, direction.xyz);");4==f&&(a+="float iz=1.0/(direction.z * rectSrcDistance);\n",a+="src.x=-direction.x*iz;\n",a+="src.y= direction.y*iz;\n",a+="texc=src * srcScale + srcOffset;\n",a+="if (",a+="(direction.z<0.0) && ",a+="(texc.x>=0.0) && (texc.x<=1.0) && (texc.y>=0.0) && (texc.y<=1.0)) {\n",a=this.ph?a+" gl_FragColor = vec4(0.5,0.5,0,1);\n":a+"  gl_FragColor = texture2D(tileTexture, texc);\n",a+="} else {\n",a=this.ph?a+" gl_FragColor = vec4(0.5,0,0,0.3);\n":
a+"  discard;\n",a+="}\n");1==f&&(a+="src.x=atan(float(-direction.x), float(-direction.z));",a+="src.y=asin(direction.y);\n",a+="texc=src * srcScale + srcOffset;\n",a+="gl_FragColor = texture2D(tileTexture, texc);\n");14==f&&(a+="vec2 cf;\n",a+="if ((direction.z<0.0) && (direction.z<=-abs(direction.x)) && (direction.z<=-abs(direction.y))) {\n",a+="  src.x=-direction.x/direction.z;\n",a+="  src.y=+direction.y/direction.z;\n",a+="  cf.x=1.0;cf.y=3.0;\n",a+="}\n",a+="if ((direction.x>=0.0) && (direction.x>=abs(direction.y)) && (direction.x>=abs(direction.z))) {\n",
a+="  src.x=+direction.z/direction.x;\n",a+="  src.y=-direction.y/direction.x;\n",a+="  cf.x=3.0;cf.y=3.0;\n",a+="}\n",a+="if ((direction.z>=0.0) && (direction.z>=abs(direction.x)) && (direction.z>=abs(direction.y))) {\n",a+="  src.x=-direction.x/direction.z;\n",a+="  src.y=-direction.y/direction.z;\n",a+="  cf.x=5.0;cf.y=3.0;\n",a+="}\n",a+="if ((direction.x<=0.0) && (direction.x<=-abs(direction.y)) && (direction.x<=-abs(direction.z))) {\n",a+="  src.x=+direction.z/direction.x;\n",a+="  src.y=+direction.y/direction.x;\n",
a+="  cf.x=1.0;cf.y=1.0;\n",a+="}\n",a+="if ((direction.y>=0.0) && (direction.y>=abs(direction.x)) && (direction.y>=abs(direction.z))) {\n",a+="  src.x=+direction.x/direction.y;\n",a+="  src.y=-direction.z/direction.y;\n",a+="  cf.x=5.0;cf.y=1.0;\n",a+="}\n",a+="if ((direction.y<=0.0) && (direction.y<=-abs(direction.x)) && (direction.y<=-abs(direction.z))) {\n",a+="  src.x=-direction.x/direction.y;\n",a+="  src.y=-direction.z/direction.y;\n",a+="  cf.x=3.0;cf.y=1.0;\n",a+="}\n",a+="texc.x=(cf.x+src.x*srcScale.x) / 6.0;\n",
a+="texc.y=(cf.y+src.y*srcScale.y) / 4.0;\n",a+="gl_FragColor = texture2D(tileTexture, texc);\n");return a+="}\n"};v.prototype.oo=function(f){var e="";switch(f){case 4:e+="direction.x=dst.x*rectDstDistance;\ndirection.y=dst.y*rectDstDistance;\ndirection.z=-1.0;\n";break;case 12:e+="float r,ph,ro;\nr=length(dst.xy)*0.5;\nro=atan(float(dst.x),float(-dst.y));\nph=r / fisheyeDistance;\ndirection.x= sin(ph) * sin(ro);\ndirection.y=-sin(ph) * cos(ro);\ndirection.z=-cos(ph);\n";break;case 9:e+="float n;\nvec2 ind;\nind=dst*stereoDistance;\nn=1.0 + ind.x*ind.x + ind.y*ind.y;\ndirection.x=2.0*ind.x/n;\ndirection.y=2.0*ind.y/n;\ndirection.z=(n-2.0)/n;\n"}return e+
"direction.w=0.0;\ndirection=normalize(direction);\n"};v.prototype.xo=function(f){var e,a,b=this.o,c=this.o.S;this.Lk=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,this.Lk);var m=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];for(e=0;12>e;e++)2>e%3&&(m[e]*=f);c.bufferData(c.ARRAY_BUFFER,new Float32Array(m),c.STATIC_DRAW);this.$e=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,this.$e);var h=[1,0,0,0,0,1,1,1];c.bufferData(c.ARRAY_BUFFER,new Float32Array(h),c.STATIC_DRAW);this.td=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,
this.td);var n=[0,1,2,0,2,3];c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(n),c.STATIC_DRAW);m=[];n=[];h=[];var q=new y.Ra;for(f=0;6>f;f++){var r=f%3;var t=3>f?1:0;for(a=0;4>a;a++){q.x=-1;q.y=-1;q.z=1;for(e=0;e<a;e++)q.vp();h.push((0>q.x?.33:0)+.33*r,(0>q.y?0:.5)+.5*t);if(4>f)for(e=0;e<f;e++)q.Tt();else 5==f?q.St():q.Rt();m.push(q.x,q.y,q.z)}e=4*f;n.push(0+e,1+e,2+e,0+e,2+e,3+e)}b.A.hk=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,b.A.hk);c.bufferData(c.ARRAY_BUFFER,new Float32Array(m),c.STATIC_DRAW);
b.A.vi=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,b.A.vi);c.bufferData(c.ARRAY_BUFFER,new Float32Array(h),c.STATIC_DRAW);b.A.lj=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b.A.lj);c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(n),c.STATIC_DRAW);this.Hs=c.createBuffer();this.Gs=c.createBuffer()};v.prototype.nl=function(f){var e=this;return function(){try{if(f.nt)return;var a=e.o.S;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,1);var b=!1;null!=f.sf&&f.sf.complete?f.so||(a.bindTexture(a.TEXTURE_2D,
f),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,f.sf),b=f.so=!0):null!=f.wf&&f.wf.complete&&(a.bindTexture(a.TEXTURE_2D,f),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,f.wf),b=!0);b&&(f.loaded=!0,e.o.C.Xc&&("previewtrack"==e.o.C.delay||"videopano"==e.o.C.delay&&!e.o.A.j)&&e.hp()&&e.o.Vj(null));a.bindTexture(a.TEXTURE_2D,null);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,0)}catch(c){e.o.G(c)}e.o.update(2)}};v.prototype.yo=function(){var f=this.o,e=f.S;if(this.ab)for(;0<this.ab.length;)e.deleteTexture(this.ab.pop());
this.ab=[];for(var a=0;6>a;a++){var b=e.createTexture();this.Sd++;b.wf=null;b.sf=null;b.so=!1;e.bindTexture(e.TEXTURE_2D,b);e.texImage2D(e.TEXTURE_2D,0,e.RGB,1,1,0,e.RGB,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);if(f.jh[a]){var c=new Image;c.crossOrigin=f.crossOrigin;c.src=f.jb(f.jh[a]);b.wf=c;c.addEventListener&&c.addEventListener("load",
this.nl(b),!1);f.sd.push(c)}this.ab.push(b)}for(a=0;6>a;a++)f.ih[a]&&(c=new Image,c.crossOrigin=f.crossOrigin,c.src=f.jb(f.ih[a]),c.addEventListener?c.addEventListener("load",this.nl(this.ab[a]),!1):c.onload=this.nl(this.ab[a]),this.ab[a].sf=c,f.sd.push(c));for(a=0;a<f.U.length;a++)f.U[a].nd||(f.U[a].texture=e.createTexture(),f.Sd++,e.bindTexture(e.TEXTURE_2D,f.U[a].texture),e.texImage2D(e.TEXTURE_2D,0,e.RGB,1,1,0,e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),
e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE));f.A.texture=e.createTexture();f.Sd++;e.bindTexture(e.TEXTURE_2D,f.A.texture);e.texImage2D(e.TEXTURE_2D,0,e.RGB,1,1,0,e.RGB,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.bindTexture(e.TEXTURE_2D,null)};v.prototype.lv=
function(){var f=this.o;if(f.D.width!=f.da.offsetWidth||f.D.height!=f.da.offsetHeight)f.D.width=f.da.offsetWidth,f.D.height=f.da.offsetHeight;f.te&&(f.Pc(0),f.Xb());if(f.S){var e=f.S;this.ck();e.clear(e.DEPTH_BUFFER_BIT);e.useProgram(this.N);this.yg(0);e.uniform1i(this.N.ug,0);e.enableVertexAttribArray(this.N.ja);e.enableVertexAttribArray(this.N.Ja);e.bindBuffer(e.ARRAY_BUFFER,this.$e);e.vertexAttribPointer(this.N.Ja,2,e.FLOAT,!1,0,0);e.activeTexture(e.TEXTURE0);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,
this.td);e.uniform1f(this.N.rk,1E-4);e.vertexAttribPointer(this.N.ja,3,e.FLOAT,!1,0,0);y.la.identity(this.Bb);y.la.perspective(f.Kb(),f.zb.width/f.zb.height,.1,100,this.Bb);e.uniformMatrix4fv(this.N.Ee,!1,this.Bb);for(f=0;6>f;f++)this.yg(f),e.bindBuffer(e.ARRAY_BUFFER,this.Lk),e.vertexAttribPointer(this.N.ja,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.$e),e.vertexAttribPointer(this.N.Ja,2,e.FLOAT,!1,0,0),6<=this.ab.length&&this.ab[f].loaded&&(e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,
this.ab[f]),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.td),e.uniform1i(this.N.ug,0),e.uniformMatrix4fv(this.N.Vh,!1,this.wa),e.uniformMatrix4fv(this.N.Ee,!1,this.Bb),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}};v.prototype.ck=function(){var f=this.o,e=this.L;e.M.Hj&&6<e.M.Hj.length&&(e=parseInt(e.M.Hj),f.S.clearColor((e>>16&255)/255,(e>>8&255)/255,(e>>0&255)/255,1))};v.prototype.yg=function(f,e){void 0===e&&(e=1);var a=this.o;y.la.identity(this.wa);y.la.rotate(this.wa,e*-a.W.m*Math.PI/180,[0,
0,1]);y.la.rotate(this.wa,e*-a.u.m*Math.PI/180,[1,0,0]);-1==e?y.la.rotate(this.wa,-a.pan.m*Math.PI/180,[0,1,0]):y.la.rotate(this.wa,(180-a.pan.m)*Math.PI/180,[0,1,0]);a.Va&&(y.la.rotate(this.wa,-a.Va.pitch*Math.PI/180,[1,0,0]),y.la.rotate(this.wa,a.Va.W*Math.PI/180,[0,0,1]));4>f?y.la.rotate(this.wa,-Math.PI/2*f,[0,1,0]):y.la.rotate(this.wa,Math.PI/2*(5==f?1:-1),[1,0,0])};v.prototype.Mu=function(f){var e=this;return function(){e.Pk.push(f)}};v.prototype.lr=function(f){this.o.qb=!0;this.o.nh=!0;f.loaded=
!0;f.Wl=0;f.He=0;var e=this.o.S;this.xn();e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1);if(null!=f.M&&f.M.complete){f.Lb=e.createTexture();this.o.Sd++;e.bindTexture(e.TEXTURE_2D,f.Lb);try{e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,f.M)}catch(a){e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([128,128,128,250])),this.o.G(a)}}this.o.update(2)};v.prototype.xn=function(){this.o.L.wi&&this.o.L.wi--};v.prototype.mr=function(){if(0<this.Pk.length){var f=this.Pk.shift();
this.lr(f)}};v.prototype.jt=function(f){var e=this;return function(){e.o.qb=!0;e.o.nh=!0;var a=e.L.M;try{if(null!=f&&f.complete){var b=a.levels[a.levels.length-1],c=a.fb;b.height=b.width=f.width-2*c;b.Y=b.ra=1;for(var m=0;6>m;m++){var h=new y.Vg;h.Ac=document.createElement("canvas");e.o.na?(h.Ac.width=b.width+2*c,h.Ac.height=b.height+2*c):(h.Ac.width=a.V+2*c,h.Ac.height=a.V+2*c);h.un=h.Ac.getContext("2d");h.Ac.style[e.o.xd+"Origin"]="0% 0%";h.Ac.style.overflow="hidden";h.Ac.style.position="absolute";
h.M=f;var n=b.width+2*c,q=b.height+2*c;h.un&&h.un.drawImage(f,0,m*q,n,q,0,0,n,q);if(e.o.na&&e.o.S){var r=e.o.S;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,1);h.Lb=r.createTexture();e.o.Sd++;r.bindTexture(r.TEXTURE_2D,h.Lb);try{r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,h.Ac)}catch(t){e.o.G(t)}r.bindTexture(r.TEXTURE_2D,null);r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,0)}e.o.Kg&&(h.Ac.qv=-1,e.o.da.insertBefore(h.Ac,e.o.da.firstChild));b.Ka[m]=h}b.loaded=!0;e.o.C.Xc&&("previewtrack"==e.o.C.delay||"videopano"==
e.o.C.delay&&!e.o.A.j)&&e.o.Vj(null)}}catch(t){e.o.G(t)}e.o.update(2)}};v.prototype.aq=function(f){var e=this;return function(){e.o.qb=!0;e.o.nh=!0;e.xn();f.M=null}};v.prototype.jv=function(){var f=this.o,e=this.L,a=e.M,b=a.levels;f.te&&(f.Pc(0),f.Xb());if(f.S){var c=f.S;c.useProgram(this.N);this.ck();c.clear(c.DEPTH_BUFFER_BIT);c.enable(c.DEPTH_TEST);y.la.identity(this.Bb);y.la.perspective(f.Kb(),f.zb.width/f.zb.height,.1,100,this.Bb);c.uniformMatrix4fv(this.N.Ee,!1,this.Bb);e.Yu();e.Po();var m=
e.Gn();var h=b.length-1;for(e.ee=0;h>=m;){var n=b[h],q=1;h==b.length-1&&0==a.fb&&(q=a.V/(a.V-.5));for(var r=0;6>r;r++){var t=e.cube.Xf[r];var w=t.$h;if(t.jc&&0<w.Di&&0<w.lk&&0<w.scale||n.cache){t.qb=!1;t.Lf[h]||(t.Lf[h]={fx:0,fy:0,Ed:0,Fd:0});var z=t.Lf[h];n.cache?(z.fx=0,z.fy=0,z.Ed=n.Y-1,z.Fd=n.ra-1):e.qs(n,w,z);w=!0;for(var C=z.fy;C<=z.Fd;C++)for(var E=z.fx;E<=z.Ed;E++){var D=E+C*n.Y+r*n.Y*n.ra,F=n.Ka[D];F||(F=n.Ka[D]=new y.Vg,f.G("create simple "+h+", <"+D+">"));this.Ui()?F.M||(F.He?F.He--:(this.vj(F,
n,e.Fg(r,h,E,C)),f.qb=!0)):e.ee++;if(F.Lb){if(!F.dg){D=.5*h+1;F.dg=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,F.dg);var A=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];A[3]=E*a.V-a.fb;A[0]=Math.min((E+1)*a.V,n.width)+a.fb;A[7]=C*a.V-a.fb;A[1]=Math.min((C+1)*a.V,n.height)+a.fb;A[4]=A[1];A[6]=A[3];A[9]=A[0];A[10]=A[7];for(var G=0;12>G;G++)A[G]=0==G%3?q*D*(-2*A[G]/n.width+1):1==G%3?q*D*(-2*A[G]/n.height+1):D;c.bufferData(c.ARRAY_BUFFER,new Float32Array(A),c.STATIC_DRAW)}}else w=!1;F.visible=t.jc}z.Mo=w}}h--}for(r=
0;6>r;r++)if(t=e.cube.Xf[r],t.jc)for(w=t.$h,this.yg(r),c.uniform1i(this.N.ug,0),c.uniformMatrix4fv(this.N.Ee,!1,this.Bb),c.uniformMatrix4fv(this.N.Vh,!1,this.wa),c.enableVertexAttribArray(this.N.ja),c.enableVertexAttribArray(this.N.Ja),c.bindBuffer(c.ARRAY_BUFFER,this.$e),c.vertexAttribPointer(this.N.Ja,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.td),c.useProgram(this.N),h=m;h<=b.length-1;){n=b[h];if(t.jc&&0<w.Di&&t.Lf[h]&&0<=t.Lf[h].fx){z=t.Lf[h];for(C=
z.fy;C<=z.Fd;C++)for(E=z.fx;E<=z.Ed;E++)D=E+C*n.Y+r*n.Y*n.ra,(F=n.Ka[D])&&F.Lb&&(c.uniform1f(this.N.rk,1E-4*(E%2+C%2*2)),c.bindBuffer(c.ARRAY_BUFFER,F.dg),c.vertexAttribPointer(this.N.ja,3,c.FLOAT,!1,0,0),c.bindTexture(c.TEXTURE_2D,F.Lb),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.drawElements(c.TRIANGLES,
6,c.UNSIGNED_SHORT,0)),F.visible=t.jc;z.Mo&&(h=b.length)}h++}this.Xl();f.nh=!1}};v.prototype.Ui=function(){return this.L.wi<this.L.ym};v.prototype.vj=function(f,e,a){var b=this.L,c=this.o;b.Ns++;f.M=new Image;f.Wl++;f.He=1<<f.Wl;f.M.onload=this.Mu(f);f.M.onerror=this.aq(f);f.M.onabort=this.aq(f);f.M.crossOrigin=c.crossOrigin;f.M.setAttribute("src",a);c.G("load "+a);e.cache&&c.sd.push(f.M);b.wi++};v.prototype.sq=function(){var f=this.o,e=this.L,a=e.M;f.te&&(f.Pc(0),f.Xb());if(f.S){var b=f.S;this.ck();
b.clear(b.DEPTH_BUFFER_BIT);b.disable(b.CULL_FACE);b.bindBuffer(b.ARRAY_BUFFER,this.Lj);var c=[0,0];c[2]=f.D.width;c[3]=0;c[4]=f.D.width;c[5]=f.D.height;c[6]=0;c[7]=f.D.height;b.bufferData(b.ARRAY_BUFFER,new Float32Array(c),b.STATIC_DRAW);e.ee=0;if(!this.Oc||this.Ih)0<a.levels.length?this.jr():this.kr();f.A.Qc?this.At():(b.enable(b.DEPTH_TEST),b.depthRange(0,1),b.depthFunc(b.LESS),this.Tj=!1,0<a.levels.length&&this.kv(),this.Oc&&!this.Tj&&this.zt())}};v.prototype.vu=function(f,e,a,b,c,m,h){var n=
this.o;c=this.L.M;var q=n.D,r=a*c.V/e.width,t=(a+1)*c.V/e.width;a=b*c.V/e.height;e=(b+1)*c.V/e.height;c=.1;h&&(c=.2);this.ph&&(c=0);b=(t-r)*c;1<t&&(t=1);1<e&&(e=1);r-=b;a-=b;c=this.Rm;h=(t+b-r)/c;t=(e+b-a)/c;e={x:0,y:0};b={x:0,y:0};f.ll=0;var w=n.ej(),z=new y.Ra,C=this.Zs;C.Bp();4>m?C.zf(-90*m):C.Zd(5==m?90:-90);n.Va&&(C.Af(n.Va.W),C.Zd(-n.Va.pitch));C.zf(-n.pan.m);C.Zd(n.u.m);C.Af(n.W.m);for(m=0;m<=c;m++)for(var E=0;E<=c;E++){var D=2*(r+E*h)-1;var F=2*(a+m*t)-1;z.x=1*D;z.y=1*F;z.z=-1;z.normalize();
C.it(z);D=this.mo(z,e,n.Z());0!=n.Dc()&&1>w&&(F=this.mo(z,b,n.Dc()),D&&F?(e.x=e.x*w+b.x*(1-w),e.y=e.y*w+b.y*(1-w)):!D&&F&&(D=!0,e.x=b.x,e.y=b.y));D||(e.x=NaN);f.eg[f.ll++]=q.width/2+e.x*q.width/2;f.eg[f.ll++]=q.height/2-e.y*q.width/2}this.wu(f,c)};v.prototype.mo=function(f,e,a){var b=!0;switch(a){case 0:case 4:a=1/(f.z*this.Vl);e.x=-f.x*a;e.y=f.y*a;0<f.z&&(b=!1);break;case 9:1==f.z&&(b=!1);a=1/((1-f.z)*this.sm);e.x=f.x*a;e.y=-f.y*a;break;case 12:if(a=Math.sqrt(f.x*f.x+f.y*f.y),0==a)e.x=0,e.y=0;else{var c=
2*this.Wk*Math.acos(-f.z)/a;if(2<a)return!1;e.x=c*f.x;e.y=-c*f.y}}return b};v.prototype.wu=function(f,e){for(var a=this.o,b=[],c,m=f.Na=0;m<e;m++)for(var h=0;h<e;h++){b[0]=m+h*(e+1);b[1]=m+1+h*(e+1);b[2]=m+(h+1)*(e+1);b[3]=m+1+(h+1)*(e+1);c=!0;for(var n=0;4>n;n++)isNaN(f.eg[2*b[0]])&&(c=!1);if(c){var q=!1,r=!1,t=!1,w=!1;for(n=0;4>n;n++){var z=f.eg[2*b[n]];z<a.D.width&&(r=!0);0<=z&&(q=!0);z=f.eg[2*b[n]+1];z<a.D.height&&(t=!0);0<=z&&(w=!0)}if(c=c&&r&&q&&t&&w)this.ph?(f.kb[f.Na++]=b[0],f.kb[f.Na++]=
b[1],f.kb[f.Na++]=b[1],f.kb[f.Na++]=b[3],f.kb[f.Na++]=b[3],f.kb[f.Na++]=b[2],f.kb[f.Na++]=b[2],f.kb[f.Na++]=b[0],f.kb[f.Na++]=b[3],f.kb[f.Na++]=b[0],f.kb[f.Na++]=b[1],f.kb[f.Na++]=b[2]):(f.kb[f.Na++]=b[0],f.kb[f.Na++]=b[3],f.kb[f.Na++]=b[2],f.kb[f.Na++]=b[0],f.kb[f.Na++]=b[1],f.kb[f.Na++]=b[3])}}};v.prototype.kv=function(){var f=this.o,e=this.L,a=e.M,b=a.levels;f.te&&(f.Pc(0),f.Xb());if(f.S){var c=f.S,m=this.np;c.useProgram(m);this.Fm(m);c.enable(c.CULL_FACE);c.cullFace(c.FRONT);c.enable(c.STENCIL_TEST);
c.stencilOp(c.KEEP,c.INCR,c.INCR);c.stencilFunc(c.EQUAL,0,255);y.la.identity(this.Bb);y.la.perspective(f.Kb(),f.zb.width/f.zb.height,.1,100,this.Bb);c.uniformMatrix4fv(c.getUniformLocation(m,"uPMatrix"),!1,this.Bb);e.ee=0;e.Po();var h=e.Gn(),n=0;var q=b.length-1;for(var r={},t=b[q];t.xf&&0<q;)q--,t=b[q];for(var w=q,z=w,C=0;6>C;C++)for(var E=0;E<t.ra;E++)for(var D=0;D<t.Y;D++){var F=D+E*t.Y+C*t.Y*t.ra;r[F]=1}for(;q>=h;){var A={};t=b[q];var G=null;0<q&&(G=b[q-1]);var I=!0;for(var J in r)if(r.hasOwnProperty(J)){F=
Number(J);var H=t.Ka[F];C=Number(Math.floor(F/(t.Y*t.ra)));E=Math.floor((F-C*t.Y*t.ra)/t.Y);D=Math.floor(F-(E*t.Y+C*t.Y*t.ra));if(6<=C)console.log("Grrr...");else{var L=e.cube.Xf[C];L.qb=!1;H||(H=t.Ka[F]=new y.Vg,f.G("create "+ +q+", <"+F+">"));this.vu(H,t,D,E,Math.max(1,this.Rm>>w-q),C,0!=f.Dc());H.visible=0<H.Na||t.cache;H.qj=3;H.Kh=Date.now();H.visible&&!H.Lb&&(I=!1,this.Ui()?H.M||(H.He?H.He--:(this.vj(H,t,e.Fg(C,q,D,E)),f.qb=!0)):this.L.ee++);if(G&&(H.visible||G.cache)){H=(D*a.V+1)/t.width;D=
Math.min(1,((D+1)*a.V-1)/t.width);var K=(E*a.V+1)/t.height;E=Math.min(1,((E+1)*a.V-1)/t.height);F=a.V/G.width;L=a.V/G.height;var M=K;K=Math.floor(K*G.height/a.V);do{var O=H,R=Math.floor(H*G.width/a.V);do{var S=R+K*G.Y+C*G.Y*G.ra;R<G.Y&&K<G.ra?A[S]=1:f.G("Grrrr");R++;O+=F}while(O<D);K++;M+=L}while(M<E)}}}I&&(z=q,20>f.fov.m&&q<this.Qf&&(this.Tj=!0));r=A;q--}this.Xl();c.uniform1i(c.getUniformLocation(m,"tileTexture"),0);c.activeTexture(c.TEXTURE0);q=h;for(h=-1;q<=Math.min(z,this.Qf-1);){t=b[q];for(J in t.Ka)if(t.Ka.hasOwnProperty(J)){r=
Number(J);H=t.Ka[r];C=Math.floor(r/(t.Y*t.ra));E=Math.floor((r-C*t.Y*t.ra)/t.Y);D=Math.floor(r-(E*t.Y+C*t.Y*t.ra));h!=C&&(h=C,this.dk(C,m));if(n>e.ng){f.G("Exceeded painted tiles");this.Tj=!1;break}H.Lb&&(w=r=a.V,D==t.Y-1&&(r=t.width-a.V*D),E==t.ra-1&&(w=t.height-a.V*E),r=(r+2*a.fb)/a.V,w=(w+2*a.fb)/a.V,c.bindTexture(c.TEXTURE_2D,H.Lb),c.uniform2f(c.getUniformLocation(m,"uCanvasDimensions"),f.D.width,f.D.height),A=c.getUniformLocation(m,"srcScale"),c.uniform2f(A,.5*t.width/a.V/r,.5*t.height/a.V/w),
A=c.getUniformLocation(m,"srcOffset"),c.uniform2f(A,(.5*t.width+a.fb-a.V*D)/a.V/r,-(.5*t.height+a.fb-a.V*E)/a.V/w+1),A=c.getUniformLocation(m,"zOffset"),c.uniform1f(A,(q+1)/(b.length+5)),r=c.getAttribLocation(m,"aVertexPosition"),c.disableVertexAttribArray(0),c.disableVertexAttribArray(1),c.disableVertexAttribArray(2),c.enableVertexAttribArray(r),c.activeTexture(c.TEXTURE0),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.bindBuffer(c.ARRAY_BUFFER,this.Hs),c.vertexAttribPointer(r,2,c.FLOAT,!1,0,0),c.bufferData(c.ARRAY_BUFFER,new Float32Array(H.eg),c.DYNAMIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.Gs),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(H.kb),c.DYNAMIC_DRAW),this.ph?0==q&&0==C&&c.drawElements(c.LINES,H.Na,c.UNSIGNED_SHORT,0):c.drawElements(c.TRIANGLES,H.Na,c.UNSIGNED_SHORT,0),n++)}q++}c.disable(c.CULL_FACE);
c.cullFace(c.FRONT_AND_BACK);f.nh=!1;c.disable(c.STENCIL_TEST)}};v.prototype.dk=function(f,e){var a=this.o.S;y.la.identity(this.wa);this.yg(f,-1);a.uniformMatrix4fv(a.getUniformLocation(e,"matRotate"),!1,this.wa)};v.prototype.At=function(){var f=this.o;if(f.S){var e=f.S,a=this.op;e.useProgram(a);this.dk(0,a);e.uniform2f(e.getUniformLocation(a,"uCanvasDimensions"),f.D.width,f.D.height);var b=e.getUniformLocation(a,"srcOffset");e.uniform2f(b,.5,.5);1==f.A.format&&(b=e.getUniformLocation(a,"srcScale"),
f.Bd?(e.uniform2f(b,-.5/Math.PI,(f.A.flipY?-.5:.5)/Math.PI),b=e.getUniformLocation(a,"srcOffset"),f.Bg?e.uniform2f(b,.5,.75):e.uniform2f(b,.5,.25)):e.uniform2f(b,-.5/Math.PI,(f.A.flipY?-1:1)/Math.PI));14==f.A.format&&(b=e.getUniformLocation(a,"srcScale"),e.uniform2f(b,1-2*f.A.Ye/(f.A.width/3),1-2*f.A.Ye/(f.A.height/2)));this.Fm(a);b=e.getUniformLocation(a,"cubeTexture");e.uniform1i(b,0);b=e.getAttribLocation(a,"aVertexPosition");e.disableVertexAttribArray(0);e.disableVertexAttribArray(1);e.disableVertexAttribArray(2);
e.enableVertexAttribArray(b);e.bindBuffer(e.ARRAY_BUFFER,this.Lj);e.vertexAttribPointer(b,2,e.FLOAT,!1,0,0);e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,f.A.texture);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.td);e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,
0)}};v.prototype.Fm=function(f){var e=this.o,a=e.S,b=this.o.D,c=1;switch(e.fov.mode){case 0:c=b.width/b.height;break;case 1:c=1;break;case 2:c=b.width/Math.sqrt(b.width*b.width+b.height*b.height);break;case 3:4*b.height/3<b.width&&(c=4/3)}b=a.getUniformLocation(f,"rectDstDistance");this.Vl=Math.tan(Math.min(e.fov.m,179)/2*Math.PI/180)*c;a.uniform1f(b,this.Vl);b=a.getUniformLocation(f,"fisheyeDistance");this.Wk=180/(e.fov.m*Math.PI*c);a.uniform1f(b,this.Wk);b=a.getUniformLocation(f,"stereoDistance");
this.sm=Math.tan(Math.min(e.fov.m,359)/4*Math.PI/180)*c;a.uniform1f(b,this.sm);b=a.getUniformLocation(f,"directionBlend");a.uniform1f(b,e.ej())};v.prototype.zt=function(){var f=this.o,e=f.S,a=this.mp;e.useProgram(a);e.enable(e.STENCIL_TEST);e.stencilOp(e.KEEP,e.INCR,e.INCR);e.stencilFunc(e.EQUAL,0,255);this.dk(0,a);e.uniform2f(e.getUniformLocation(a,"uCanvasDimensions"),f.D.width,f.D.height);f=e.getUniformLocation(a,"srcScale");e.uniform2f(f,1,1);f=e.getUniformLocation(a,"srcOffset");e.uniform2f(f,
0,0);f=e.getUniformLocation(a,"zOffset");e.uniform1f(f,.9999);this.Fm(a);this.dk(0,a);f=e.getUniformLocation(a,"cubeTexture");e.uniform1i(f,0);a=e.getAttribLocation(a,"aVertexPosition");e.disableVertexAttribArray(0);e.disableVertexAttribArray(1);e.disableVertexAttribArray(2);e.enableVertexAttribArray(a);e.bindBuffer(e.ARRAY_BUFFER,this.Lj);e.vertexAttribPointer(a,2,e.FLOAT,!1,0,0);e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_CUBE_MAP,this.Oc);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_S,
e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.td);e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0);e.disable(e.STENCIL_TEST)};v.prototype.kr=function(){var f=this.o,e=f.S;e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE);for(var a=[1,3,5,4,0,2],b=!0,c=!0,m=!1,h=0;6>h;h++)this.ab[h].sf.complete?
this.Qi[h]||(m=!0):b=!1,this.ab[h].wf.complete||(c=!1);if(c||b)if(!c||b||!this.Oc||m){h=Math.round(f.Oe/f.Gg);c=(f.Oe-h)/2;f.G("paint cube single - isMain: "+b+" overlap: "+c);this.Qf=0;this.Oc||(this.Oc=e.createTexture());f.Sd++;e.bindTexture(e.TEXTURE_CUBE_MAP,this.Oc);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1);m=document.createElement("canvas");m.width=h;m.height=
h;var n=m.getContext("2d");for(h=0;6>h;h++){var q=a[h];this.ab[q].sf.complete?this.Qi[q]||(n.drawImage(this.ab[q].sf,-c,-c),e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,m),this.Qi[q]=!0):(n.drawImage(this.ab[q].wf,-c,-c,f.Oe,f.Oe),e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,m))}this.Ih=!b}};v.prototype.jr=function(){var f=this.o,e=this.L.M,a=e.levels,b=f.S,c;var m=a.length-1;if(!(0>m)){a[m].xf&&m--;var h=512;f.Hh&&(h=256);!f.tg&&2<=
f.devicePixelRatio&&(h=512);for((c=b.getParameter(b.MAX_CUBE_MAP_TEXTURE_SIZE))&&c<h&&(h=c);0<m&&a[m-1].width<=h;)m--;h=a[m];if(0!=h.Y){c=m;var n=this.dr(m);this.Ih&&n&&(this.Ih=!1);n||(m=a.length-1,h=a[m],n||(h.xf?(n=h.loaded,this.Fl(m-1)&&(--m,n=!0)):n=this.Fl(m)),this.Ih=!0);this.Fl(c);if(n&&this.Qf>m){h=a[m];f.G("paint cube level "+m);this.Qf=m;a=e.fb;m=0<a||1<h.Y||1<h.ra;n=c=void 0;m&&(n=document.createElement("canvas"),n.width=h.width,n.height=h.height,2048>h.width&&(1500<h.width?(n.width=2048,
n.height=2048):700<h.width?(n.width=1024,n.height=1024):(n.width=512,n.height=512)),c=n.getContext("2d"));this.Oc=b.createTexture();f.Sd++;b.bindTexture(b.TEXTURE_CUBE_MAP,this.Oc);b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,1);var q=[1,3,5,4,0,2];e=e.V;for(var r=0;6>r;r++){for(var t=0;t<h.ra;t++)for(var w=0;w<h.Y;w++){var z=w+t*h.Y+q[r]*h.Y*h.ra,C=h.Ka[z],E=C.M;C.Ac&&
(E=C.Ac);E?m?(z=n.width/h.width,c.drawImage(E,z*(w*e-a),z*(t*e-a),z*E.width,z*E.height)):b.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,E):(f.G("WTF?!"),f.G(z),f.G(C))}m&&b.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,n)}}}}};v.prototype.Fl=function(f){var e=this.o,a=this.L,b=a.M.levels[f];if(0==b.Y)return!1;var c=!0;b.cache=!0;for(var m=0;6>m;m++)for(var h=0;h<b.ra;h++)for(var n=0;n<b.Y;n++){var q=n+h*b.Y+m*b.Y*b.ra,r=b.Ka[q];r||(r=b.Ka[q]=
new y.Vg);this.Ui()?r.M||(r.He?r.He--:(this.vj(r,b,a.Fg(m,f,n,h)),e.qb=!0)):a.ee++;r.Lb||(c=!1,e.qb=!0)}c&&(b.loaded=!0);return c};v.prototype.dr=function(f){f=this.L.M.levels[f];if(0==f.Y)return!1;for(var e=0;6>e;e++)for(var a=0;a<f.ra;a++)for(var b=0;b<f.Y;b++){var c=f.Ka[b+a*f.Y+e*f.Y*f.ra];if(!c||!c.Lb)return!1}return f.loaded=!0};v.prototype.ready=function(){return null!=this.Oc};v.prototype.hp=function(){for(var f=0;6>f;f++)if(!this.ab[f].wf.complete)return!1;return!0};v.prototype.Xl=function(){for(var f=
this.o,e=this.L,a=e.M.levels,b=f.S,c=Date.now(),m=a.length-1;0<=m;m--){var h=a[m];if(!h.cache)for(var n in h.Ka)if(h.Ka.hasOwnProperty(n)){var q=h.Ka[n];0<q.qj&&q.qj--;q.visible||0<q.qj?(q.visible&&(q.Kh=c),q=this.qe.indexOf(q),-1!==q&&this.qe.splice(q,1)):-1===this.qe.indexOf(q)&&(q.level=h,this.qe.push(q))}}if(this.qe.length>1.1*e.$p)for(this.qe.sort(function(r,t){return t.Kh-r.Kh});this.qe.length>e.$p;)q=this.qe.pop(),q.Lb&&(b.deleteTexture(q.Lb),f.Sd--,q.Lb=0),q.M=null,q.dg&&(b.deleteBuffer(q.dg),
q.dg=0),n=q.level.Ka.indexOf(q),f.G("delete <"+n+"> "+(c-q.Kh)),delete q.level.Ka[n]};v.prototype.bv=function(){var f=this.o;if(f.S){var e=this.o.S,a;for(a=0;a<f.U.length;a++){var b=f.U[a];if(!b.nd){y.la.identity(this.wa);y.la.rotate(this.wa,-f.W.m*Math.PI/180,[0,0,1]);y.la.rotate(this.wa,-f.u.m*Math.PI/180,[1,0,0]);y.la.rotate(this.wa,(180-f.pan.m)*Math.PI/180,[0,1,0]);y.la.rotate(this.wa,b.pan*Math.PI/180,[0,1,0]);y.la.rotate(this.wa,-b.u*Math.PI/180,[1,0,0]);y.la.translate(this.wa,[0,0,1]);y.la.rotate(this.wa,
b.vb*Math.PI/180,[0,0,1]);y.la.rotate(this.wa,-b.Ma*Math.PI/180,[0,1,0]);y.la.rotate(this.wa,b.Ia*Math.PI/180,[1,0,0]);var c=Math.tan(b.fov/2*Math.PI/180),m=b.aspect;m||(m=16/9);y.la.scale(this.wa,[c,c/m,1]);y.la.translate(this.wa,[0,0,-1]);e.bindBuffer(e.ARRAY_BUFFER,this.Lk);e.vertexAttribPointer(this.N.ja,3,e.FLOAT,!1,0,0);e.bindBuffer(e.ARRAY_BUFFER,this.$e);e.vertexAttribPointer(this.N.Ja,2,e.FLOAT,!1,0,0);e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,b.texture);e.texParameteri(e.TEXTURE_2D,
e.TEXTURE_MAG_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.td);e.uniform1i(this.N.ug,0);e.uniformMatrix4fv(this.N.Vh,!1,this.wa);e.uniformMatrix4fv(this.N.Ee,!1,this.Bb);e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}}}};v.prototype.av=function(){var f=this.o,e;if(f.D.width!=f.da.offsetWidth||f.D.height!=
f.da.offsetHeight)f.D.width=f.da.offsetWidth,f.D.height=f.da.offsetHeight;f.te&&(f.Pc(0),f.Xb());if(f.S){var a=f.S;a.useProgram(this.N);y.la.identity(this.Bb);y.la.perspective(f.Kb(),f.zb.width/f.zb.height,.1,100,this.Bb);a.uniformMatrix4fv(this.N.Ee,!1,this.Bb);this.yg(0);a.uniform1i(this.N.ug,0);a.uniformMatrix4fv(this.N.Ee,!1,this.Bb);a.uniformMatrix4fv(this.N.Vh,!1,this.wa);a.enableVertexAttribArray(this.N.ja);a.enableVertexAttribArray(this.N.Ja);a.bindBuffer(a.ARRAY_BUFFER,this.$e);a.vertexAttribPointer(this.N.Ja,
2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.td);a.uniform1f(this.N.rk,1E-4);a.vertexAttribPointer(this.N.ja,3,a.FLOAT,!1,0,0);a.bindTexture(a.TEXTURE_2D,f.A.texture);for(e=0;1>e;e++)this.yg(0),a.bindBuffer(a.ARRAY_BUFFER,f.A.hk),a.vertexAttribPointer(this.N.ja,3,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,f.A.vi),a.vertexAttribPointer(this.N.Ja,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,f.A.lj),a.uniform1i(this.N.ug,
0),a.uniformMatrix4fv(this.N.Vh,!1,this.wa),a.uniformMatrix4fv(this.N.Ee,!1,this.Bb),a.drawElements(a.TRIANGLES,36,a.UNSIGNED_SHORT,0)}};v.prototype.$u=function(){var f=this.o,e=f.S,a=f.A;if(0<f.U.length)for(var b=0;b<f.U.length;b++){var c=f.U[b];if(!c.nd&&c.isRunning&&c.Bh!=c.j.currentTime&&(c.Bh=c.j.currentTime,!c.aspect&&0<c.j.videoHeight&&(c.aspect=c.j.videoWidth/c.j.videoHeight),f.Ci))try{c.texture&&(e.bindTexture(e.TEXTURE_2D,c.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGB,e.RGB,e.UNSIGNED_BYTE,
c.j),f.update())}catch(h){f.G(h)}}if(a.j&&(b=Number(a.j.currentTime),a.Bh!=b)){a.Bh=b;try{var m=0<a.j.readyState;f.pj&&a.Qc&&(m=m&&0<a.j.currentTime);a.texture&&a.jg&&m&&(a.Qc=!0,a.width=a.j.videoWidth,a.height=a.j.videoHeight,e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,f.A.flipY),e.bindTexture(e.TEXTURE_2D,a.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGB,e.RGB,e.UNSIGNED_BYTE,a.j),a.xm=!0,f.update())}catch(h){f.G(h)}}};v.prototype.cp=function(){var f,e,a=this.o,b=this.o.S;a.R.Al!=a.R.mode&&(a.R.Al=a.R.mode);
if((0<=a.R.mode||0<a.R.wc.length)&&!a.C.yi){var c=1;0>=a.R.mode&&(c=0);3==a.R.mode&&(c=a.R.Da);for(f=0;f<a.K.length;f++){var m=a.K[f];if("poly"==m.type){var h=m.rg,n=c;2==a.R.mode&&(n=m.Da);var q=a.R.wc.indexOf(m.id);-1!=q&&(n=a.R.Kc[q]);if(0<h.length){q=[];for(e=0;e<h.length;e++)q.push(h[e].Jc),q.push(h[e].uc),q.push(0);b.useProgram(this.Yd);b.enable(b.BLEND);b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.SRC_ALPHA,b.ONE);b.disable(b.DEPTH_TEST);this.Jm||(this.Jm=b.createBuffer());b.bindBuffer(b.ARRAY_BUFFER,
this.Jm);b.bufferData(b.ARRAY_BUFFER,new Float32Array(q),b.STATIC_DRAW);b.uniform2f(b.getUniformLocation(this.Yd,"uCanvasDimensions"),a.D.width,a.D.height);h=b.getUniformLocation(this.Yd,"uColor");e=m.cc;b.uniform3f(h,(e>>16&255)/255,(e>>8&255)/255,(e&255)/255);var r=b.getUniformLocation(this.Yd,"uAlpha");b.uniform1f(r,m.bc*n);b.vertexAttribPointer(this.Yd.ja,3,b.FLOAT,!1,0,0);b.drawArrays(b.LINE_LOOP,0,q.length/3);e=m.ac;b.uniform3f(h,(e>>16&255)/255,(e>>8&255)/255,(e&255)/255);b.uniform1f(r,m.$b*
n);b.enable(b.STENCIL_TEST);b.clearStencil(0);b.clear(b.STENCIL_BUFFER_BIT);b.colorMask(!1,!1,!1,!1);b.stencilFunc(b.ALWAYS,1,1);b.stencilOp(b.INCR,b.INCR,b.INCR);b.drawArrays(b.TRIANGLE_FAN,0,q.length/3);b.colorMask(!0,!0,!0,!0);b.stencilFunc(b.EQUAL,1,1);b.stencilOp(b.ZERO,b.ZERO,b.ZERO);b.drawArrays(b.TRIANGLE_FAN,0,q.length/3);b.disable(b.BLEND);b.enable(b.DEPTH_TEST);b.disable(b.STENCIL_TEST);b.useProgram(this.N)}}}}};v.prototype.Zu=function(){var f=this.o,e=this.L,a=e.M;if(f.D.width!=f.da.offsetWidth||
f.D.height!=f.da.offsetHeight)f.D.width=f.da.offsetWidth,f.D.height=f.da.offsetHeight;f.te&&(f.Pc(0),f.Xb());if(f.S){var b=f.S;this.ck();b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT|b.STENCIL_BUFFER_BIT);b.disable(b.DEPTH_TEST);b.disable(b.CULL_FACE);b.useProgram(this.th);var c=b.getUniformLocation(this.th,"uRect");b.uniform2f(b.getUniformLocation(this.th,"uCanvasDimensions"),f.D.width,f.D.height);b.activeTexture(b.TEXTURE0);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.td);var m=b.getAttribLocation(this.th,
"aVertexPosition");b.disableVertexAttribArray(0);b.disableVertexAttribArray(1);b.disableVertexAttribArray(2);b.enableVertexAttribArray(m);b.bindBuffer(b.ARRAY_BUFFER,this.$e);b.vertexAttribPointer(m,2,b.FLOAT,!1,0,0);e.ee=0;var h=100/f.fov.m;var n=a.width/a.height;m=f.D.height*h*n;h*=f.D.height;n=(f.pan.m/100/n-.5)*m+f.D.width/2;for(var q=(f.u.m/100-.5)*h+f.D.height/2,r,t,w,z=0;a.levels.length>=z+2&&a.levels[z+1].width>m;)z++;var C;var E=[];for(C=a.levels.length-1;C>=z;){var D=a.levels[C];if(D.cache){var F=
{fx:0,fy:0};F.Ed=D.Y-1;F.Fd=D.ra-1}else{F={};r=-q/h*(D.height/a.V);t=(-n+f.D.width)/m*(D.width/a.V);var A=(-q+f.D.height)/h*(D.height/a.V);F.fx=Math.min(Math.max(0,Math.floor(-n/m*(D.width/a.V))),D.Y-1);F.fy=Math.min(Math.max(0,Math.floor(r)),D.ra-1);F.Ed=Math.min(Math.max(0,Math.floor(t)),D.Y-1);F.Fd=Math.min(Math.max(0,Math.floor(A)),D.ra-1)}E[C]=F;var G=!0;for(t=F.fy;t<=F.Fd;t++)for(r=F.fx;r<=F.Ed;r++)w=r+t*D.Y,A=D.Ka[w],A||(A=new y.Vg,D.Ka[w]=A),this.Ui()?A.M||(this.vj(A,D,e.Fg(0,C,r,t)),f.qb=
!0):e.ee++,A.M&&A.M.complete||(G=!1),A.visible=!0;F.Mo=G;C--}for(C=a.levels.length-1;C>=z;){D=a.levels[C];if(E[C]&&0<=E[C].fx)for(F=E[C],t=F.fy;t<=F.Fd;t++)for(r=F.fx;r<=F.Ed;r++)w=r+t*D.Y,(A=D.Ka[w])&&A.M&&A.M.complete&&(f=n+(-a.fb+a.V*r)*m/D.width,b.uniform4f(c,f,q+(-a.fb+a.V*t)*h/D.height,A.M.width*m/D.width,A.M.height*h/D.height),A&&A.Lb&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.td),b.bindTexture(b.TEXTURE_2D,A.Lb),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0)));C--}this.Xl()}};v.prototype.yf=function(){var f=this.o.S;if(f&&this.ab)for(;0<this.ab.length;){var e=this.ab.pop();e.nt=!0;f.deleteTexture(e)}this.Oc&&(f.deleteTexture(this.Oc),this.Oc=null);this.Qf=1E6;this.Qi=[!1,!1,!1,!1,!1,!1]};return v}();y.Fq=x})(ggP2VR||(ggP2VR={}));
(function(y){var x=function(){return function(){this.$h={vh:1,wh:1,Qh:0,Rh:0,Di:0,lk:0,scale:1};this.jc=!0;this.Lf=[]}}();y.Bq=function(){return function(){var v;this.Xf=Array(6);for(v=0;6>v;v++)this.Xf[v]=new x}}()})(ggP2VR||(ggP2VR={}));
(function(y){y.zq=function(){return function(){this.levels=[];this.Hj="0x000000";this.ip=!1;this.Oo=this.No=.4;this.V=512;this.fb=1;this.Dl=0;this.El="";this.qp=this.height=this.width=0}}();y.Sm=function(){return function(){this.height=this.width=0;this.xf=this.cache=!1;this.ra=this.Y=0;this.loaded=!1;this.Ka=[]}}();y.Vg=function(){return function(){this.loaded=this.visible=!1;this.He=this.Wl=0;this.eg=[];this.ll=0;this.kb=[];this.qj=this.Kh=this.Na=0}}()})(ggP2VR||(ggP2VR={}));
(function(y){var x=function(){function v(f,e){this.o=f;this.O=e;var a=this.__div=document.createElement("div");a.ggVisible=!0;var b=document.createElement("img");if(e.fd){var c=e.fd;b.setAttribute("style","position: absolute; width: "+e.af+"px; height: "+e.ud+"px; top: -"+e.ud/2+"px; left: -"+e.af/2+"px; cursor: pointer; "+f.yb+"user-select: none; max-width: none;")}else c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA5xJREFUeNqclmlIVFEUx997TjrplFQW2WKBBSYtRFlpWUILSSsRZRQIBdGHCFqIoKIvQRsUFRJC9LEgaSFbMMpcWi1pLzOLsjItKms0U5t5/c/wH7nc5o2jF374xrv87z33nHOPaRsRtbFgDpgJxoD+wATfwDNQDK6CyrCr5OcbhgiGIRsUAZt4QTWoIFXgp9JfAhY7rgdBl8NeBoLDYBloA+dBOagFTcDHcVEgDgwBGWA+OAcugvXgvb5wKMGJoAAMp9BpUA96EBf/Btsf8BI8AWfAErAcpHHDZeriliY2AVwDg8AucAQ0Ag+I4XhTm2Oxz8PT46KMbTx5EZjuJDgAnAVusJUm9DhYwalFcc59sIXXIaceFkowDySBPTRPL20xm+b7zYXa+N3CPrWJ6GuwGySA40HLBHc/GywFhbS5R1lEBrZy7FQwiSaX9pmnqeAYt+KUcew7BVZw/QKTq0ocpYPVvDOXItZCk2xgDIZqL8BR8Ab0VDbr4yZOgLeIwzQx6WiQxcCt1+6sld66L4yYtFSwF4yg2dU7/cEwGW9YVkAwmycp1dzdpvgm0DcCh4kHmxWzBls0uBX4qqmZJ4KzePm1IeJLgjmlC16aDKZpp5Q168B3o6wsSwTHgU+MIUs74RSj6y1d+212HKimJlUE+tFRfJpYtOKNXWmJTASqWf2Bu/R6+4TKHOrOzG4IhptjWgHbGkZvepQ6SQK7oRuCXzjX1DJavBEX1ygfT8FgBqpfm1zRDcEKbR2bsZlkJCdXieB1ZhZ5YtqVgXIPN+m9kbY6hpdb+d9fPncJRmZmqQheZkemJmgxyxykl3XWJEkcAl7N21s7PDcl5ZJ0PAa3wVwmWtVbZafPwQ7wLozYB7ATPNJO56d/LAikP9u+66KNJS1d4IOZp7wU0hfLukUyzgwm70T2N/DOxIy/eFdqawa5DL2NEGwP5k15Ja4woz9glvcomd9NzyvkFcQo5gomaLfm5c0svnKZ2k7q7+FauvR2MJKZR3+sY5WgtvkdG6JyELGhNHMTXyGfLviRJ5Tcd4Dlhle7086Sgp8CqVxDkn4OqHaqacr5ekjy3Q/W0FRNNGmoMtamdzdxsytZC0lqXKhEgWPVVgImg2NgFT1MHOoOk3yLEtgWN5TEOYvoIFI1rGM19//2wpAD7imF7lfwENwAxaASNCj90pcLLKdC2Iyw1M9gnEplMEp5kOU1f8WwKGJm8oUr9f8JMAAVMDM6HSDa9QAAAABJRU5ErkJggg%3D%3D",
b.setAttribute("style","position: absolute; width: 28px; height: 28px; top: -14px; left: -14px; cursor: pointer; "+f.yb+"user-select: none; max-width: none;");b.setAttribute("src",c);b.ondragstart=function(){return!1};a.appendChild(b);c="position:absolute;"+(f.yb+"user-select: none;");c+=f.yb+"touch-callout: none;";c+=f.yb+"tap-highlight-color: rgba(0,0,0,0);";f.Gc&&!f.na&&(c+=f.yb+"transform: translateZ(9999999px);");a.setAttribute("style",c);a.onclick=function(){f.Ke(e);f.Kl(f.Sa(e.url),e.target);
f.fa&&f.fa.hotspotProxyClick&&f.fa.hotspotProxyClick(e.id,e.url);f.I("hsproxyclick",{id:e.id,url:e.url})};a.ondblclick=function(){f.fa&&f.fa.hotspotProxyDoubleClick&&f.fa.hotspotProxyDoubleClick(e.id,e.url);f.I("hsproxydblclick",{id:e.id,url:e.url})};var m=f.R.Zj;if(m.enabled&&""!=e.title){var h=document.createElement("div");c="position:absolute;";c=e.fd?f.dl()?c+("top: -"+(e.ud/2+20)+"px;"):c+("top: "+e.ud/2+"px;"):f.dl()?c+"top:\t -50px;":c+"top:\t 20px;";c=m.mk?c+"white-space: pre-wrap;":c+"white-space: nowrap;";
c+=f.yb+"transform-origin: 50% 50%;";h.setAttribute("style",c+"visibility: hidden;overflow: hidden;padding: 0px 1px 0px 1px;");h.style.color=this.o.Ab(m.$j,m.Yj);h.style.backgroundColor=m.background?this.o.Ab(m.ac,m.$b):"transparent";h.style.border="solid "+this.o.Ab(m.cc,m.bc)+" "+m.Ki+"px";h.style.borderRadius=m.wk+"px";h.style.textAlign="center";0<m.width?(h.style.left=-m.width/2+"px",h.style.width=m.width+"px"):h.style.width="auto";h.style.height=0<m.height?m.height+"px":"auto";h.style.overflow=
"hidden";h.innerHTML=f.Sa(e.title);h.classList.add("ggskin");h.classList.add("ggdefaulthotspot");a.addEventListener("mouseover",function(){0==m.width&&(h.style.left=-h.offsetWidth/2+"px");h.style.visibility="inherit";f.fa&&f.fa.hotspotProxyOver&&f.fa.hotspotProxyOver(e.id,e.url);f.I("hsproxyover",{id:e.id,url:e.url})});a.addEventListener("mouseout",function(){h.style.visibility="hidden";f.fa&&f.fa.hotspotProxyOut&&f.fa.hotspotProxyOut(e.id,e.url);f.I("hsproxyout",{id:e.id,url:e.url})});a.appendChild(h);
this.cq=h}a.addEventListener("mouseover",function(){f.Ke(e)});a.addEventListener("mouseout",function(){f.Ke(null)})}v.prototype.Es=function(){this.cq&&(this.cq.innerHTML=this.o.Sa(this.O.title))};return v}();y.vq=x})(ggP2VR||(ggP2VR={}));
(function(y){y.dd=function(){return function(){this.value=this.time=0;this.Im="";this.Xe=this.We=this.Ve=this.Ue=this.ob=this.type=this.Eb=0;this.qd="";this.Vm=0}}();y.Pm=function(){return function(){this.Uu=this.Oq=this.length=0}}();y.Om=function(){return function(){}}()})(ggP2VR||(ggP2VR={}));
(function(y){var x=function(){function v(f){this.o=f;this.enabled=!1;this.$g=1;this.Kf=0;this.type="crossdissolve";this.cd=this.ca=this.Wc=0;this.qk=20;this.nk=90;this.pk=20;this.Ug=1;this.Tg=!1;this.vm=this.um=this.Wp=0;this.ui=70;this.uq=0;this.Fb=this.tq=1;this.Sg=this.Rg=.5;this.ke=this.le=!1;this.Nk=1}v.prototype.Eh=function(){var f=this.o.S,e=f.createShader(f.VERTEX_SHADER);f.shaderSource(e,"attribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nvarying vec2 vTextureCoord;\nuniform bool uZoomIn;\nuniform float uZoomFactor;\nuniform vec2 uZoomCenter;\nvoid main(void) {\n\t gl_Position = vec4(aVertexPosition, 1.0);\n\t if(!uZoomIn) {\n\t \n\t   vTextureCoord = aTextureCoord;\n\t }\n\t else {\n\t   vTextureCoord = (aTextureCoord - vec2(0.5, 0.5)) * (1.0/uZoomFactor) + uZoomCenter;\n\t }\n}\n");
f.compileShader(e);f.getShaderParameter(e,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(e)),e=null);var a=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uAlpha;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uAlpha);\n}\n");
f.compileShader(a);f.getShaderParameter(a,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(a)),a=null);this.xa=f.createProgram();f.attachShader(this.xa,e);f.attachShader(this.xa,a);f.linkProgram(this.xa);f.getProgramParameter(this.xa,f.LINK_STATUS)||alert("Could not initialise shaders");this.xa.ja=f.getAttribLocation(this.xa,"aVertexPosition");f.enableVertexAttribArray(this.xa.ja);this.xa.Ja=f.getAttribLocation(this.xa,"aTextureCoord");f.enableVertexAttribArray(this.xa.Ja);a=f.createShader(f.FRAGMENT_SHADER);
f.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uColorPercent;\nuniform float uAlpha;\nuniform vec3 uDipColor;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x * (1.0 - uColorPercent) + uDipColor.x * uColorPercent, textureColor.y * (1.0 - uColorPercent) + uDipColor.y * uColorPercent, textureColor.z * (1.0 - uColorPercent) + uDipColor.z * uColorPercent, uAlpha);\n}\n");
f.compileShader(a);f.getShaderParameter(a,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(a)),a=null);this.gb=f.createProgram();f.attachShader(this.gb,e);f.attachShader(this.gb,a);f.linkProgram(this.gb);f.getProgramParameter(this.gb,f.LINK_STATUS)||alert("Could not initialise shaders");this.gb.ja=f.getAttribLocation(this.gb,"aVertexPosition");f.enableVertexAttribArray(this.gb.ja);this.gb.Ja=f.getAttribLocation(this.gb,"aTextureCoord");f.enableVertexAttribArray(this.gb.Ja);a=f.createShader(f.FRAGMENT_SHADER);
f.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform bool uRound;\nuniform float uRadius;\nuniform vec2 uRectDim;\nuniform vec2 uIrisCenter;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n float alpha = 0.0;\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n if (uRound) {\n\t  vec2 diff = uIrisCenter - gl_FragCoord.xy;\n\t   float distFromCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n\t   if (distFromCenter > uRadius) {\n      alpha = 1.0;\n    } else {\n      alpha = 1.0 - ((uRadius - distFromCenter) / uSoftEdge);\n    };\n }\n else {\n    float alphaFromLeft = 1.0 - ((gl_FragCoord.x -(uIrisCenter.x - uRectDim.x)) / uSoftEdge);\n    float alphaFromRight = 1.0 - (((uIrisCenter.x + uRectDim.x) - gl_FragCoord.x) / uSoftEdge);\n    float alphaFromTop = 1.0 - ((gl_FragCoord.y -(uIrisCenter.y - uRectDim.y)) / uSoftEdge);\n    float alphaFromBottom = 1.0 - (((uIrisCenter.y + uRectDim.y) - gl_FragCoord.y) / uSoftEdge);\n    alpha = max(max(alphaFromLeft, alphaFromRight), max(alphaFromTop, alphaFromBottom));\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
f.compileShader(a);f.getShaderParameter(a,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(a)),a=null);this.Qa=f.createProgram();f.attachShader(this.Qa,e);f.attachShader(this.Qa,a);f.linkProgram(this.Qa);f.getProgramParameter(this.Qa,f.LINK_STATUS)||alert("Could not initialise shaders");this.Qa.ja=f.getAttribLocation(this.Qa,"aVertexPosition");f.enableVertexAttribArray(this.Qa.ja);this.Qa.Ja=f.getAttribLocation(this.Qa,"aTextureCoord");f.enableVertexAttribArray(this.Qa.Ja);a=f.createShader(f.FRAGMENT_SHADER);
f.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uPercent;\nuniform int uDirection;\nuniform vec2 uCanvasDimensions;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n float alpha = 0.0;\n if (uDirection == 1) {\n\t if (gl_FragCoord.x > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.x) / uSoftEdge);\n  }\n }\n if (uDirection == 2) {\n\t if (gl_FragCoord.x < uCanvasDimensions.x - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.x - (uCanvasDimensions.x - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 3) {\n\t if (gl_FragCoord.y < uCanvasDimensions.y - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.y - (uCanvasDimensions.y - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 4) {\n\t if (gl_FragCoord.y > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.y) / uSoftEdge);\n  }\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
f.compileShader(a);f.getShaderParameter(a,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(a)),a=null);this.Ya=f.createProgram();f.attachShader(this.Ya,e);f.attachShader(this.Ya,a);f.linkProgram(this.Ya);f.getProgramParameter(this.Ya,f.LINK_STATUS)||alert("Could not initialise shaders");this.Ya.ja=f.getAttribLocation(this.Ya,"aVertexPosition");f.enableVertexAttribArray(this.Ya.ja);this.Ya.Ja=f.getAttribLocation(this.Ya,"aTextureCoord");f.enableVertexAttribArray(this.Ya.Ja)};v.prototype.Pc=function(){var f=
this.o.S;if(!f)return!1;if(this.xc=f.createFramebuffer()){f.bindFramebuffer(f.FRAMEBUFFER,this.xc);this.xc.width=1024;this.xc.height=1024;this.Df=f.createTexture();f.bindTexture(f.TEXTURE_2D,this.Df);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,this.xc.width,this.xc.height,0,f.RGBA,f.UNSIGNED_BYTE,null);var e=f.createRenderbuffer();f.bindRenderbuffer(f.RENDERBUFFER,e);f.renderbufferStorage(f.RENDERBUFFER,
f.DEPTH_COMPONENT16,this.xc.width,this.xc.height);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,this.Df,0);f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,e);f.bindTexture(f.TEXTURE_2D,null);f.bindRenderbuffer(f.RENDERBUFFER,null);f.bindFramebuffer(f.FRAMEBUFFER,null);this.tb=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,this.tb);f.bufferData(f.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]),f.STATIC_DRAW);this.tb.itemSize=3;this.tb.numberOfItems=
4;this.sg=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,this.sg);f.bufferData(f.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),f.STATIC_DRAW);return!0}return!1};v.prototype.Ml=function(f){var e=this.o.S,a=this.o.zb;if(this.Id){e.useProgram(this.xa);e.bindBuffer(e.ARRAY_BUFFER,this.tb);e.vertexAttribPointer(this.xa.ja,this.tb.itemSize,e.FLOAT,!1,0,0);e.bindBuffer(e.ARRAY_BUFFER,this.sg);e.vertexAttribPointer(this.xa.Ja,2,e.FLOAT,!1,0,0);e.enableVertexAttribArray(this.xa.ja);e.enableVertexAttribArray(this.xa.Ja);
e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,this.Df);a=1+(this.Fb-1)*f;var b=e.getUniformLocation(this.xa,"uAlpha");e.uniform1f(b,1);b=e.getUniformLocation(this.xa,"uZoomIn");e.uniform1i(b,1);b=e.getUniformLocation(this.xa,"uZoomCenter");var c=.5+(this.Rg-.5)*Math.sqrt(f),m=.5+(this.Sg-.5)*Math.sqrt(f);0>c-.5/a&&(c=.5/a);0>m-.5/a&&(m=.5/a);1<c+.5/a&&(c=1-.5/a);1<m+.5/a&&(m=1-.5/a);e.uniform2f(b,c,m);c=e.getUniformLocation(this.xa,"uZoomFactor");e.uniform1f(c,a);e.uniform1i(e.getUniformLocation(this.xa,
"uSampler"),0);e.drawArrays(e.TRIANGLE_STRIP,0,this.tb.numberOfItems);e.useProgram(this.o.qa.N)}else{this.o.Ai();e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.SRC_ALPHA,e.ONE);e.enable(e.BLEND);e.disable(e.DEPTH_TEST);c=.5+(this.Rg-.5);m=.5+(this.Sg-.5);0>c-.5/this.Fb&&(c=.5/this.Fb);0>m-.5/this.Fb&&(m=.5/this.Fb);1<c+.5/this.Fb&&(c=1-.5/this.Fb);1<m+.5/this.Fb&&(m=1-.5/this.Fb);if("crossdissolve"==this.type)e.useProgram(this.xa),e.bindBuffer(e.ARRAY_BUFFER,this.tb),e.vertexAttribPointer(this.xa.ja,
this.tb.itemSize,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.sg),e.vertexAttribPointer(this.xa.Ja,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.Df),b=e.getUniformLocation(this.xa,"uAlpha"),e.uniform1f(b,1-f),b=e.getUniformLocation(this.xa,"uZoomIn"),e.uniform1i(b,1==this.ca||2==this.ca||6==this.ca||7==this.ca?1:0),b=e.getUniformLocation(this.xa,"uZoomCenter"),e.uniform2f(b,c,m),c=e.getUniformLocation(this.xa,"uZoomFactor"),e.uniform1f(c,this.Fb),e.uniform1i(e.getUniformLocation(this.xa,
"uSampler"),0);else if("diptocolor"==this.type)e.useProgram(this.gb),e.bindBuffer(e.ARRAY_BUFFER,this.tb),e.vertexAttribPointer(this.gb.ja,this.tb.itemSize,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.sg),e.vertexAttribPointer(this.gb.Ja,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.Df),e.uniform1f(e.getUniformLocation(this.gb,"uColorPercent"),Math.min(2*f,1)),b=e.getUniformLocation(this.gb,"uAlpha"),e.uniform1f(b,1-Math.max(2*(f-.5),0)),e.uniform3f(e.getUniformLocation(this.gb,
"uDipColor"),(this.Kf>>16&255)/255,(this.Kf>>8&255)/255,(this.Kf&255)/255),b=e.getUniformLocation(this.gb,"uZoomIn"),e.uniform1i(b,1==this.ca||2==this.ca||6==this.ca||7==this.ca?1:0),b=e.getUniformLocation(this.gb,"uZoomCenter"),e.uniform2f(b,c,m),c=e.getUniformLocation(this.gb,"uZoomFactor"),e.uniform1f(c,this.Fb),e.uniform1i(e.getUniformLocation(this.gb,"uSampler"),0);else if("irisround"==this.type||"irisroundcenter"==this.type||"irisrectangular"==this.type||"irisrectangularcenter"==this.type){e.useProgram(this.Qa);
e.bindBuffer(e.ARRAY_BUFFER,this.tb);e.vertexAttribPointer(this.Qa.ja,this.tb.itemSize,e.FLOAT,!1,0,0);e.bindBuffer(e.ARRAY_BUFFER,this.sg);e.vertexAttribPointer(this.Qa.Ja,2,e.FLOAT,!1,0,0);e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,this.Df);if(1==this.ca||2==this.ca||6==this.ca||7==this.ca||"irisroundcenter"==this.type||"irisrectangularcenter"==this.type)var h=b=.5;else b=this.Rg,h=this.Sg;var n=b*a.width,q=h*a.height;n=Math.max(n,a.width-n);q=Math.max(q,a.height-q);"irisround"==this.type||
"irisroundcenter"==this.type?e.uniform1f(e.getUniformLocation(this.Qa,"uRadius"),(Math.sqrt(n*n+q*q)+this.Wc)*f):(n>q?(q=a.height/a.width*n+this.Wc,n+=this.Wc):(n=a.width/a.height*q+this.Wc,q+=this.Wc),e.uniform2f(e.getUniformLocation(this.Qa,"uRectDim"),n*f,q*f));f=e.getUniformLocation(this.Qa,"uSoftEdge");e.uniform1f(f,this.Wc);e.uniform1i(e.getUniformLocation(this.Qa,"uRound"),"irisround"==this.type||"irisroundcenter"==this.type?1:0);e.uniform2f(e.getUniformLocation(this.Qa,"uIrisCenter"),b*a.width,
h*a.height);b=e.getUniformLocation(this.Qa,"uZoomIn");e.uniform1i(b,1==this.ca||2==this.ca||6==this.ca||7==this.ca?1:0);b=e.getUniformLocation(this.Qa,"uZoomCenter");e.uniform2f(b,c,m);c=e.getUniformLocation(this.Qa,"uZoomFactor");e.uniform1f(c,this.Fb);e.uniform1i(e.getUniformLocation(this.Qa,"uSampler"),0)}else if("wipeleftright"==this.type||"wiperightleft"==this.type||"wipetopbottom"==this.type||"wipebottomtop"==this.type||"wiperandom"==this.type)e.useProgram(this.Ya),e.bindBuffer(e.ARRAY_BUFFER,
this.tb),e.vertexAttribPointer(this.Ya.ja,this.tb.itemSize,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.sg),e.vertexAttribPointer(this.Ya.Ja,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.Df),e.uniform1f(e.getUniformLocation(this.Ya,"uPercent"),3>this.Nk?f*(a.width+this.Wc):f*(a.height+this.Wc)),f=e.getUniformLocation(this.Ya,"uSoftEdge"),e.uniform1f(f,this.Wc),e.uniform1i(e.getUniformLocation(this.Ya,"uDirection"),this.Nk),e.uniform2f(e.getUniformLocation(this.Ya,
"uCanvasDimensions"),a.width,a.height),b=e.getUniformLocation(this.Ya,"uZoomIn"),e.uniform1i(b,1==this.ca||2==this.ca||6==this.ca||7==this.ca?1:0),b=e.getUniformLocation(this.Ya,"uZoomCenter"),e.uniform2f(b,c,m),c=e.getUniformLocation(this.Ya,"uZoomFactor"),e.uniform1f(c,this.Fb),e.uniform1i(e.getUniformLocation(this.Ya,"uSampler"),0);e.drawArrays(e.TRIANGLE_STRIP,0,this.tb.numberOfItems);e.useProgram(this.o.qa.N);e.disable(e.BLEND);e.enable(e.DEPTH_TEST)}};return v}();y.xq=x})(ggP2VR||(ggP2VR={}));
(function(y){var x=function(){function v(f){this.zi=[];this.o=f;this.enabled=!1;this.Eb=2;this.tn=!1}v.prototype.En=function(f){if(2==f.mode||3==f.mode||5==f.mode){var e=this.o.ga.currentTime;if(f.rb&&f.rb.gain&&f.Jb&&f.Hb&&f.Ib){var a=f.Jb.gain.value,b=f.Hb.gain.value,c=f.Ib.gain.value;f.rb.gain.linearRampToValueAtTime(f.rb.gain.value,e);f.rb.gain.linearRampToValueAtTime(0,e+this.Eb);f.Jb.gain.linearRampToValueAtTime(a,e);f.Jb.gain.linearRampToValueAtTime(0,e+this.Eb);f.Hb.gain.linearRampToValueAtTime(b,
e);f.Hb.gain.linearRampToValueAtTime(0,e+this.Eb);f.Ib.gain.linearRampToValueAtTime(c,e);f.Ib.gain.linearRampToValueAtTime(0,e+this.Eb)}}else e=this.o.ga.currentTime,f.Gb&&f.Gb.gain&&(f.Gb.gain.linearRampToValueAtTime(f.Gb.gain.value,e),f.Gb.gain.linearRampToValueAtTime(0,e+this.Eb));f.Vk=!0;setTimeout(function(){f.Ie()},1E3*this.Eb+5)};v.prototype.Iu=function(){for(var f=0;f<this.o.X.length;f++){var e=this.o.X[f];!e.stopped&&!this.o.isPlaying(e.id)&&-1<e.loop&&4!=e.mode&&6!=e.mode&&(e.ua?e.oe():
(e.Ld&&e.If(),e.j.play(),e.j.currentTime=0))}};v.prototype.sr=function(){var f=(this.o.ga.currentTime-this.Eu)/this.Eb;f=Math.min(1,f);for(var e=0;e<this.o.X.length;e++){var a=this.o.X[e];this.o.isPlaying(a.id)&&1>a.ta&&(a.ta=f)}1==f&&clearInterval(this.Du)};return v}();y.yq=x})(ggP2VR||(ggP2VR={}));
(function(y){var x=function(){function v(f){this.Oh=[];this.tc=[];this.ec=[];this.vc=[];this.lm=!0;this.o=f;this.hr()}v.prototype.Eh=function(){var f=this.o.S,e=f.createShader(f.VERTEX_SHADER);f.shaderSource(e,"attribute vec3 aVertexPosition;\nvoid main(void) {\n gl_Position = vec4(aVertexPosition, 1.0);\n}\n");f.compileShader(e);f.getShaderParameter(e,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(e)),e=null);var a=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCanvasDimensions;\nuniform vec2 uFlareCenterPosition;\nuniform float uBlindingValue;\nuniform float uAspectRatio;\nvoid main(void) {\n float canvasDiag = sqrt( (uCanvasDimensions.x * uCanvasDimensions.x) + (uCanvasDimensions.y * uCanvasDimensions.y) );\n vec2 diff = uFlareCenterPosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromFlarePoint = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = (distFromFlarePoint / canvasDiag) / 10.0;\n gl_FragColor = vec4(1.0, 1.0, 1.0, pow(((1.0 - factor) * 0.8) * uBlindingValue, 2.0));\n}\n");
f.compileShader(a);f.getShaderParameter(a,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(a)),a=null);this.zc=f.createProgram();f.attachShader(this.zc,e);f.attachShader(this.zc,a);f.linkProgram(this.zc);f.getProgramParameter(this.zc,f.LINK_STATUS)||alert("Could not initialise shaders");this.zc.ja=f.getAttribLocation(this.zc,"aVertexPosition");f.enableVertexAttribArray(this.zc.ja);a=f.createShader(f.VERTEX_SHADER);e=f.createShader(f.VERTEX_SHADER);f.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
f.compileShader(a);f.getShaderParameter(a,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(a)),a=null);f.shaderSource(e,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
f.compileShader(e);f.getShaderParameter(e,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(e)),a=null);var b=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(b,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCircleTexturePosition;\nuniform vec3 uCircleColor;\nuniform float uCircleRadius;\nuniform float uCircleAlpha;\nuniform float uCircleSoftness;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 diff = uCircleTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromCircleCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float softnessDistance = uCircleRadius * (1.0 - uCircleSoftness);\n if (distFromCircleCenter > uCircleRadius)\n {\n\t  gl_FragColor = vec4(uCircleColor, 0.0);\n }\n else if (distFromCircleCenter <= (softnessDistance))\n {\n\t  float factor = distFromCircleCenter / softnessDistance;\n\t  gl_FragColor = vec4(uCircleColor, pow((1.0 - (0.2 * factor)) * uCircleAlpha, 1.8));\n }\n else\n {\n\t  float factor = (distFromCircleCenter - softnessDistance) / (uCircleRadius - softnessDistance);\n\t  gl_FragColor = vec4(uCircleColor, pow((0.8 - (0.8 * factor)) * uCircleAlpha, 1.8));\n }\n}\n");
f.compileShader(b);f.getShaderParameter(b,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(b)),b=null);this.ya=f.createProgram();f.attachShader(this.ya,a);f.attachShader(this.ya,b);f.linkProgram(this.ya);f.getProgramParameter(this.ya,f.LINK_STATUS)||alert("Could not initialise shaders");this.ya.ja=f.getAttribLocation(this.ya,"aVertexPosition");f.enableVertexAttribArray(this.ya.ja);a=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uRingTexturePosition;\nuniform float uRingRadius;\nuniform float uRingAlpha;\nuniform float uAspectRatio;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec2 diff = uRingTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromRingCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = distFromRingCenter / uRingRadius;\n if (distFromRingCenter > uRingRadius)\n {\n\t gl_FragColor = vec4(1.0, 1.0, 1.0, 0.0);\n }\n else\n {\n vec4 textureColor = texture2D(uSampler, vec2(factor / uAspectRatio, 0.5));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uRingAlpha);\n }\n}\n");
f.compileShader(a);f.getShaderParameter(a,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(a)),a=null);this.Db=f.createProgram();f.attachShader(this.Db,e);f.attachShader(this.Db,a);f.linkProgram(this.Db);f.getProgramParameter(this.Db,f.LINK_STATUS)||alert("Could not initialise shaders");this.Db.ja=f.getAttribLocation(this.Db,"aVertexPosition")};v.prototype.Pc=function(){var f=this.o.S;this.Qd=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,this.Qd);f.bufferData(f.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,
-1,0,1,1,0,-1,1,0]),f.STATIC_DRAW);this.Qd.itemSize=3;this.Qd.numberOfItems=4;this.Zf=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,this.Zf);for(var e=[0,0,0],a=2*Math.PI/6,b=Math.PI/180*35,c=1,m=b;m<=b+2*Math.PI;m+=a)e.push(Math.sin(m)),e.push(-Math.cos(m)),e.push(0),c++;f.bufferData(f.ARRAY_BUFFER,new Float32Array(e),f.STATIC_DRAW);this.Zf.itemSize=3;this.Zf.numberOfItems=c;this.tp=f.createTexture();f.bindTexture(f.TEXTURE_2D,this.tp);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR);f.texParameteri(f.TEXTURE_2D,
f.TEXTURE_MAG_FILTER,f.LINEAR);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);e=document.createElement("canvas");e.width=100;e.height=1;a=e.getContext("2d");a.width=100;a.height=1;b=a.createLinearGradient(0,0,100,0);b.addColorStop(0,this.o.Ab(0,0));b.addColorStop(.88,this.o.Ab(0,0));b.addColorStop(.9,this.o.Ab(16654848,1));b.addColorStop(.92,this.o.Ab(16776448,1));b.addColorStop(.94,this.o.Ab(4849466,1));b.addColorStop(.96,
this.o.Ab(131071,1));b.addColorStop(.98,this.o.Ab(8190,1));b.addColorStop(1,this.o.Ab(0,0));a.fillStyle=b;a.fillRect(0,0,100,1);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,e)};v.prototype.Mt=function(){for(;0<this.Oh.length;)this.Oh.pop()};v.prototype.hr=function(){var f=[],e=[],a=[];var b={radius:14,alpha:.2,color:11390415,B:.27};f.push(b);b={radius:20,alpha:.25,color:11390415,B:.4};f.push(b);b={radius:10,alpha:.2,color:12442332,B:.6};f.push(b);b={radius:15,alpha:.2,color:11390415,
B:.8};f.push(b);b={radius:10,alpha:.2,color:12442332,B:1.5};f.push(b);b={radius:15,alpha:.2,color:11390415,B:1.8};f.push(b);b={radius:8,alpha:.2,color:12575203,H:.8,B:.7};e.push(b);b={radius:7,alpha:.4,color:12575203,H:.5,B:1.6};e.push(b);b={radius:5,alpha:.4,color:12575203,H:.6,B:.9};e.push(b);b={radius:8,alpha:.3,color:12575203,H:.4,B:1.1};e.push(b);this.tc.push(f);this.ec.push(e);this.vc.push(a);f=[];e=[];a=[];b={radius:30,alpha:.3,color:11390415,B:.5};f.push(b);b={radius:10,alpha:.3,color:11390415,
B:1};f.push(b);b={radius:20,alpha:.3,color:11390415,B:1.3};f.push(b);b={radius:10,alpha:.3,color:11390415,B:1.5};f.push(b);b={radius:15,alpha:.3,color:11390415,B:1.8};f.push(b);b={radius:10,alpha:.3,color:15506856,H:.8,B:.7};e.push(b);b={radius:20,alpha:.5,color:15506856,H:.5,B:1.6};e.push(b);b={radius:5,alpha:.5,color:15506856,H:.6,B:.9};e.push(b);b={radius:60,alpha:.4,color:15506856,H:.2,B:1.1};e.push(b);a.push({radius:220,alpha:.035,B:2});this.tc.push(f);this.ec.push(e);this.vc.push(a);f=[];e=
[];a=[];b={radius:30,alpha:.5,color:15465727,B:.5};f.push(b);b={radius:40,alpha:.28,color:15726842,B:.8};f.push(b);b={radius:25,alpha:.32,color:15726842,B:1.1};f.push(b);b={radius:15,alpha:.25,color:15726842,B:1.35};f.push(b);b={radius:10,alpha:.28,color:15465727,B:1.65};f.push(b);b={radius:10,alpha:.45,color:15465727,H:.8,B:.7};e.push(b);b={radius:7,alpha:.5,color:15465727,H:.4,B:.9};e.push(b);b={radius:40,alpha:.4,color:15465727,H:.3,B:.38};e.push(b);b={radius:50,alpha:.4,color:15465727,H:.5,B:1.25};
e.push(b);b={radius:18,alpha:.2,color:15465727,H:.5,B:1.25};e.push(b);b={radius:10,alpha:.34,color:15726842,H:.8,B:1.5};e.push(b);b={radius:38,alpha:.37,color:15465727,H:.3,B:-.5};e.push(b);this.tc.push(f);this.ec.push(e);this.vc.push(a);f=[];e=[];a=[];b={radius:16,alpha:.5,color:16363159,B:.1};f.push(b);b={radius:26,alpha:.3,color:16091819,B:.32};f.push(b);b={radius:29,alpha:.2,color:16091819,B:1.32};f.push(b);b={radius:20,alpha:.18,color:16363159,B:1.53};f.push(b);b={radius:27,alpha:.13,color:16425092,
B:1.6};f.push(b);b={radius:20,alpha:.1,color:16091819,B:1.75};f.push(b);b={radius:12,alpha:.45,color:16312238,H:.45,B:.2};e.push(b);b={radius:8,alpha:.25,color:16434209,H:.7,B:.33};e.push(b);b={radius:9,alpha:.25,color:16091819,H:.4,B:.7};e.push(b);b={radius:7,alpha:.2,color:16091819,H:.4,B:.85};e.push(b);b={radius:60,alpha:.23,color:16091819,H:.55,B:1.05};e.push(b);b={radius:37,alpha:.1,color:16091819,H:.55,B:1.22};e.push(b);b={radius:10,alpha:.25,color:16363159,H:.65,B:1.38};e.push(b);b={radius:7,
alpha:.2,color:16434209,H:.5,B:1.45};e.push(b);b={radius:3,alpha:.2,color:16416033,H:.5,B:1.78};e.push(b);b={radius:6,alpha:.18,color:16434209,H:.45,B:1.9};e.push(b);b={radius:4,alpha:.14,color:16766514,H:.45,B:2.04};e.push(b);b={radius:30,alpha:.14,color:16766514,H:.8,B:.04};e.push(b);this.tc.push(f);this.ec.push(e);this.vc.push(a);f=[];e=[];a=[];b={radius:9,alpha:.3,color:14346999,H:.3,B:.3};e.push(b);b={radius:5,alpha:.5,color:14148072,H:.8,B:.6};e.push(b);b={radius:3,alpha:.37,color:14346999,
H:.66,B:.8};e.push(b);b={radius:45,alpha:.2,color:14346999,H:.36,B:1.2};e.push(b);b={radius:13,alpha:.2,color:14346999,H:.36,B:1.23};e.push(b);b={radius:11,alpha:.2,color:14148072,H:.36,B:1.28};e.push(b);b={radius:27,alpha:.16,color:14346999,H:.36,B:1.55};e.push(b);b={radius:6,alpha:.36,color:14148072,H:.8,B:1.7};e.push(b);this.tc.push(f);this.ec.push(e);this.vc.push(a);f=[];e=[];a=[];b={radius:24,alpha:.2,color:15186464,B:.2};f.push(b);b={radius:7,alpha:.26,color:15186464,B:.35};f.push(b);b={radius:23,
alpha:.18,color:15186464,B:.65};f.push(b);b={radius:13,alpha:.2,color:15186464,B:.8};f.push(b);b={radius:11,alpha:.15,color:15186464,B:1.4};f.push(b);b={radius:15,alpha:.11,color:15451904,B:1.6};f.push(b);b={radius:6,alpha:.45,color:15579138,H:.45,B:.22};e.push(b);b={radius:3,alpha:.3,color:15451904,H:.25,B:.4};e.push(b);b={radius:4,alpha:.2,color:15451904,H:.25,B:.45};e.push(b);b={radius:65,alpha:.17,color:15186464,H:.25,B:.5};e.push(b);b={radius:5,alpha:.45,color:15579138,H:.45,B:.88};e.push(b);
b={radius:140,alpha:.18,color:15579138,H:.32,B:.95};e.push(b);b={radius:12,alpha:.22,color:15579138,H:.32,B:1.1};e.push(b);b={radius:8,alpha:.32,color:15451904,H:.72,B:1.2};e.push(b);b={radius:55,alpha:.2,color:15451904,H:.45,B:1.33};e.push(b);b={radius:4,alpha:.3,color:15451904,H:.25,B:1.42};e.push(b);this.tc.push(f);this.ec.push(e);this.vc.push(a);f=[];e=[];a=[];b={radius:16,alpha:.4,color:10933495,B:.32};f.push(b);b={radius:14,alpha:.3,color:11007484,B:.36};f.push(b);b={radius:10,alpha:.3,color:4037331,
B:.58};f.push(b);b={radius:14,alpha:.22,color:8835068,B:.68};f.push(b);b={radius:10,alpha:.27,color:11007484,B:.82};f.push(b);b={radius:11,alpha:.27,color:10867450,B:1};f.push(b);b={radius:9,alpha:.2,color:6158332,B:1.05};f.push(b);b={radius:10,alpha:.17,color:10867450,B:1.78};f.push(b);b={radius:10,alpha:.3,color:4037331,B:-.23};f.push(b);b={radius:8,alpha:.45,color:8835068,H:.45,B:.175};e.push(b);b={radius:7,alpha:.4,color:12574715,H:.55,B:.46};e.push(b);b={radius:3,alpha:.3,color:10867450,H:.35,
B:.5};e.push(b);b={radius:60,alpha:.37,color:4031699,H:.75,B:.75};e.push(b);b={radius:3,alpha:.25,color:4031699,H:.25,B:.75};e.push(b);b={radius:3,alpha:.2,color:6158332,H:.25,B:.9};e.push(b);b={radius:7,alpha:.45,color:8835068,H:.45,B:1.3};e.push(b);b={radius:32,alpha:.22,color:8835068,H:.75,B:1.62};e.push(b);b={radius:9,alpha:.45,color:4031699,H:.65,B:1.6};e.push(b);b={radius:8,alpha:.25,color:4031699,H:.65,B:1.83};e.push(b);b={radius:7,alpha:.4,color:12574715,H:.55,B:-.18};e.push(b);this.tc.push(f);
this.ec.push(e);this.vc.push(a);f=[];e=[];a=[];b={radius:16,alpha:.4,color:16389120,B:.32};f.push(b);b={radius:26,alpha:.22,color:16389120,B:.4};f.push(b);b={radius:26,alpha:.25,color:16389120,B:.65};f.push(b);b={radius:18,alpha:.3,color:16389120,B:1.23};f.push(b);b={radius:14,alpha:.26,color:16389120,B:1.33};f.push(b);b={radius:17,alpha:.18,color:16389120,B:1.7};f.push(b);b={radius:30,alpha:.16,color:16389120,B:2.15};f.push(b);b={radius:100,alpha:.25,color:16389120,H:.22,B:1.45};e.push(b);b={radius:7,
alpha:.5,color:15628151,H:.3,B:1.5};e.push(b);b={radius:3,alpha:.5,color:15628151,H:.3,B:1.52};e.push(b);b={radius:4,alpha:.5,color:16389120,H:.3,B:1.745};e.push(b);b={radius:9,alpha:.22,color:16389120,H:.3,B:1.8};e.push(b);this.tc.push(f);this.ec.push(e);this.vc.push(a);f=[];e=[];a=[];b={radius:16,alpha:.4,color:10933495,B:.32};f.push(b);b={radius:14,alpha:.3,color:11007484,B:.36};f.push(b);b={radius:10,alpha:.3,color:4037331,B:.58};f.push(b);b={radius:14,alpha:.22,color:8835068,B:.68};f.push(b);
b={radius:10,alpha:.27,color:11007484,B:.82};f.push(b);b={radius:11,alpha:.27,color:10867450,B:1};f.push(b);b={radius:9,alpha:.2,color:6158332,B:1.05};f.push(b);b={radius:10,alpha:.17,color:10867450,B:1.78};f.push(b);b={radius:10,alpha:.3,color:4037331,B:-.23};f.push(b);b={radius:8,alpha:.45,color:8835068,H:.45,B:.175};e.push(b);b={radius:7,alpha:.4,color:12574715,H:.55,B:.46};e.push(b);b={radius:3,alpha:.3,color:10867450,H:.35,B:.5};e.push(b);b={radius:60,alpha:.37,color:4031699,H:.75,B:.75};e.push(b);
b={radius:3,alpha:.25,color:4031699,H:.25,B:.75};e.push(b);b={radius:3,alpha:.2,color:6158332,H:.25,B:.9};e.push(b);b={radius:7,alpha:.45,color:8835068,H:.45,B:1.3};e.push(b);b={radius:32,alpha:.22,color:8835068,H:.75,B:1.62};e.push(b);b={radius:9,alpha:.45,color:4031699,H:.65,B:1.6};e.push(b);b={radius:8,alpha:.25,color:4031699,H:.65,B:1.83};e.push(b);b={radius:7,alpha:.4,color:12574715,H:.55,B:-.18};e.push(b);this.tc.push(f);this.ec.push(e);this.vc.push(a);f=[];e=[];a=[];b={radius:16,alpha:.4,color:16389120,
B:.32};f.push(b);b={radius:26,alpha:.22,color:16389120,B:.4};f.push(b);b={radius:26,alpha:.25,color:16389120,B:.65};f.push(b);b={radius:18,alpha:.3,color:16389120,B:1.23};f.push(b);b={radius:14,alpha:.26,color:16389120,B:1.33};f.push(b);b={radius:17,alpha:.18,color:16389120,B:1.7};f.push(b);b={radius:30,alpha:.16,color:16389120,B:2.15};f.push(b);b={radius:100,alpha:.25,color:16389120,H:.22,B:1.45};e.push(b);b={radius:7,alpha:.5,color:15628151,H:.3,B:1.5};e.push(b);b={radius:3,alpha:.5,color:15628151,
H:.3,B:1.52};e.push(b);b={radius:4,alpha:.5,color:16389120,H:.3,B:1.745};e.push(b);b={radius:9,alpha:.22,color:16389120,H:.3,B:1.8};e.push(b);this.tc.push(f);this.ec.push(e);this.vc.push(a);f=[];e=[];a=[];b={radius:24,alpha:.2,color:15186464,B:.2};f.push(b);b={radius:7,alpha:.26,color:15186464,B:.35};f.push(b);b={radius:23,alpha:.18,color:15186464,B:.65};f.push(b);b={radius:13,alpha:.2,color:15186464,B:.8};f.push(b);b={radius:11,alpha:.15,color:15186464,B:1.4};f.push(b);b={radius:15,alpha:.11,color:15451904,
B:1.6};f.push(b);b={radius:6,alpha:.45,color:15579138,H:.45,B:.22};e.push(b);b={radius:3,alpha:.3,color:15451904,H:.25,B:.4};e.push(b);b={radius:4,alpha:.2,color:15451904,H:.25,B:.45};e.push(b);b={radius:65,alpha:.17,color:15186464,H:.25,B:.5};e.push(b);b={radius:5,alpha:.45,color:15579138,H:.45,B:.88};e.push(b);b={radius:140,alpha:.18,color:15579138,H:.32,B:.95};e.push(b);b={radius:12,alpha:.22,color:15579138,H:.32,B:1.1};e.push(b);b={radius:8,alpha:.32,color:15451904,H:.72,B:1.2};e.push(b);b={radius:55,
alpha:.2,color:15451904,H:.45,B:1.33};e.push(b);b={radius:4,alpha:.3,color:15451904,H:.25,B:1.42};e.push(b);this.tc.push(f);this.ec.push(e);this.vc.push(a)};v.prototype.yt=function(){if(this.lm){var f=this.o.S,e,a=new y.Ra(0,0,-100),b=this.o.ff(),c=0,m=0,h=!1;if(this.o.na){var n=this.o.zb.width;var q=this.o.zb.height;this.o.C.yi&&(n=this.o.C.xc.width,q=this.o.C.xc.height)}var r=Math.sqrt(n*n+q*q),t=r/800;for(e=0;e<this.Oh.length;e++){var w=this.Oh[e];a.init(0,0,-100);a.Ia(-w.u*Math.PI/180);a.Ma(w.pan*
Math.PI/180);a.Ma(-this.o.pan.m*Math.PI/180);a.Ia(this.o.u.m*Math.PI/180);a.vb(this.o.W.m*Math.PI/180);if(-.01>a.z){m=-b/a.z;c=a.x*m;m*=a.y;var z=Math.max(n,q);Math.abs(c)<z/2+100&&Math.abs(m)<z/2+100&&(h=!0,c+=n/2,m+=q/2)}if(h){this.o.na&&(f.blendFunc(f.SRC_ALPHA,f.ONE),f.enable(f.BLEND),f.disable(f.DEPTH_TEST));z=n/2;var C=q/2;var E=Math.sqrt((z-c)*(z-c)+(C-m)*(C-m));var D=r/2;z=w.dn/100*((D-E)/D);0>z&&(z=0);if(this.o.na){f.useProgram(this.zc);f.bindBuffer(f.ARRAY_BUFFER,this.o.C.tb);f.vertexAttribPointer(this.zc.ja,
this.o.C.tb.itemSize,f.FLOAT,!1,0,0);var F=f.getUniformLocation(this.zc,"uCanvasDimensions");f.uniform2f(F,f.drawingBufferWidth,f.drawingBufferHeight);f.uniform2f(f.getUniformLocation(this.zc,"uFlareCenterPosition"),f.drawingBufferWidth/n*c,q-f.drawingBufferHeight/q*m);f.uniform1f(f.getUniformLocation(this.zc,"uBlindingValue"),z);F=f.getUniformLocation(this.zc,"uAspectRatio");f.uniform1f(F,this.o.C.yi?f.drawingBufferWidth/f.drawingBufferHeight:f.drawingBufferWidth/f.drawingBufferHeight/(n/q));f.drawArrays(f.TRIANGLE_STRIP,
0,this.o.C.tb.numberOfItems)}if(0!=Number(w.type)&&!this.o.C.yi){z=n/2-c;C=q/2-m;var A=1,G=Number(w.type)-1;E<.35*D&&(A=E/(.35*D),A*=A);E>.7*D&&(A=(D-E)/(.3*D));A*=w.alpha/100;if(0<this.tc[G].length)for(E=0;E<this.tc[G].length;E++){var I=this.tc[G][E];D=I.radius*t;var J=I.alpha*A;0>J&&(J=0);var H=I.color;if(8==G||9==G||10==G)H=w.color;this.o.na&&(f.useProgram(this.ya),f.bindBuffer(f.ARRAY_BUFFER,this.Zf),f.vertexAttribPointer(this.ya.ja,this.Zf.itemSize,f.FLOAT,!1,0,0),F=f.getUniformLocation(this.ya,
"uCanvasDimensions2"),f.uniform2f(F,f.drawingBufferWidth,f.drawingBufferHeight),f.uniform2f(f.getUniformLocation(this.ya,"uCirclePosition"),f.drawingBufferWidth/n*(c+z*I.B),f.drawingBufferWidth/n*(q-(m+C*I.B))),f.uniform2f(f.getUniformLocation(this.ya,"uCircleTexturePosition"),f.drawingBufferWidth/n*(c+z*I.B),q-(m+C*I.B)),f.uniform1f(f.getUniformLocation(this.ya,"uCircleRadius"),D),f.uniform3f(f.getUniformLocation(this.ya,"uCircleColor"),(H>>16&255)/255,(H>>8&255)/255,(H&255)/255),f.uniform1f(f.getUniformLocation(this.ya,
"uCircleAlpha"),J),f.uniform1f(f.getUniformLocation(this.ya,"uCircleSoftness"),.1),F=f.getUniformLocation(this.ya,"uAspectRatio"),f.uniform1f(F,f.drawingBufferWidth/f.drawingBufferHeight/(n/q)),f.drawArrays(f.TRIANGLE_FAN,0,this.Zf.numberOfItems))}if(0<this.ec[G].length)for(E=0;E<this.ec[G].length;E++){I=this.ec[G][E];D=I.radius*t;J=I.alpha*A;0>J&&(J=0);H=I.color;if(8==G||9==G||10==G)H=w.color;this.o.na&&(f.useProgram(this.ya),f.bindBuffer(f.ARRAY_BUFFER,this.Qd),f.vertexAttribPointer(this.ya.ja,
this.Qd.itemSize,f.FLOAT,!1,0,0),F=f.getUniformLocation(this.ya,"uCanvasDimensions2"),f.uniform2f(F,f.drawingBufferWidth,f.drawingBufferHeight),F=f.getUniformLocation(this.ya,"uCirclePosition"),f.uniform2f(F,f.drawingBufferWidth/n*(c+z*I.B),f.drawingBufferWidth/n*(q-(m+C*I.B))),F=f.getUniformLocation(this.ya,"uCircleTexturePosition"),f.uniform2f(F,f.drawingBufferWidth/n*(c+z*I.B),q-(m+C*I.B)),F=f.getUniformLocation(this.ya,"uCircleRadius"),f.uniform1f(F,D),f.uniform3f(f.getUniformLocation(this.ya,
"uCircleColor"),(H>>16&255)/255,(H>>8&255)/255,(H&255)/255),f.uniform1f(f.getUniformLocation(this.ya,"uCircleAlpha"),J),f.uniform1f(f.getUniformLocation(this.ya,"uCircleSoftness"),I.H),F=f.getUniformLocation(this.ya,"uAspectRatio"),f.uniform1f(F,f.drawingBufferWidth/f.drawingBufferHeight/(n/q)),f.drawArrays(f.TRIANGLE_FAN,0,this.Qd.numberOfItems))}if(0<this.vc[G].length)for(E=0;E<this.vc[G].length;E++)w=this.vc[G][E],D=w.radius*t,J=w.alpha*A,0>J&&(J=0),this.o.na&&(f.useProgram(this.Db),f.activeTexture(f.TEXTURE0),
f.bindTexture(f.TEXTURE_2D,this.tp),f.bindBuffer(f.ARRAY_BUFFER,this.Qd),f.vertexAttribPointer(this.Db.ja,this.Qd.itemSize,f.FLOAT,!1,0,0),F=f.getUniformLocation(this.Db,"uCanvasDimensions2"),f.uniform2f(F,n,q),F=f.getUniformLocation(this.Db,"uCirclePosition"),f.uniform2f(F,c+z*w.B,q-(m+C*w.B)),F=f.getUniformLocation(this.Db,"uRingTexturePosition"),f.uniform2f(F,f.drawingBufferWidth/n*(c+z*w.B),q-(m+C*w.B)),F=f.getUniformLocation(this.Db,"uCircleRadius"),f.uniform1f(F,D),f.uniform2f(f.getUniformLocation(this.Db,
"uRingPosition"),c+z*w.B,q-(m+C*w.B)),f.uniform1f(f.getUniformLocation(this.Db,"uRingRadius"),D),f.uniform1f(f.getUniformLocation(this.Db,"uRingAlpha"),J),F=f.getUniformLocation(this.Db,"uAspectRatio"),f.uniform1f(F,f.drawingBufferWidth/f.drawingBufferHeight/(n/q)),f.uniform1i(f.getUniformLocation(this.Db,"uSampler"),0),f.drawArrays(f.TRIANGLE_FAN,0,this.Qd.numberOfItems))}this.o.na&&(f.useProgram(this.o.qa.N),f.disable(f.BLEND),f.enable(f.DEPTH_TEST))}}}};return v}();y.wq=x})(ggP2VR||(ggP2VR={}));
var THREE,Y=2E4;
(function(y){var x=function(){function v(f){this.sb=[];this.Ej=[];this.ba={x:0,y:0};this.Tc={x:0,y:0};this.Uh=0;this.session=null;this.Xk=!1;this.Lm=this.Km=this.uf=0;this.sl=this.Ng=!1;this.mm=0;this.zg=-5;this.Am=0;this.Wi=this.Yf=this.xj=!1;this.o=null;this.Zl=!0;this.ag=1;this.jj=[];this.frustumCulled=!1;this.ij=0;this.kk=null;this.zn=!0;this.yk=this.qq=!1;this.Ae=[-1,-1,-1,-1];this.Be=[-1,-1,-1,-1];this.qf=[!1,!1,!1,!1];this.Cc=[];this.sj=[];this.pf=[];this.o=f;var e=this;setTimeout(function(){if(window.WebXRPolyfill&&window.Promise){var a=
{cardboardConfig:{BUFFER_SCALE:1}};try{new window.WebXRPolyfill(a),f.G("WebXR Polyfill loaded!")}catch(b){f.Rc(b)}}e.Qs()},0);THREE?this.cn():console.log("Three.js not available!")}v.prototype.ir=function(){this.init();this.animate()};v.prototype.cn=function(){this.wm=new THREE.Matrix4;this.Yo=new THREE.Euler};v.prototype.init=function(){"xr"in navigator||console.log("no WebXR support");if(THREE)if(this.Pa)console.log("already set up!");else{this.wm||this.cn();var f=this,e=this.o,a=this.fc=e.fc,b=
this.yp=new THREE.Scene,c=this.zu=new THREE.Scene,m=this.camera=new THREE.PerspectiveCamera(100,window.innerWidth/window.innerHeight,.001,Y);b.add(m);108>THREE.REVISION&&(this.frustumCulled=!0);m.position.z=-.01;m.position.y=0;m.position.x=0;this.Pa=m=new THREE.WebGLRenderer({depth:!0,logarithmicDepthBuffer:!0,alpha:!0,antialias:!0,stencil:!1});m.setClearColor(new THREE.Color(0),1);m.setPixelRatio(window.devicePixelRatio);m.setSize(window.innerWidth,window.innerHeight);m.outputEncoding=THREE.sRGBEncoding;
m.shadowMap.enabled=!1;a.appendChild(m.domElement);"xr"in navigator&&(m.xr.enabled=!0,m.xr.setReferenceSpaceType("local"));var h=this.Ik=new THREE.Group;h.name="controllerGroup";h.renderOrder=3E3;a=this.Gk=m.xr.getController(0);a.addEventListener("selectstart",function(z){f.$o(z)});a.addEventListener("selectend",function(z){f.Zo(z)});a.visible=!0;a.userData.Of=0;h.add(a);var n=this.Hk=m.xr.getController(1);n.addEventListener("selectstart",function(z){f.$o(z)});n.addEventListener("selectend",function(z){f.Zo(z)});
n.visible=!0;n.userData.Of=1;h.add(n);h.visible=!1;var q=this.Me=new THREE.Group;q.name="skinGroup";q.translateZ(this.zg);q.visible=!1;q.renderOrder=1E3;c.add(q);q=this.zm=new THREE.Group;q.name="toggleSkinGroup";q.translateZ(this.zg+.1);q.renderOrder=1100;c.add(q);c.add(h);q=(new THREE.TextureLoader).load("webxr/vrSkinShow.svg");var r=(new THREE.TextureLoader).load("webxr/vrSkinHide.svg");h=new THREE.PlaneBufferGeometry(.3,.3);q=new THREE.MeshBasicMaterial({map:q});q.transparent=!0;r=new THREE.MeshBasicMaterial({map:r});
r.transparent=!0;h=new THREE.Mesh(h,q);h.name="SkinToggleButton";h.position.y=3.12;h.wv=!1;h.userData.bt=q;h.userData.$s=r;h.userData.onclick=function(){f.ji()};this.Ob=h;this.Ob.visible=!1;this.zm.add(h);h=(new THREE.BufferGeometry).setFromPoints([new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,-1)]);q=new THREE.LineBasicMaterial({color:14737632});h=new THREE.Line(h,q);h.name="line";h.scale.z=5;a.add(h.clone());n.add(h.clone());this.gi=new THREE.Raycaster;this.ba=new THREE.Vector2;this.Fe=new THREE.Group;
this.Fe.name="panoGroup";e.jd||(this.Fe.renderOrder=1);this.nf=new THREE.Group;this.nf.name="imageGroup";this.Ad=new THREE.Group;this.Ad.name="hotspotGroup";this.Vi=new THREE.Group;this.Vi.name="elementGroup";this.bh=new THREE.Group;this.bh.name="centerGroup";e.jd||(this.bh.renderOrder=2E3);this.Fe.add(this.Vi);this.Fe.add(this.Ad);this.Fe.add(this.nf);b.add(this.Fe);h=new THREE.BufferGeometry;e=[];a=[];for(n=0;20>n;n++)q=2*n*Math.PI/20,r=Math.cos(q),q=Math.sin(q),a.push(.03*r,.03*q,0),a.push(.05*
r,.05*q,0);for(n=0;20>n;n++){q=2*n;r=2*n+1;var t=(n+1)%20*2+1,w=(n+1)%20*2;e.push(q,r,w);e.push(r,t,w)}h.setIndex(e);h.setAttribute("position",new THREE.Float32BufferAttribute(a,3));e=new THREE.MeshBasicMaterial({color:"black",side:THREE.DoubleSide});e=new THREE.Mesh(h,e);e.position.z=-5;this.bh.add(e);window.addEventListener("resize",function(){f.vt()},!1);document.addEventListener("mouseup",function(){f.rt()},!1);document.addEventListener("mousedown",function(z){f.pt(z)},!1);document.addEventListener("mousemove",
function(z){f.qt(z)},!1);U&&"undefined"!==typeof __THREE_DEVTOOLS__&&(__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:b})),__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:c})),__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:m})))}else console.log("Three.js not available!")};v.prototype.Np=function(){var f=this.o;f.G("VR not found");f.I("vrchanged",{});f.I("playerstatechanged",{})};v.prototype.yu=function(){this.sl=!0;var f=this.o;f.G("XR found");
f.I("vrchanged",{});f.I("playerstatechanged",{})};v.prototype.Qs=function(){if(!this.qq){this.qq=!0;var f=this;if("xr"in navigator)navigator.xr.isSessionSupported("immersive-vr").then(function(e){e?f.yu():f.Np()})["catch"](f.Np)}};v.prototype.hl=function(){return this.Me};v.prototype.ig=function(){return null!=this.session?this.Pa.xr.isPresenting:this.o.he?!0:!1};v.prototype.lf=function(){return this.sl&&THREE};v.prototype.tt=function(f){var e=this;this.Gi();f.addEventListener("end",function(){e.st()});
console.log("XR Session started.");this.Pa.xr.setSession(f);this.Xk=!0;this.session=f;e.o.I("entervr",{session:f})};v.prototype.st=function(){console.log("XR Session ended.");this.Xk=!1;this.session=null;this.Fk()};v.prototype.Tf=function(){var f=this.o;if(this.sl){if(null===this.session){var e=this;navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor"]}).then(function(b){e.tt(b)})["catch"](function(b){console.log(b);console.warn("'immersive-vr' isn't supported, or an error occurred activating VR!");
e.Fk()})}this.Ad&&this.Ad.translateY(-this.ij);this.ij=0;if(1==this.ag){var a=navigator.userAgent;0<=a.indexOf("OculusBrowser")&&(0<=a.indexOf("Pacific")&&(this.ag=1.7),0<=a.indexOf("Quest")&&(this.ag=1.5))}this.Pa.xr.setFramebufferScaleFactor(this.ag);f.Rc("Enter VR - scaled "+this.ag)}else this.Gi(),this.o.I("entervr",{session:null})};v.prototype.wt=function(){if(THREE&&this.Pa){var f=this.o;f.he=!0;f.Gc&&(Y=2E3);f.$.style.display="none";f.Za.style.display="none";this.Pa.domElement.style.display=
"inline";f.I("vrchanged",{});f.I("playerstatechanged",{})}};v.prototype.Fk=function(){if(THREE&&this.Pa){var f=this.o;f.he=!1;f.$.style.display="inline";f.Za.style.display="inline";this.Pa.domElement.style.display="none";f.wg(0);f.Xb();f.update();f.I("vrchanged",{});f.I("playerstatechanged",{});this.o.I("exitvr",{session:null});this.Dk()}};v.prototype.Uf=function(){null!=this.session&&this.session.end()};v.prototype.bq=function(){this.ig()?this.Uf():this.Tf()};v.prototype.tr=function(){var f=0,e=
this.o,a=e.L.M;var b=1536;this.Pa&&e.G("Canvas: "+b);b*=Math.pow(2,0);if(0<a.levels.length){for(;a.levels.length>=f+2&&!a.levels[f+1].xf&&a.levels[f+1].width>b;)f++;e.G("Level "+f+" - width: "+a.levels[f].width);e.G(a.levels)}return f};v.prototype.lo=function(f){var e=this.o,a=e.L.M,b=e.Qe[f];f="";if(b){b=b.firstChild;for(var c;b;)"input"==b.nodeName&&(c=b)&&(c=0<a.levels.length?c.getAttributeNode("leveltileurl"):c.getAttributeNode("tilevrurl"))&&(f=c.nodeValue),b=b.nextSibling}else f=0<a.levels.length?
a.El:e.Kk;a=f;f=e.rp;for(b=0;3>b;b++)a=f(a,"c","vr"),a=f(a,"s","vr"),a=f(a,"r",0),a=f(a,"l",0),a=f(a,"x",0),a=f(a,"y",0),a=f(a,"v",0),a=f(a,"h",0);return e.jb(a)};v.prototype.ceilPowerOfTwo=function(f){return Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))};v.prototype.loadTexture=function(f,e,a){var b=new THREE.ImageLoader;b.setCrossOrigin(this.o.crossOrigin);var c=this;b.load(e,function(m){var h=c.ceilPowerOfTwo(m.width),n=c.ceilPowerOfTwo(m.height);f.encoding=THREE.sRGBEncoding;if(h==m.width&&n==m.height||
!a)f.image=m;else{c.o.G("resizing "+m.width+"/"+m.height+" -> "+h+"/"+n);var q=document.createElement("canvas");q.width=h;q.height=n;q.getContext("2d").drawImage(m,0,0,h,n);f.image=q}f.needsUpdate=!0;f.ro=!0;f.ve&&f.ve.ro&&(f.Ah.visible=!0,f.ve.Ah.visible=!0)});this.jj.push(f)};v.prototype.Gi=function(){if(THREE){var f=this.o;if(this.yk)f.G("vr panorama aleady added!");else{var e=this.nf,a=this;f.G("add vr panorama");this.yf();this.camera.layers.enable(1);e.setRotationFromEuler(this.Yo);e.rotateX(f.Va.pitch*
Math.PI/180);e.rotateZ(-f.Va.W*Math.PI/180);var b=new THREE.SphereBufferGeometry(Y/3*1.5,16,16),c=new THREE.Texture,m=new THREE.ImageLoader;m.setCrossOrigin(this.o.crossOrigin);m.load(this.lo(f.Zi()),function(h){c.encoding=THREE.sRGBEncoding;c.image=h;c.needsUpdate=!0});m=new THREE.MeshBasicMaterial({map:c,side:THREE.DoubleSide});b=new THREE.Mesh(b,m);b.scale.x=-1;b.rotateZ(f.Va.W*Math.PI/180);b.rotateX(-f.Va.pitch*Math.PI/180);b.rotateY(-90*Math.PI/180);e.add(b);a.Ij=b;a.yk=!0;setTimeout(function(){f.G("Adding Main Pano");
a.yk=!1;a.Kq();f.A.j?a.Nq():a.Lq();a.Iq()});this.Ot();this.Zl=!0}}};v.prototype.Nq=function(){var f=this.o,e=this.nf,a=Y/3;if(f.Bd){var b=new THREE.VideoTexture(f.A.j);b.wrapS=THREE.ClampToEdgeWrapping;b.wrapT=THREE.ClampToEdgeWrapping;b.minFilter=THREE.LinearFilter;b.encoding=THREE.sRGBEncoding;var c=new THREE.SphereBufferGeometry(a,60,40);c.scale(-1,1,1);for(var m=c.attributes.uv.array,h=1;h<m.length;h+=2)m[h]*=.5;m=new THREE.MeshBasicMaterial({map:b});c=new THREE.Mesh(c,m);c.rotateY(-90*Math.PI/
180);c.layers.set(f.Bg?1:2);e.add(c);c=new THREE.SphereBufferGeometry(a,60,40);c.scale(-1,1,1);m=c.attributes.uv.array;for(h=1;h<m.length;h+=2)m[h]*=.5,m[h]+=.5;m=new THREE.MeshBasicMaterial({map:b});c=new THREE.Mesh(c,m);c.rotateY(-90*Math.PI/180);c.layers.set(f.Bg?2:1)}else c=new THREE.SphereBufferGeometry(a,60,40),c.scale(-1,1,1),b=new THREE.VideoTexture(f.A.j),b.encoding=THREE.sRGBEncoding,b.wrapS=THREE.ClampToEdgeWrapping,b.wrapT=THREE.ClampToEdgeWrapping,b.minFilter=THREE.LinearFilter,m=new THREE.MeshBasicMaterial({map:b}),
c=new THREE.Mesh(c,m),c.rotateY(-90*Math.PI/180);e.add(c);try{f.A.j.play()}catch(n){f.Rc(n)}};v.prototype.Lq=function(){var f=this.o,e=this.o.L.M,a=[],b=this.tr(),c=this.nf,m=Y/3,h=f.Bd?2:1;if(e.levels.length>b)for(var n=e.levels[b],q=0;6>q;q++){a[q]=new THREE.Group;for(var r=0;r<n.ra;r++)for(var t=0;t<n.Y;t++)for(var w=0;w<h;w++){var z=new THREE.Texture;z.encoding=THREE.sRGBEncoding;this.loadTexture(z,f.L.Fg(q,b,t,r,1==w),!0);z.wrapS=THREE.ClampToEdgeWrapping;z.wrapT=THREE.ClampToEdgeWrapping;z.minFilter=
THREE.LinearMipMapLinearFilter;z.anisotropy=1;var C=e.V+2*e.fb,E=e.V+2*e.fb;t==n.Y-1&&(C=n.width-e.V*(n.Y-1)+2*e.fb);r==n.ra-1&&(E=n.width-e.V*(n.ra-1)+2*e.fb);var D=new THREE.PlaneBufferGeometry(m*C/n.width,m*E/n.width,8),F=new THREE.MeshBasicMaterial({map:z});D=new THREE.Mesh(D,F);F.transparent=!0;F.side=THREE.FrontSide;F=1*e.V;D.position.x=m*(t*F+C/2-e.fb-n.width/2)/n.width;D.position.y=m*-(r*F+E/2-e.fb-n.width/2)/n.width;D.position.z=-.5*m;if(f.Bd)if(D.visible=!1,D.layers.set(1==w?1:2),z.Ah=D,
0==w)var A=D;else C=A.material.map,z.ve=C,C.ve=z;a[q].add(D);D.frustumCulled=this.frustumCulled}4>q?a[q].rotation.y=-q*Math.PI/2:a[q].rotation.x=(4==q?1:-1)*Math.PI/2;c.add(a[q])}else for(e=f.Gg,q=0;6>q;q++)for(a[q]=new THREE.Group,w=0;w<h;w++)b=q,f.Bd&&(b=q+(1==w?6:0)),z=new THREE.Texture,z.encoding=THREE.sRGBEncoding,this.loadTexture(z,f.jb(f.ih[b]),!1),z.wrapS=THREE.ClampToEdgeWrapping,z.wrapT=THREE.ClampToEdgeWrapping,z.minFilter=THREE.LinearFilter,D=new THREE.PlaneBufferGeometry(e*m/2,e*m/2,
64),F=new THREE.MeshBasicMaterial({map:z}),D=new THREE.Mesh(D,F),F.transparent=!0,F.side=THREE.FrontSide,D.position.x=0,D.position.y=0,D.position.z=-.25*m,f.Bd&&(D.layers.set(1==w?1:2),D.visible=!1,z.Ah=D,0==w?A=D:(C=A.material.map,z.ve=C,C.ve=z)),a[q].add(D),4>q?a[q].rotation.y=-q*Math.PI/2:a[q].rotation.x=(4==q?1:-1)*Math.PI/2,c.add(a[q])};v.prototype.Kq=function(){var f=this.o,e=this.Ad;new y.Ra(0,0,-100);for(var a=f.R.Zj,b=0;b<f.K.length;b++){var c=f.K[b];if("poly"!=c.type){var m=null,h=c.Lu(),
n=c.Ef?100:5;if(f.Ei&&f.Ei.addSkinHotspot)(m=f.Ei.addSkinHotspot(c))&&m.userData.sv&&(n=100);else{var q=.2;if(!1!==h){n=!c.distance||0>=c.distance?5:1>c.distance?1:5>c.distance?c.distance:5;if(c.fd){h=.005;var r=(new THREE.TextureLoader).load(c.fd);r.encoding=THREE.sRGBEncoding;var t=new THREE.MeshBasicMaterial({map:r});if(c.Ef){m=2*n*Math.tan(c.fov/2*Math.PI/180);var w=new THREE.PlaneBufferGeometry(m,m*c.ud/c.af,1,1);t.transparent=!0;t.opacity=1}else w=new THREE.PlaneBufferGeometry(h*c.af,h*c.ud,
1,1),t.transparent=!0,t.opacity=.25;q=h*c.ud/2;t.side=THREE.DoubleSide}else w=new THREE.SphereBufferGeometry(.2,16,16),r=(new THREE.TextureLoader).load(this.lo(h)),r.encoding=THREE.sRGBEncoding,t=new THREE.MeshBasicMaterial({map:r}),t.transparent=!0,t.opacity=.25;m=new THREE.Mesh(w,t);h=c.title;if(a.enabled&&""!=h){w=document.createElement("canvas");w.width=256;w.height=32;r=w.getContext("2d");this.xi||(this.xi=document.createElement("canvas"),this.xi.width=w.width,this.xi.height=w.height);var z=
this.xi.getContext("2d");z.clearRect(0,0,w.width,w.height);z.font="16px Helvetica";z.textAlign="center";z.textBaseline="top";t=z.measureText(h);var C=t.width;0<a.height&&(C=Math.min(a.width,w.width-6),C=Math.max(C,t.width));t=C+6;a.background&&(z.fillStyle=this.o.Ab(a.ac,a.$b),z.fillRect((w.width-C)/2-3,2,C+6,24));0<a.Ki&&(z.strokeStyle=this.o.Ab(a.cc,a.bc),z.strokeRect((w.width-C)/2-3,2,C+6,24));z.fillStyle=this.o.Ab(a.$j,a.Yj);z.fillText(h,w.width/2,5,w.width-6);r.drawImage(this.xi,(w.width-t)/
2,2,t,24,0,0,w.width,w.height);r=new THREE.Texture(w);r.encoding=THREE.sRGBEncoding;r.needsUpdate=!0;h=1.5;w=new THREE.PlaneBufferGeometry(1*h*t/w.width,3*h/w.height,1,1);t=new THREE.MeshBasicMaterial({map:r,side:THREE.DoubleSide});w=new THREE.Mesh(w,t);w.translateY(-q-.125*h/2);w.frustumCulled=this.frustumCulled;m.add(w);t.transparent=!0;t.opacity=.5}m.userData={O:c}}}m&&(m.rotateY(c.pan*Math.PI/180),m.rotateX(c.u*Math.PI/180),m.translateZ(-n),m.castShadow=!1,m.receiveShadow=!1,m.frustumCulled=this.frustumCulled,
e.add(m))}}};v.prototype.Iq=function(){for(var f=this.o,e=0;e<f.Ua.length;e++){var a=f.Ua[e];if(a.j){var b=(new THREE.TextureLoader).load(a.j.src);this.rn(a,b)}}for(e=0;e<f.U.length;e++)a=f.U[e],a.j&&"_videopanorama"!=a.id&&!a.nd&&(a.j.play(),b=new THREE.VideoTexture(a.j),b.encoding=THREE.sRGBEncoding,b.wrapS=THREE.ClampToEdgeWrapping,b.wrapT=THREE.ClampToEdgeWrapping,b.minFilter=THREE.LinearFilter,this.rn(a,b))};v.prototype.rn=function(f,e){var a=this.Vi,b=Y/8,c=2*Math.tan(f.fov*Math.PI/360)*b;var m=
0<f.kc?c*f.Nc/f.kc:c;f.Ec&&1!=f.Ec&&(m*=f.Ec);c=new THREE.PlaneBufferGeometry(c,m,5,5);e=new THREE.MeshBasicMaterial({map:e,side:THREE.DoubleSide,transparent:!0});e=new THREE.Mesh(c,e);e.rotateY(f.pan*Math.PI/180);e.rotateX(f.u*Math.PI/180);e.translateY(-0);e.translateZ(-b);e.rotateZ(-f.vb*Math.PI/180);e.rotateY(-f.Ma*Math.PI/180);e.rotateX(-f.Ia*Math.PI/180);e.userData=f;e.castShadow=!1;e.receiveShadow=!1;a.add(e)};v.prototype.oh=function(f){for(var e=f.children.length-1;0<=e;e--){var a=f.children[e];
this.oh(a);f.remove(a)}f.geometry&&f.geometry.dispose();f.material&&(f.material.texture&&(f.material.texture.dispose(),f.material.texture.ve=null,f.material.texture.Ah=null),f.material.map&&(f.material.map.dispose(),f.material.map.ve=null,f.material.map.Ah=null),f.material.dispose())};v.prototype.yf=function(){THREE&&(this.jj=[],this.oh(this.nf),this.oh(this.Ad),this.oh(this.Vi),10<this.Pa.info.memory.textures&&this.o.Mm(this.Pa.info.memory))};v.prototype.vt=function(){if(THREE){var f=this.camera;
f.aspect=window.innerWidth/window.innerHeight;f.updateProjectionMatrix();this.Pa.setSize(window.innerWidth,window.innerHeight)}};v.prototype.$o=function(f){if(THREE){f=f.target;this.Dk();var e=this.cl(f);0<e.length&&(this.Xg(e,f.userData.Of),0<this.sb.length&&(f=this.sb[0],e=f.userData,e.O&&!e.fromSkin?(f=e.O,this.o.od(f.url,f.target)):(this.ne(f,"onclick"),this.ne(f,"onmousedown"))))}};v.prototype.Zo=function(f){if(THREE){f=f.target;var e=this.cl(f);0<e.length&&this.Xg(e,f.userData.Of)}};v.prototype.cl=
function(f){this.wm.identity().extractRotation(f.matrixWorld);this.gi.ray.origin.setFromMatrixPosition(f.matrixWorld);this.gi.ray.direction.set(0,0,-1).applyMatrix4(this.wm);return this.tl(this.gi)};v.prototype.tl=function(f){var e=[];if(this.Ad.visible){var a=f.intersectObjects(this.Ad.children,!0);e=e.concat(a)}this.Me.visible&&(a=f.intersectObjects(this.Me.children,!0),e=e.concat(a));a=f.intersectObjects(this.zm.children,!0);return e=e.concat(a)};v.prototype.Xg=function(f,e){void 0===e&&(e=-1);
for(var a=0;a<f.length;a++){var b=f[a].object;if(void 0!==b.userData.isVisible&&b.userData.isVisible()||void 0===b.userData.isVisible&&b.visible||b.userData.clickInvisible)b.selected=!0,b.distance=f[a].distance,b.Of=e,this.sb.push(b)}};v.prototype.intersectObjects=function(f){var e=f.getObjectByName("line"),a=this.cl(f);0<a.length&&this.Xg(a,f.userData.Of);e.scale.z=0<this.sb.length?this.sb[0].distance:5};v.prototype.Dk=function(){for(;this.sb.length;)this.sb.pop().selected=!1};v.prototype.qt=function(f){f.preventDefault();
var e=this.ba,a=this.Pa;e.x=f.clientX/a.domElement.clientWidth*2-1;e.y=2*-(f.clientY/a.domElement.clientHeight)+1;1==f.buttons&&(this.Uh=this.Tc.x-e.x)};v.prototype.Rs=function(){var f=this.gi;f.setFromCamera(this.ba,this.camera);f=this.tl(f);0<f.length&&this.Xg(f)};v.prototype.Ss=function(){var f=this.gi;this.camera.updateProjectionMatrix();f.setFromCamera({x:0,y:0},this.camera);f=this.tl(f);0<f.length&&this.Xg(f)};v.prototype.rt=function(){this.Uh=0;if(0<this.sb.length){var f=this.sb[0];f.userData.O||
this.ne(f,"onmouseup")}};v.prototype.ne=function(f,e,a){void 0===a&&(a=!1);var b=f;do if(b.userData[e])if(a){var c=f.Of;0<=c&&this.Cc&&this.Cc[c]&&(c=this.Cc[c],c.hapticActuators&&0<c.hapticActuators.length&&c.hapticActuators[0].pulse(.8,5))}else b.userData[e]();while(!b.userData.stopPropagation&&(b=b.parent))};v.prototype.en=function(f,e){do if(f.userData.onclick||f.userData.O&&!f.userData.fromSkin)e?f.userData.pi=-1:f.userData.pi&&-1!=f.userData.pi?Date.now()>f.userData.pi+1E3&&(f.userData.onclick?
(f.userData.onclick(),f.userData.pi=-1):f.userData.O&&f.userData.O.url&&this.o.od(f.userData.O.url,f.userData.O.target)):f.userData.pi=Date.now();while(!f.userData.stopPropagation&&(f=f.parent))};v.prototype.pt=function(f){50>f.clientX&&50>f.clientY&&this.o.Uf();if(0<this.sb.length){f=this.sb[0];for(var e=1;e<this.sb.length;e++)this.sb[e].position.z>f.position.z&&(f=this.sb[e]);e=f.userData;e.O?(f=e.O,this.o.od(f.url,f.target)):(this.ne(f,"onclick"),this.ne(f,"onmousedown"))}else this.Tc.x=this.ba.x,
this.Tc.y=this.ba.y};v.prototype.animate=function(){var f=this.Qo=this;this.Pa&&this.Pa.setAnimationLoop(function(){f.render()})};v.prototype.render=function(){if(THREE){var f=null;try{f=this.Pa.xr.getCamera()}catch(t){}!this.kk&&f&&(f.add(this.bh),this.yp.add(f));if(this.kk=f)this.Ad.translateY(f.position.y-this.ij),this.ij=f.position.y;var e=this.Qo,a=e.o;if(a.he){e.Ng=e.Gk.visible||e.Hk.visible?!1:!0;var b=this.Is();this.Js();this.Ij&&0<this.jj.length&&this.jj.every(function(t){return t.ro})&&
(this.oh(this.Ij),this.nf.remove(this.Ij),this.Ij=null,a.G("unload Preview Sphere"));for(var c=this.Ad,m=c.children.length-1;0<=m;m--){var h=c.children[m],n=1,q=1;h.selected?(n=1.5,q=1):b?(n=.6,q=.7):(n=.4,q=.5);var r=h.scale.x;r+=.1*(n-r);h.userData.fromSkin?h.userData.ggUse3d&&(r=10):(h.material.opacity+=.1*(q-h.material.opacity),h.userData&&h.userData.O&&h.userData.O.fd?(h.userData.O.Ef&&(r=1,h.material.opacity=1),0<h.children.length&&(h.children[0].material.opacity=h.material.opacity)):(h.rotateY(1*
Math.PI/180),0<h.children.length&&(h.children[0].rotateY(-1*Math.PI/180),h.children[0].material.opacity=h.material.opacity)));h.scale.x=h.scale.y=h.scale.z=r}b=e.camera.rotation.clone();b.reorder("YXZ");this.Km=180*b.y/Math.PI;this.Lm=180*b.x/Math.PI;a.Ei&&!this.Me.visible&&this.zn&&(10<this.Lm?this.xj||(this.xj=!0,this.Ys=new Date):(this.xj=!1,!this.Yf&&!this.Ob.visible||this.Wi||(this.Wi=!0,this.Uk=new Date),this.Yf=!1),!this.xj||this.Yf||this.Ob.visible||(c=new Date,500<c.getTime()-this.Ys.getTime()&&
(this.Yf=!0,this.Uk=new Date)),this.Yf?(this.Ob.visible=!0,c=new Date,c=(c.getTime()-this.Uk.getTime())/5,100<=c?(this.Ob.material.opacity=1,this.Yf=!1):this.Ob.material.opacity=c/100):this.Wi&&(c=new Date,c=(c.getTime()-this.Uk.getTime())/5,100<=c?(this.Ob.material.opacity=0,this.Wi=this.Ob.visible=!1):this.Ob.material.opacity=1-c/100));this.Zl&&(this.ii(this.Km-a.pan.m),this.Zl=!1);a.Ip(this.Km-this.uf,this.Lm,180*b.z/Math.PI);a=this.bh;e.Ng?f&&(a.visible=!0):a.visible=!1;a=this.zm;f&&!this.Me.visible&&
(a.translateZ(-(this.zg+.1)),a.rotateY(-this.Am),b=new THREE.Vector3(0,0,1),b.applyEuler(f.rotation),this.Am=Math.atan2(b.x,b.z),a.rotateY(this.Am),a.translateZ(this.zg+.1));e.Pa.autoClear=!0;e.Pa.render(e.yp,e.camera);e.Pa.autoClear=!1;e.Pa.clearDepth();e.Pa.render(e.zu,e.camera);0==this.Uh||isNaN(this.Uh)||this.ii(this.Uh)}}};v.prototype.Is=function(){var f=this,e=this;this.Cc=[];var a=!0;this.session?this.session.inputSources.forEach(function(q){var r=q.profiles;"gaze"==q.targetRayMode?e.Ng=!0:
(f.Cc.push(q.gamepad),0<=r.indexOf("oculus-go")&&(a=!1),0<=r.indexOf("generic-trigger-squeeze-thumbstick")&&(a=!0),0<=r.indexOf("oculus-touch")&&(a=!0))}):this.Cc=navigator.getGamepads&&navigator.getGamepads();var b=!1;if(this.Cc)for(var c=0;c<this.Cc.length;c++){var m=this.Cc[c];if(m&&0<m.buttons.length)if(2<=m.axes.length&&2<m.buttons.length&&!a)if(m.buttons[2].pressed)this.qf[c]||(this.qf[c]=!0,this.ji());else if(m.buttons[2].touched){b=!0;this.qf[c]=!1;var h=m.axes[0],n=m.axes[1];-1==this.Ae[c]?
this.Ae[c]=h:(m=this.Ae[c]-h,-.3>m&&(this.ii(20),this.Ae[c]=h,this.Be[c]=n),.3<m&&(this.ii(-20),this.Ae[c]=h,this.Be[c]=n));-1==this.Be[c]?this.Be[c]=n:(m=this.Be[c]-n,-.5>m&&(this.ji(!0),this.Be[c]=n,this.Ae[c]=h),.5<m&&(this.ji(!1),this.Be[c]=n,this.Ae[c]=h))}else this.Ae[c]=-1,this.Be[c]=-1,this.qf[c]=!1;else 4<=m.axes.length&&(h=m.axes[2],n=m.axes[3],.8<h?(b=!0,1!=this.pf[c]&&(this.pf[c]=1,this.sj[c]=Date.now()-1E4)):-.8>h?(b=!0,-1!=this.pf[c]&&(this.pf[c]=-1,this.sj[c]=Date.now()-1E4)):this.pf[c]=
0,0!=this.pf[c]&&400<Date.now()-this.sj[c]&&(this.sj[c]=Date.now(),this.ii(20*this.pf[c])),m.buttons[1].pressed?this.qf[c]||(this.qf[c]=!0,this.ji()):this.qf[c]=!1)}e.Ik.visible==(!this.Cc||0==this.Cc.length)&&(e.Ik.visible=!e.Ik.visible);return b};v.prototype.fp=function(f){for(f=f.parent;f;){if(f.selected)return!0;f=f.parent}return!1};v.prototype.Js=function(){var f=this.Qo;f.Ej=f.sb.slice();f.Dk();f.Gk.visible&&f.intersectObjects(f.Gk);f.Hk.visible&&f.intersectObjects(f.Hk);f.Xk||f.Rs();f.Ng&&
f.Ss();for(var e=0;e<f.sb.length;e++){var a=f.sb[e];f.Ng&&this.en(a,!1);-1!=f.Ej.indexOf(a)||this.fp(a)||(this.ne(a,"onmouseover"),this.Cc&&0<this.Cc.length&&this.ne(a,"onclick",!0))}for(e=0;e<f.Ej.length;e++)a=f.Ej[e],-1==f.sb.indexOf(a)&&(this.fp(a)||this.ne(a,"onmouseout"),f.Ng&&this.en(a,!0))};v.prototype.ji=function(f){var e=this.Me;void 0===f&&(f=!e.visible);var a=this.kk;f?(e.translateZ(-this.zg),e.rotateY(-this.mm),a&&(f=new THREE.Vector3(0,0,1),f.applyEuler(a.rotation),this.mm=Math.atan2(f.x,
f.z)),e.rotateY(this.mm),e.translateZ(this.zg),this.Me.visible=!0,this.Ob.material=this.Ob.userData.$s,this.Ob.visible=!0,this.Ob.material.opacity=1):(this.Me.visible=!1,this.Ob.material=this.Ob.userData.bt,this.Ob.visible=!1)};v.prototype.Ot=function(){this.uf=0;this.Fe.setRotationFromEuler(this.Yo)};v.prototype.ii=function(f){this.uf+=f;this.Fe.rotateY(f*Math.PI/180)};return v}();y.Gq=x})(ggP2VR||(ggP2VR={}));
(function(y){var x=function(){return function(){this.fov=this.u=this.pan=0}}();y.nv=x;var v=function(){function f(e){this.pan={m:0,Fa:0,min:0,max:360,d:0,Cj:0,Rb:0,open:0};this.u={m:0,Fa:0,min:-90,max:90,d:0,Rb:0,open:0};this.W={m:0,Fa:0,min:-180,max:180,d:0,open:0};this.ic={pan:0,u:-90,W:0,fov:170,nb:9};this.fov={m:70,Fa:70,min:1,Th:0,max:170,Gl:360,Hl:270,prev:0,d:0,Mc:{enabled:!1,x:0,y:0},mode:0,Tp:0,vn:0,open:0};this.cube=new y.Bq;this.qa=null;this.Va={W:0,pitch:0};this.Bg=this.Bd=!1;this.Fj=
this.bp=4;this.ap=this.Ll=0;this.M=new y.zq;this.ng=200;this.wi=0;this.ym=5;this.ee=0;this.$p=50;this.Ns=0;this.A={src:[],Ye:4,width:640,height:480,Qc:!1,jg:!1,Uj:!0,qm:!1,re:"loop",Xj:"",j:null,xm:!1,texture:null,hk:null,vi:null,lj:null,format:1,Bh:0,flipY:1,ib:function(){return 0},bm:function(){},loop:function(){return!1}};this.rf={pan:-1,u:-1,fov:-1};this.Bl=0;this.ih=[];this.Kk="";this.jh=[];this.Gg=this.Oe=1;this.Ol=new x;this.o=e}f.prototype.ma=function(){this.o.ma(!1)};f.prototype.update=function(){this.o.update()};
f.prototype.gf=function(){return this.pan.m};f.prototype.cj=function(){var e=this.pan.m;if(!this.cb()){for(;-180>e;)e+=360;for(;180<e;)e-=360}return e};f.prototype.Rd=function(){var e=this.pan.m-this.pan.Cj;if(!this.cb()){for(;-180>e;)e+=360;for(;180<e;)e-=360}return e};f.prototype.$d=function(e){this.ma();isNaN(e)||(this.pan.m=Number(e));this.update()};f.prototype.Rj=function(e){this.ma();isNaN(e)||(this.pan.m=Number(e)+this.pan.Cj);this.update()};f.prototype.Mi=function(e,a){isNaN(e)||(this.$d(this.gf()+
e),a&&(this.pan.d=e))};f.prototype.hn=function(e,a){this.Mi(e*this.ef(),a)};f.prototype.ef=function(){return Math.min(1,2*Math.tan(Math.PI*Math.min(this.fov.m,90)/360))};f.prototype.cg=function(){return this.u.m};f.prototype.ae=function(e){this.ma();isNaN(e)||(this.u.m=Number(e));this.update()};f.prototype.Ni=function(e,a){this.ae(this.cg()+e);a&&(this.u.d=e)};f.prototype.kn=function(e,a){this.Ni(e*this.ef(),a)};f.prototype.wg=function(e){this.ma();isNaN(e)||(this.W.m=Number(e));this.update()};f.prototype.fj=
function(){return this.W.m};f.prototype.zd=function(){return this.fov.m};f.prototype.wb=function(e){this.ma();switch(this.Z()){case 4:var a=170;break;case 12:a=360;break;case 9:a=355;break;default:a=170}this.cb()&&(a=9999999999);return!isNaN(e)&&0<e&&e<a&&(a=this.fov.m,this.fov.m=1*e,this.Ze(),a!=this.fov.m)?(this.update(),!0):!1};f.prototype.em=function(e){0<=e&&4>e&&(this.fov.mode=Number(e),this.Ze(),this.update())};f.prototype.cb=function(){return 2==this.o.Gd};f.prototype.Ak=function(e,a){this.wb(this.zd()+
e);a&&(this.fov.d=e)};f.prototype.Li=function(e,a){if(!isNaN(e)){var b=e/90*Math.cos(Math.min(this.fov.m,90)*Math.PI/360);b=this.fov.m*Math.exp(b);this.wb(b);a&&(this.fov.d=e)}};f.prototype.jm=function(e,a){this.ma();isNaN(e)||(this.pan.m=e);isNaN(a)||(this.u.m=a);this.update()};f.prototype.Ip=function(e,a,b){this.ma();!isNaN(e)&&1E7>e&&-1E7<e&&(this.pan.m=e);!isNaN(a)&&1E7>a&&-1E7<a&&(this.u.m=a);!isNaN(b)&&1E7>b&&-1E7<b&&(this.W.m=b);this.update()};f.prototype.vg=function(e,a,b){this.ma();isNaN(e)||
(this.pan.m=e);isNaN(a)||(this.u.m=a);isNaN(b)||this.wb(b);this.update()};f.prototype.zp=function(){this.vg(this.pan.Fa,this.u.Fa,this.fov.Fa)};f.prototype.pb=function(e,a,b){var c=a?Number(a):0;if(0!=e&&4!=e&&12!=e&&9!=e)this.o.Rc("Unsupported projection type: "+e);else if(a&&0!==c&&4!==c&&12!==c&&9!==c)this.o.Rc("Unsupported projection2 type: "+c);else if(e==c&&(c=0),this.ap=b?Number(b):1,this.Fj!=e||this.Ll!=c)this.Fj=e,this.Ll=c,this.qa.mj()};f.prototype.Z=function(){return 0==this.Fj?4:this.Fj};
f.prototype.Dc=function(){return this.Ll};f.prototype.zh=function(){return this.bp};f.prototype.ej=function(){return this.ap};f.prototype.aspect=function(){return this.o.D.width/this.o.D.height};f.prototype.Do=function(){return 4==this.Z()&&0==this.Dc()};f.prototype.Kb=function(e,a){e||(e=this.fov.m);a||(a=this.Z());return this.Pf(a,1/this.In(this.o.D),e)};f.prototype.Pf=function(e,a,b){return this.cb()?a*b:4==e?360*Math.atan(a*Math.tan(b/2*Math.PI/180))/Math.PI:9==e?720*Math.atan(a*Math.tan(b/4*
Math.PI/180))/Math.PI:a*b};f.prototype.al=function(e,a){e||(e=this.Kb());a||(a=this.Z());return this.Pf(a,this.aspect(),e)};f.prototype.$k=function(e,a){e||(e=this.Kb());a||(a=this.Z());var b=this.aspect();b=Math.sqrt(1+b*b);return this.Pf(a,b,e)};f.prototype.fn=function(e){var a;a||(a=this.Z());return this.Pf(a,this.In(this.o.D),e)};f.prototype.In=function(e){var a=1;switch(this.fov.mode){case 0:a=1;break;case 1:a=e.width/e.height;break;case 2:a=Math.sqrt(e.width*e.width+e.height*e.height)/e.height;
break;case 3:a=4*e.height/3>e.width?1:3*e.width/(4*e.height)}return a};f.prototype.mi=function(e){this.wb(this.fn(e))};f.prototype.fm=function(e){var a=this.Z(),b=1/this.aspect();this.mi(this.Pf(a,b,e))};f.prototype.cm=function(e){var a=this.Z(),b=this.aspect();b=1/Math.sqrt(1+b*b);this.mi(this.Pf(a,b,e))};f.prototype.Ze=function(){if(!this.o.he){var e=this.Ol;e.pan=this.pan.m;e.u=this.u.m;e.fov=this.fov.m;this.Nf(e);this.Nf(e);this.Nf(e);this.pan.m=e.pan;this.u.m=e.u;this.fov.m!=e.fov&&(this.fov.m=
e.fov)}};f.prototype.Nf=function(e){var a=this.aspect();var b=this.o.D;var c=this.o,m=c.v;if(this.cb()){if(0<this.fov.Th){var h=this.Oe;this.M.levels&&0<this.M.levels.length&&(h=this.M.levels[0].height);10<h&&(this.fov.min=100*b.height/(h*this.fov.Th))}h=e.fov/2;b=h*a;var n=this.M.width/this.M.height*50;a=c.J.xp?2*Math.min(50,n/a):2*Math.max(50,n/a);e.fov<this.fov.min&&(e.fov=this.fov.min);e.fov>a&&(e.fov=a);50<h?e.u=0:(50<e.u+h&&(e.u=50-h),-50>e.u-h&&(e.u=-50+h));b>n?e.pan=0:(e.pan+b>n&&(e.pan=n-
b,c.v.active&&(c.v.speed=-c.v.speed,this.pan.d=0)),e.pan-b<-n&&(e.pan=-n+b,m.active&&(m.speed=-m.speed,this.pan.d=0)))}else{0<this.fov.Th&&(h=this.Oe,this.M.levels&&0<this.M.levels.length&&(h=this.M.levels[0].height),10<h&&(this.fov.min=360*Math.atan2(b.height/2,h/2*this.fov.Th)/Math.PI));e.fov<this.fov.min&&(e.fov=this.fov.min);n=this.fov.max;var q=179;h=this.Kb()/2;b=a*h;4==this.Z()?b=180*Math.atan(a*Math.tan(h*Math.PI/180))/Math.PI:9==this.Z()?(n=this.fov.Hl,q=355):12==this.Z()&&(n=this.fov.Gl,
q=360);c.na||(n=Math.max(160,n));e.fov>n&&(e.fov=n);12==this.Z()&&(2*b>q&&(e.fov=q/a),h=this.Kb()/2,2*h>q&&(e.fov=q),h=this.Kb()/2,b=a*h);2*h>this.u.max-this.u.min&&180>this.u.max-this.u.min&&(h=(this.u.max-this.u.min)/2,e.fov=this.fn(2*h));90>this.u.max?e.u+h>this.u.max&&(e.u=this.u.max-h):e.u>this.u.max&&(e.u=this.u.max);-90<this.u.min?e.u-h<this.u.min&&(e.u=this.u.min+h):e.u<this.u.min&&(e.u=this.u.min);c=this.pan.max-this.pan.min;359.99>c&&(e.pan<this.pan.min&&e.pan+360<this.pan.max&&(e.pan+=
360),this.pan.m>this.pan.max&&e.pan-360>this.pan.min&&(e.pan-=360),a=90,n=Math.tan(h*Math.PI/180),q=Math.tan((Math.abs(e.u)+h)*Math.PI/180),q=Math.sqrt(q*q+1)/Math.sqrt(n*n+1),h=180*Math.atan(q*Math.tan(b*Math.PI/180))/Math.PI,2*h>c&&(q=Math.tan(c*Math.PI/360)/Math.tan(b*Math.PI/180),c=q*Math.sqrt(n*n+1),q=Math.sqrt(c*c-1),a=180/Math.PI*Math.atan(q)),e.pan+h>this.pan.max&&(e.pan=this.pan.max-h,m.active&&(m.speed=-m.speed,this.pan.d=0)),e.pan-h<this.pan.min&&(e.pan=this.pan.min+h,m.active&&(m.speed=
-m.speed,this.pan.d=0)),e.u+b>a&&(e.u=a-b),e.u-b<-a&&(e.u=-a+b))}};f.prototype.Fg=function(e,a,b,c,m){var h=this.M.Dl-1-a,n=this.M.El,q="x";switch(e){case 0:q="f";break;case 1:q="r";break;case 2:q="b";break;case 3:q="l";break;case 4:q="u";break;case 5:q="d";break;case "vr":q="vr"}m&&(e+="l",q+="l");m=this.o.rp;for(var r=0;3>r;r++)n=m(n,"c",e),n=m(n,"s",q),n=m(n,"r",a),n=m(n,"l",h),n=m(n,"x",b),n=m(n,"y",c),n=m(n,"v",c),n=m(n,"h",b);return this.o.jb(n)};f.prototype.qs=function(e,a,b){b.fx=e.width/
this.M.V*a.vh;b.fy=e.height/this.M.V*a.wh;b.Ed=e.width/this.M.V*a.Qh;b.Fd=e.height/this.M.V*a.Rh;b.fx=Math.min(Math.max(0,Math.floor(b.fx)),e.Y-1);b.fy=Math.min(Math.max(0,Math.floor(b.fy)),e.ra-1);b.Ed=Math.min(Math.max(0,Math.floor(b.Ed)),e.Y-1);b.Fd=Math.min(Math.max(0,Math.floor(b.Fd)),e.ra-1)};f.prototype.Yu=function(){if(!(6>this.cube.Xf.length))for(var e=0;6>e;e++){var a=this.cube.Xf[e];var b=[];b.push(new y.Ra(-1,-1,-1,0,0));b.push(new y.Ra(1,-1,-1,1,0));b.push(new y.Ra(1,1,-1,1,1));b.push(new y.Ra(-1,
1,-1,0,1));for(var c=0;4>c;c++)4>e?b[c].Ma(-Math.PI/2*e):b[c].Ia(Math.PI/2*(4==e?-1:1)),this.Va&&(b[c].vb(this.Va.W*Math.PI/180),b[c].Ia(-this.Va.pitch*Math.PI/180)),b[c].zf(-this.pan.m),b[c].Zd(this.u.m),b[c].Af(this.W.m);b=this.o.Ek(b);a.jc=0<b.length;if(a.jc){a=a.$h;a.vh=b[0].Jd;a.Qh=b[0].Jd;a.wh=b[0].Yb;a.Rh=b[0].Yb;for(c=1;c<b.length;c++)a.vh=Math.min(a.vh,b[c].Jd),a.Qh=Math.max(a.Qh,b[c].Jd),a.wh=Math.min(a.wh,b[c].Yb),a.Rh=Math.max(a.Rh,b[c].Yb);a.Di=a.Qh-a.vh;a.lk=a.Rh-a.wh;a.scale=Math.max(a.Di,
a.lk)}else a.$h.Di=-1,a.$h.lk=-1}};f.prototype.Po=function(){for(var e=0;e<this.M.levels.length;e++){var a=this.M.levels[e],b;for(b in a.Ka)a.Ka.hasOwnProperty(b)&&(a.Ka[b].visible=!1)}};f.prototype.Gn=function(){var e=0,a=this.o.D,b=Math.tan(Math.min(this.Kb(),175)*Math.PI/360),c=a.height/(2*b);c*=1+a.width/a.height*b/2;for(c*=Math.pow(2,1<this.o.devicePixelRatio?this.M.Oo:this.M.No);this.M.levels.length>=e+2&&!this.M.levels[e+1].xf&&this.M.levels[e+1].width>c;)e++;return e};f.prototype.Ct=function(){if(this.o.J.wp&&
this.o.J.Vd){var e=this.Ol;e.pan=this.pan.m;e.u=this.u.m;e.fov=this.fov.m;this.Nf(e);this.Nf(e);this.Nf(e);var a=e.pan-this.pan.m,b=e.u-this.u.m;e=e.fov-this.fov.m;if(0!=a||0!=b||0!=e){var c=.2+.9*Math.min((Math.abs(a)+Math.abs(b)+Math.abs(e))/Math.abs(Math.min(this.fov.m,90))*.3,1);this.pan.m+=a*c;this.u.m+=b*c;this.fov.m+=e*c;this.o.ka.$l=.3;this.update()}else this.o.ka.$l=0}else this.Ze();if(isNaN(this.pan.m)||1E7<this.pan.m||-1E7>this.pan.m)this.pan.m=0;if(isNaN(this.u.m)||1E7<this.u.m||-1E7>
this.u.m)this.u.m=0;if(isNaN(this.W.m)||1E7<this.W.m||-1E7>this.W.m)this.W.m=0;if(!this.cb()){for(;360<this.pan.m;)this.pan.m-=360;for(;-360>this.pan.m;)this.pan.m+=360}};return f}();y.Aq=v})(ggP2VR||(ggP2VR={}));var U=!1;
(function(y){var x=function(){return function(){this.fov=this.u=this.pan=0}}(),v=function(){return function(){this.pn=-1E7;this.wo=!1}}(),f=function(){function e(a,b){this.Ws="VHJpYWwgTGljZW5zZTogRm9yIGV2YWx1YXRpb24gb25seSE=";this.L=new y.Aq(this);this.pan=this.L.pan;this.u=this.L.u;this.W=this.L.W;this.ic=this.L.ic;this.fov=this.L.fov;this.Gd=0;this.Va=this.L.Va;this.D={width:10,height:10};this.Mk=new y.Ra;this.crossOrigin="anonymous";this.Sd=this.Gf=0;this.ed=1;this.rq={};this.Bg=this.Bd=!1;this.Oa={};this.ci=this.kh="";this.Pl=[];this.zl=
!1;this.ia={start:{x:0,y:0},oa:{x:0,y:0},Wd:{x:0,y:0},m:{x:0,y:0},ha:{x:0,y:0}};this.T={Tc:!1,gd:!1,oj:function(){return this.gd||this.Tc},Hn:0,startTime:0,start:{x:0,y:0},oa:{x:0,y:0},Wd:{x:0,y:0},m:{x:0,y:0},ha:{x:0,y:0},ai:!1,Cg:null};this.df=this.se=!0;this.ka={enabled:!0,oa:{x:0,y:0},ha:{x:0,y:0},$l:0,fov:{active:!1,hc:0,center:{enabled:!1,x:0,y:0}}};this.lb={alpha:0,beta:0,gamma:0,orientation:0,uf:0,hi:!0,fadeIn:0};this.Ch={alpha:0,beta:0,gamma:0,orientation:0};this.A={src:[],Ye:4,width:640,
height:480,Qc:!1,jg:!1,Uj:!0,qm:!1,level:1,re:"loop",Xj:"",j:null,xm:!1,texture:null,hk:null,vi:null,lj:null,format:1,Bh:0,flipY:1,ib:function(){return 0},bm:function(){},loop:function(){return!1}};this.rj=0;this.control=this.Ga=this.$=this.Bc=this.Za=this.da=null;this.sd=[];this.qb=!1;this.mh=1;this.sa=null;this.je=this.Se=this.kf=!1;this.Yg=0;this.Md=.02;this.tk=0;this.uk=!1;this.sk=this.Hi=this.Zg=this.Re=this.$m=0;this.Ym=-1;this.rc="";this.Yl=this.Je=!1;this.Zh=0;this.ih=[];this.Kk="";this.jh=
[];this.Gg=this.Oe=1;this.tg=!1;this.v={enabled:!1,timeout:5,active:!1,Ag:!1,speed:.4,ak:0,vo:!1,Bj:0,Xo:!0,pg:"",Wo:!1,Og:!1,Yc:!1,Ii:"",mn:!1,Nd:"Animation01",Jf:!1,yj:!1,tm:!1,startTime:0,kd:0,uh:!1,Ri:!1,uj:0,Dd:0,Mh:0,Nh:0,Lh:0,Ko:0};this.F={active:!1,aborted:!1,speed:.1,pan:0,u:0,W:0,fov:70,ui:70,Mh:0,Nh:0,Lo:0,Lh:0,nb:0,di:0,Cl:0,Hm:!1,og:!1,Xm:0,Wm:0,kj:!1};this.ik=null;this.rf={pan:-1,u:-1,fov:-1};this.Bl=0;this.Ei=this.fa=null;this.Pg={};this.Qg={};this.Ff={};this.mb={};this.Ea={};this.pe=
[];this.Zm={};this.mc={};this.Sc={};this.mg={};this.R={mode:1,Al:-1,Da:0,hb:0,rd:.05,cc:255,bc:1,ac:255,$b:.3,ye:!0,Zj:{enabled:!0,width:180,height:20,$j:0,Yj:1,background:!0,ac:16777215,$b:1,cc:0,bc:1,wk:3,Ki:1,mk:!0},wc:[],Kc:[],pd:[],Sj:[]};this.Ca=null;this.K=[];this.Op=!1;this.X=[];this.U=[];this.Ua=[];this.Pb=[];this.Qe=[];this.Xa=[];this.va=[];this.Cf=[];this.Td=this.Uc=!1;this.oi=-1;this.aa=1;this.qa=this.Ge=this.Qb=this.fc=null;this.qh={};this.Nb={};this.Yp=this.Dg="";this.Xp=-1;this.ga=
null;this.xt={target:0,current:0,rd:.01,delay:2,Rk:0,Si:!1,Sq:!1};this.margin={left:0,top:0,right:0,bottom:0};this.J={Ph:!1,Xs:!1,lc:!1,Ce:!1,Vd:!0,zo:!1,pm:1,wp:!1,Hf:!0,Ok:!0,gh:!0,hh:!0,Pi:!1,gg:!1,xp:!0,sensitivity:8};this.Sh=[];this.nh=!0;this.ba={x:0,y:0};this.Ci=this.Lg=this.Kg=this.he=this.na=!1;this.gk=this.dv=!0;this.pl=!1;this.te=!0;this.Mg=this.ml=this.ol=!1;this.mq=!0;this.rl=!1;this.yb=this.me="";this.Sb="transition";this.xd="transform";this.Rf="perspective";this.pr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYBgeACDAAADIAAE3iTbkAAAAAElFTkSuQmCC";
this.zb={width:0,height:0};this.Mn=new y.Ra;this.Ln=new y.Ra;this.Nn=new y.Ra;this.On=new y.Ra;this.Kn=new y.Ra;this.Cd=!1;this.Wb=this.Jo=this.pa="";this.jk=[];this.Jl=[];this.Hh=this.Ao=this.Fh=this.Bo=this.wl=this.jd=this.Eo=this.ul=this.am=this.Gc=this.pj=this.hg=this.vl=this.Co=this.xl=this.Go=this.kl=!1;this.Bi=!0;this.Mj=this.nj=!1;this.Dh=[15,0,0];this.devicePixelRatio=1;this.ea=this.C=null;this.dh=!1;this.Wa=null;this.Ba={enabled:!1,speed:1,running:!1,finished:!0,wd:{pan:0,u:0,fov:0,nb:0,
lq:!1}};this.Il=!1;this.wj="<<LOG>>";this.Gm=!1;this.fh=function(m,h){if(0==m.length)return m;var n;var q=[];var r=h.Jj(m[0])-0;for(n=0;n<m.length;n++){var t=n;var w=n+1;w==m.length&&(w=0);var z=h.Jj(m[w])-0;if(0<=r&&0<=z)q.push(m[t]);else if(0<=r||0<=z){var C=z/(z-r);0>C&&(C=0);1<C&&(C=1);var E=new y.Ra;E.Ud(m[t],m[w],C);0>r||q.push(m[t]);q.push(E)}r=z}return q};this.Ol=new x;this.om=0;this.fi="";this.sc=!1;this.tj=-1;this.Xr=function(m){return m?this.Gh()&&(m.clientX||m.clientY)?{x:m.clientX,y:m.clientY}:
m.pageX||m.pageY?{x:m.pageX,y:m.pageY}:m.clientX||m.clientY?{x:m.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:m.clientY+document.body.scrollTop+document.documentElement.scrollTop}:m.touches&&m.touches[0]?{x:m.touches[0].pageX,y:m.touches[0].pageY}:{x:0,y:0}:{x:0,y:0}};this.bg=function(m){m=this.Xr(m);var h=this.hf();return{x:m.x-h.x,y:m.y-h.y}};this.Aj=1;this.Yi=this.Ho=this.Sk=this.Ul=this.Kj=0;this.Io=!1;this.yd=!0;this.nn=[5,0,0];this.bb=new y.Fi(this);this.bb.ye=!1;this.yn();
if(7<this.wj.length){var c=e.lh("bG9n");window[e.lh("Y29uc29sZQ==")][c](e.wn(this.wj))}this.Ke(this.bb);this.checkLoaded=this.sd;this.isLoaded=!1;b&&b.hasOwnProperty("webGLFlags")&&b.webGLFlags&&(this.rq=b.webGLFlags);this.ma(!1);this.eb=new y.wq(this);this.sn(a);this.Rq();this.userdata=this.Pg=this.Wf();this.emptyHotspot=this.bb;this.mouse=this.ba;this.C=new y.xq(this);this.Wa=new y.yq(this);this.qa=new y.Fq(this);this.L.qa=this.qa;this.Aa=new y.Gq(this);this.Xb()}e.prototype.po=function(a){return-99991===
a?this.Ws:"7.0.12/20035"};e.prototype.zr=function(){return this.ed};e.prototype.Ut=function(a){0<a&&(this.ed=a)};e.prototype.Wg=function(a){if(""!=a)try{var b=void 0;b="object"===typeof a?a:JSON.parse(a);if("object"===typeof b)for(var c in b)if("translations"==c&&this.Oa.hasOwnProperty("translations")){var m=b[c],h;for(h in m)if(this.Oa.translations.hasOwnProperty(h))for(a=0;a<m[h].length-1;a++)""!=m[h][a]&&(this.Oa.translations[h][a]=m[h][a]);else this.Oa.translations[h]=m[h]}else this.Oa[c]=
b[c];this.Oa.hasOwnProperty("projectLanguage")&&(this.ci=this.Oa.projectLanguage);this.I("languagechanged",{language:this.kh})}catch(n){console.error(n)}};e.prototype.Sa=function(a,b){var c=a;if(""!=c&&"object"===typeof this.Oa&&this.Oa.hasOwnProperty("languages")&&this.Oa.hasOwnProperty("translations")){var m=this.Oa.languages.indexOf(this.kh);-1!=m&&this.Oa.translations.hasOwnProperty(a)&&(a=this.Oa.translations[a],Array.isArray(a)&&a.length>m&&""!=a[m]&&(c=a[m]))}if(b&&0<b.length)for(m=b.length-
1;0<=m;m--)c=c.replace(new RegExp("%"+String(m+1),"g"),b[m]);return c};e.prototype.hm=function(a){this.zl=!0;a=a.replace("_","-");if("object"===typeof this.Oa&&this.Oa.hasOwnProperty("languages")&&this.Oa.hasOwnProperty("translations")&&this.ci!=a){for(var b=-1,c=-1,m="",h=-1,n=-1,q=a.substring(0,2).toUpperCase(),r=0;r<this.Oa.languages.length;r++)if(this.Oa.languages[r].toUpperCase()==a.toUpperCase()){b=r;break}else if(!this.ci.toUpperCase().startsWith(q)&&this.Oa.languages[r].toUpperCase().startsWith(q)){if(""==
m||-1!=m.indexOf("-"))c=r,m=this.Oa.languages[r]}else for(var t=window.navigator.languages,w=0;w<t.length;w++)!this.ci.toUpperCase().startsWith(q)&&this.Oa.languages[r].toUpperCase().startsWith(t[w].substring(0,2).toUpperCase())&&(-1==n||w<n)&&(h=r,n=w);a=-1!=b?b:-1!=c?c:h;a=-1!=a?this.Oa.languages[a]:this.ci}this.kh!=a&&(this.kh=a,this.Xq(),this.Yq(),this.$.setAttribute("lang",a),this.I("languagechanged",{language:a}))};e.prototype.Or=function(){return this.kh};e.prototype.ms=function(){return this.Pl};
e.prototype.Jk=function(){this.C.enabled=this.ea.enabled;this.C.type=this.ea.type;this.C.ca=this.ea.zoomin;this.C.cd=this.ea.zoomout;this.C.$g=this.ea.blendtime;this.C.Tg=this.ea.zoomoutpause;this.C.qk=this.ea.zoomfov;this.C.nk=this.ea.zoomafterinfov;this.C.pk=this.ea.zoomafteroutfov;this.C.Ug=this.ea.zoomspeed;this.C.Kf=this.ea.blendcolor;this.C.Wc=this.ea.softedge;this.ea=null};e.prototype.ou=function(a){this.ea={};this.ea.enabled=!0;this.ea.type=this.C.type;this.ea.zoomin=this.C.ca;this.ea.zoomout=
this.C.cd;this.ea.blendtime=this.C.$g;this.ea.zoomoutpause=this.C.Tg;this.ea.zoomfov=this.C.qk;this.ea.zoomafterinfov=this.C.nk;this.ea.zoomafteroutfov=this.C.pk;this.ea.zoomspeed=this.C.Ug;this.ea.blendcolor=this.C.Kf;this.ea.softedge=this.C.Wc;if(a.hasOwnProperty("type")){var b=a.type;if("cut"==b||"crossdissolve"==b||"diptocolor"==b||"irisround"==b||"irisroundcenter"==b||"irisrectangular"==b||"irisrectangularcenter"==b||"wipeleftright"==b||"wiperightleft"==b||"wipetopbottom"==b||"wipebottomtop"==
b||"wiperandom"==b)this.ea.type=b}a.hasOwnProperty("before")&&(b=Number(a.before),0==b||2==b)&&(this.ea.zoomin=b);a.hasOwnProperty("after")&&(b=Number(a.after),0==b||2==b||3==b||4==b)&&(this.ea.zoomout=b);a.hasOwnProperty("transitiontime")&&(b=Number(a.transitiontime),0<=b&&50>=b&&(this.ea.blendtime=b));a.hasOwnProperty("waitfortransition")&&(this.ea.zoomoutpause=1==a.waitfortransition);a.hasOwnProperty("zoomedfov")&&(b=Number(a.zoomedfov),.01<=b&&50>=b&&(this.ea.zoomfov=b));a.hasOwnProperty("zoomafterinfov")&&
(b=Number(a.zoomafterinfov),70<=b&&120>=b&&(this.ea.zoomafterinfov=b));a.hasOwnProperty("zoomafteroutoutfov")&&(b=Number(a.zoomafteroutfov),.01<=b&&70>=b&&(this.ea.zoomafteroutfov=b));a.hasOwnProperty("zoomspeed")&&(b=Number(a.zoomspeed),.01<=b&&99>=b&&(this.ea.zoomspeed=b));a.hasOwnProperty("dipcolor")&&(this.ea.blendcolor=a.dipcolor);a.hasOwnProperty("softedge")&&(a=Number(a.softedge),0<=a&&1E3>=a&&(this.ea.softedge=a));this.dh||this.Jk()};e.prototype.pb=function(a,b,c){this.L.pb(a,b,c)};e.prototype.Z=
function(){return this.L.Z()};e.prototype.zh=function(){return this.L.zh()};e.prototype.Dc=function(){return this.L.Dc()};e.prototype.ej=function(){return this.L.ej()};e.prototype.Bk=function(a,b){if(0!=a&&4!=a&&12!=a&&9!=a)this.Rc("Unsupported projection type: "+a);else if(this.na||0==a||4==a||this.Rc("Projection changes require WebGL!"),this.Z()!=a){var c={};c.pan=this.pan.m;c.tilt=this.u.m;c.fov=this.fov.m;c.projection=a;c.timingFunction=3;c.speed=b;a=this.xh(a);c.fov=Math.min(a,c.fov);this.zj(c)}};
e.prototype.addListener=function(a,b){(this.qh[a]=this.qh[a]||[]).push(b)};e.prototype.I=function(a,b){if(a=this.qh[a])for(var c=a.length,m=0;m<c;m++)try{a[m].apply(null,[b])}catch(h){this.Rc(h)}};e.prototype.removeEventListener=function(a,b){var c=this.qh[a];if(c){var m;var h=0;for(m=c.length;h<m;h++)if(c[h]===b){1===m?delete this.qh[a]:c.splice(h,1);break}}};e.prototype.Nt=function(){this.qb=!0};e.prototype.Bs=function(){return this.S};e.prototype.Mq=function(a,b,c,m){if(!this.Nb.hasOwnProperty(a)){var h=
new v;this.Nb[a]=h;h.type=b;"undefined"!==typeof c&&this.Le(a,c);"object"===typeof m&&this.Jp(a,m);return!0}return!1};e.Vn=function(a){var b=document.cookie.indexOf(a+"="),c="";-1!=b&&(b=b+a.length+1,a=document.cookie.indexOf(";",b),-1==a&&(a=document.cookie.length),c=decodeURIComponent(document.cookie.substring(b,a)));return c};e.ru=function(a,b){0==a.type?a.value="string"===typeof b?b:b.toString():1==a.type?a.value="string"===typeof b?parseFloat(b):"number"===typeof b?b:b?1:0:2==a.type&&(a.value=
"string"===typeof b?"false"!==b&&""!==b&&"0"!==b:"number"===typeof b?0!=b:!!b)};e.prototype.Jp=function(a,b){if(this.Nb.hasOwnProperty(a)&&"object"===typeof b){var c=this.Nb[a];b.hasOwnProperty("cookiePath")&&(c.qn=String(b.cookiePath));b.hasOwnProperty("cookieExpireDays")&&(c.pn=parseFloat(b.cookieExpireDays));if(b.hasOwnProperty("keep")&&(c.yl=!!b.keep,c.yl&&0<document.cookie.length))if(""!=this.Dg){if(-1!=document.cookie.indexOf(this.Dg+"=")){var m=JSON.parse(y.Zb.Vn(this.Dg));m.hasOwnProperty(a)&&
this.Le(a,m[a])}}else m="ggvar_"+a,-1!=document.cookie.indexOf(m+"=")&&(m=y.Zb.Vn(m),this.Le(a,m));b.hasOwnProperty("ignoreInState")&&(c.wo=b.ignoreInState);b.hasOwnProperty("customProperty")&&"object"===typeof b.customProperty&&(b=b.customProperty,this.Ea.hasOwnProperty(a)?(this.Ea[a].variabletype!=b.variableType||this.Ea[a].propertytype!=b.propertyType)&&console.log("Custom property added as variable has different types than custom property from project."):this.Ea[a]={Kd:b.variableType,ei:b.propertyType,
Qk:b.defaultValue});return!0}return!1};e.prototype.nu=function(a,b){this.Dg=a;b&&"object"===typeof b&&(b.hasOwnProperty("cookiePath")&&(this.Yp=String(b.cookiePath)),b.hasOwnProperty("cookieExpireDays")&&(this.Xp=parseFloat(b.cookieExpireDays)))};e.an=function(a,b,c){-1<=b&&(a+="; max-age="+86400*b);""!=c&&(a+="; path="+c);return a};e.Wn=function(a,b){switch(b){case 0:return a;case 1:return a.toString();case 2:return a?"true":"false"}};e.Zk=function(a,b){switch(b){case 0:return a;case 1:return Number(a);
case 2:return"true"==a}};e.prototype.Le=function(a,b,c){void 0===c&&(c=!0);if(void 0===b)return!1;var m=!1;this.Ea.hasOwnProperty(a)&&(0==this.Ea[a].ei?(this.Hp(this.pa,a,b),m=!0):1==this.Ea[a].ei&&this.O&&(this.gm(this.pa,this.O.id,a,b),m=!0));if(this.Nb.hasOwnProperty(a)){var h=this.Nb[a];if(h.value!=b){y.Zb.ru(h,b);if(h.yl&&c){if(""!=this.Dg){h={};for(var n=0,q=Object.keys(this.Nb);n<q.length;n++)c=q[n],this.Nb[c].yl&&(h[c]=encodeURIComponent(this.Nb[c].value.toString()));c=this.Dg+"="+JSON.stringify(h);
c=y.Zb.an(c,this.Xp,this.Yp)}else c="ggvar_"+a+"="+encodeURIComponent(b.toString()),c=y.Zb.an(c,h.pn,h.qn?h.qn:"");document.cookie=c}m||this.I("varchanged_"+a,{value:b})}return!0}return!1};e.prototype.gj=function(a,b){return 0==b?this.Sa(a):a};e.prototype.il=function(a,b){void 0===b&&(b="");if(this.Ea.hasOwnProperty(a)){if(0==this.Ea[a].ei)return this.ho(this.pa,a);if(1==this.Ea[a].ei){if(""!=b||this.O&&this.O!=this.bb)return this.bl(this.pa,""!=b?b:this.O.id,a);switch(this.Ea[a].Kd){case 0:return"";
case 1:return 0;case 2:return!1}}}if(this.Nb.hasOwnProperty(a))return this.gj(this.Nb[a].value,this.Nb[a].type)};e.lh=function(a){var b="",c=0;a=a.replace(/[^A-Za-z0-9+\/=]/g,"");do{var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(c++));var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(c++));var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(c++));var q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(c++));
m=m<<2|h>>4;h=(h&15)<<4|n>>2;var r=(n&3)<<6|q;b+=String.fromCharCode(m);64!=n&&(b+=String.fromCharCode(h));64!=q&&(b+=String.fromCharCode(r))}while(c<a.length);return b};e.Ku=function(a){for(var b=[1,1,1,1,2,2,3,0],c=a.length,m="",h=0;h<c;){var n=a.charCodeAt(h++);if(n&128){var q=b[n>>3&7];if(!(n&64&&q)||h+q>c)return null;for(n&=63>>q;0<q;--q){var r=a.charCodeAt(h++);if(128!=(r&192))return null;n=n<<6|r&63}}m+=String.fromCharCode(n)}return m};e.wn=function(a){return e.Ku(e.lh(a))};e.prototype.yn=
function(){this.devicePixelRatio=window.devicePixelRatio||1;this.Go=!!navigator.userAgent.match(/(Windows|Win)/g);this.xl=!!navigator.userAgent.match(/(Mac|Macintosh|Mac_powerpc)/g)&&!navigator.userAgent.match(/(like Mac)/g);this.Co=!!navigator.userAgent.match(/(Linux|Ubuntu)/g);this.vl=!!navigator.userAgent.match(/(MSIE)/g);this.hg=!!navigator.userAgent.match(/(Edge|EdgA|Edg)/g);this.pj=!!navigator.userAgent.match(/(Firefox)/g);if(this.Gc=!!navigator.userAgent.match(/(Safari)/g)){var a=navigator.userAgent.indexOf("Safari");
this.Vc=navigator.userAgent.substring(a+7);a=navigator.userAgent.indexOf("Version");-1!=a&&(this.Vc=navigator.userAgent.substring(a+8));this.Vc=this.Vc.substring(0,this.Vc.indexOf(" "));this.Vc=this.Vc.substring(0,this.Vc.indexOf("."));this.am=!0}this.Eo=!!navigator.userAgent.match(/(SamsungBrowser)/g);if(this.ul=!!navigator.userAgent.match(/(Chrome|CriOS)/g))this.Gc=!1;this.jd=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g);this.wl=!!navigator.userAgent.match(/(iPad)/g)||this.xl&&2<navigator.maxTouchPoints;
this.Bo=!!navigator.userAgent.match(/(iPhone|iPod)/g);this.Fh=!!navigator.userAgent.match(/(android)/i);this.Ao=!!navigator.userAgent.match(/(IEMobile)/i);this.Hh=this.jd||this.Fh||this.Ao||this.wl;navigator.platform&&/iP(hone|od|ad)/.test(navigator.platform)&&(a=navigator.appVersion)&&(a=a.match(/OS (\d+)_(\d+)_?(\d+)?/))&&3<a.length&&(this.Dh=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||"0",10)]);this.nj=!window.requestAnimationFrame;a=["Webkit","Moz","O","ms","Ms"];this.yb="";this.Sb="transition";
this.xd="transform";this.Rf="perspective";for(var b=0;b<a.length;b++)"undefined"!==typeof document.documentElement.style[a[b]+"Transform"]&&(this.yb="-"+a[b].toLowerCase()+"-",this.Sb=a[b]+"Transition",this.xd=a[b]+"Transform",this.Rf=a[b]+"Perspective");this.pl=p();this.na=Q();this.Kg=this.pl;this.na&&(this.Kg=!1);this.Je=!0;this.Yl=!1;if(this.jd||this.Fh)this.Fp(80),this.L.ym=2;this.Rc("Pano2VR player "+this.po()+" - Prefix:  "+this.yb+", "+(this.pl?"CSS 3D available":"CSS 3D not available")+", "+
(this.na?"WebGL available":"WebGL not available"));U&&this.G("Pano2VR Debug version!");this.fr();this.Bi=this.Bo?this.Gc&&this.am&&10<=Number(this.Vc)?!0:!1:!0};e.prototype.fr=function(){if(!this.ga){this.G("Create Audio Context!");try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.ga=new AudioContext}catch(a){this.ga=null}this.Gc&&(!this.am||9>Number(this.Vc))&&(this.ga=null);this.Gc&&!this.jd&&12<=Number(this.Vc)&&13>Number(this.Vc)&&(this.ga=null);this.Gc&&this.jd&&13==
Number(this.Dh[0])&&(1==Number(this.Dh[1])||2<=Number(this.Dh[1]))&&(this.ga=null)}};e.prototype.G=function(a){if(U){var b=document.getElementById("gg_debug");b&&(b.innerHTML=a.toString()+"<br />");window.console&&window.console.log(a)}};e.prototype.Mm=function(a){if(U){var b=document.getElementById("gg_debug");b&&(b.innerHTML=a.toString()+"<br />");window.console&&window.console.warn(a)}};e.prototype.Rc=function(a){var b=document.getElementById("gg_debug");b&&(b.innerHTML=a+"<br />");window.console&&
window.console.log(a)};e.prototype.Fp=function(a){this.L.ng=a};e.prototype.setCrossOrigin=function(a){this.crossOrigin=a};e.prototype.Yt=function(a){this.ze=a};e.prototype.gs=function(){return this.Zh};e.prototype.Wt=function(a){this.me=a};e.prototype.Un=function(){return this.me};e.prototype.dl=function(){return this.Hh};e.prototype.Yn=function(){return this.rl};e.prototype.Nr=function(){return this.Cd};e.prototype.ds=function(){return this.Cd?this.fo().length:1};e.prototype.Kr=function(){return this.v.active};
e.prototype.$t=function(a){this.Hh=!!a};e.prototype.aj=function(){return this.isLoaded};e.prototype.Mr=function(){return!this.isLoaded};e.prototype.ff=function(){return Number(this.D.height)/(2*Math.tan(Math.PI/180*(this.Kb()/2)))};e.prototype.Kp=function(a,b){try{this.isFullscreen&&(a=window.innerWidth,b=window.innerHeight);var c=a-this.margin.left-this.margin.right,m=b-this.margin.top-this.margin.bottom;if(!(10>c||10>m)){var h=window.devicePixelRatio||1;this.tg&&(h=1);this.da.style.width=c+"px";
this.da.style.height=m+"px";this.da.style.left=this.margin.left+"px";this.da.style.top=this.margin.top+"px";if(this.na)try{this.Za&&(this.Za.style.position="absolute",this.Za.style.display="inline",this.Za.style.width=c+"px",this.Za.style.height=m+"px",this.Za.width=c*h,this.Za.height=m*h),this.S&&(this.zb.width=c*h,this.zb.height=m*h,this.S.viewport(0,0,this.S.drawingBufferWidth,this.S.drawingBufferHeight))}catch(r){alert(r)}this.Bc&&(this.Bc.style.width=a+"px",this.Bc.style.height=b+"px",this.Bc.width=
a,this.Bc.height=b);this.Ga&&(this.Ga.style.width=a+"px",this.Ga.style.height=b+"px",this.sa&&this.sa!=this.Ga&&(this.sa.style.width=a+"px",this.sa.style.height=b+"px"));this.kf&&(this.qb=!0);var n=this.da.offsetWidth,q=this.da.offsetHeight;if(this.D.width!=n||this.D.height!=q)this.D.width=n,this.D.height=q;this.cv();this.sa&&this.sa.ggUpdateSize&&this.sa.ggUpdateSize(a,b);this.I("sizechanged",{w:a,h:b});this.I("playerstatechanged",{})}}catch(r){this.Mm(r)}};e.prototype.ge=function(){this.Gm=!0};
e.prototype.Xb=function(){this.Kp(this.fc.offsetWidth,this.fc.offsetHeight)};e.prototype.As=function(){var a={width:0,height:0};a.width=this.D.width;a.height=this.D.height;return a};e.prototype.hf=function(){var a={x:0,y:0},b=this.da.getBoundingClientRect();a.x=b.left;a.y=b.top;this.Gc&&14>Number(this.Vc)&&(a.x=b.left+window.scrollX,a.y=b.top+window.scrollY);return a};e.prototype.mu=function(a){this.fa=a};e.prototype.au=function(a,b,c,m){this.margin.left=a;this.margin.top=b;this.margin.right=c;this.margin.bottom=
m;this.fa=this.skinObj;this.Ei=this.vrSkinObj;this.ge()};e.prototype.ar=function(a){0==a&&(this.J.Vd=!1);1==a&&(this.J.Vd=!0);2==a&&(this.J.Vd=!this.J.Vd);this.I("viewmodechanged",{});this.I("playerstatechanged",{})};e.prototype.ys=function(){return 1==this.J.Vd?1:0};e.prototype.jn=function(a,b){this.R.mode=1==b&&0<this.R.mode?0:Math.round(a);this.update();this.I("polymodechanged",{})};e.prototype.rh=function(a){var b=[];a="#"==a.substr(0,1)?a.substr(1):"^"+a+"$";a=new RegExp(a,"");for(var c=0;c<
this.K.length;c++)"poly"==this.K[c].type&&a.test(this.K[c].id)&&b.push(this.K[c]);return b};e.prototype.Mp=function(a){a=this.rh(a);for(var b=0;b<a.length;b++){var c=this.R.wc.indexOf(a[b].id);-1==c?(this.R.wc.push(a[b].id),this.R.Kc.push(0),this.R.pd.push(1)):this.R.pd[c]=1}this.update()};e.prototype.to=function(a){a=this.rh(a);for(var b=0;b<a.length;b++){var c=this.R.wc.indexOf(a[b].id);-1!=c&&(this.R.pd[c]=0,this.R.Sj.push(a[b].id),this.update())}};e.prototype.Pu=function(a){a=this.rh(a);for(var b=
0;b<a.length;b++){var c=this.R.wc.indexOf(a[b].id);-1==c||-1!=c&&0==this.R.pd[c]?this.Mp(a[b].id):this.to(a[b].id);this.update()}};e.prototype.$q=function(a,b,c,m,h){var n=""==a?this.K:this.rh(a);for(var q=0;q<n.length;q++){var r=n[q];"poly"==r.type&&(r.ac=b,r.$b=c,r.cc=m,r.bc=h)}""==a&&(this.R.ac=b,this.R.$b=c,this.R.cc=m,this.R.bc=h);this.update()};e.prototype.du=function(a,b){var c=""==a?this.K:this.rh(a);for(var m=0;m<c.length;m++){var h=c[m];"poly"==h.type&&(h.ye=b)}""==a&&(this.R.ye=b);this.update()};
e.prototype.Zq=function(a){this.eb&&(this.eb.lm=0==a?!0:1==a?!1:!this.eb.lm,this.update())};e.prototype.ks=function(){return this.R.mode};e.prototype.br=function(){this.I("viewstatechanged",{})};e.prototype.zs=function(){return 0};e.prototype.Ur=function(a){return"_firstmap"==a?"web":"_firstfloorplan"==a?"file":(a=this.mc[a])?a.type:"web"};e.prototype.Tr=function(a){"_firstmap"==a?a=this.Xn():"_firstfloorplan"==a&&(a=this.$i());return(a=this.mc[a])?a:{}};e.prototype.Xn=function(){var a="",b;for(b in this.mc){var c=
this.mc[b];"web"==c.type&&1E4>c.index&&(a=b)}return a};e.prototype.$i=function(){var a="",b;for(b in this.mc){var c=this.mc[b];"file"==c.type&&1E4>c.index&&(a=b)}return a};e.prototype.$r=function(a,b){"_firstfloorplan"==b&&(b=this.$i());var c=[];a||(a=this.pa);var m=this.pe[a];m&&(a=m);""===a&&0<Object.keys(this.Sc).length&&(a=Object.keys(this.Sc)[0]);this.Sc[a]&&this.Sc[a][b]&&(c.push(this.Sc[a][b].y),c.push(this.Sc[a][b].x));return c};e.prototype.bs=function(a,b){"_firstfloorplan"==b&&(b=this.$i());
var c=[];a||(a=this.pa);var m=this.pe[a];m&&(a=m);""===a&&0<Object.keys(this.Sc).length&&(a=Object.keys(this.Sc)[0]);this.mg[a]&&this.mg[a][b]&&(c.push(this.mg[a][b].x),c.push(this.mg[a][b].y));return c};e.prototype.bo=function(a){var b=this.pe[a];b&&(a=b);b=this.ao();for(var c=[],m=0;m<b.length;m++)this.Sc[a][b[m]]&&c.push(b[m]);return c};e.prototype.Sr=function(a){a=this.bo(a);return 0<a.length?a[0]:""};e.prototype.ao=function(){var a=[],b;for(b in this.mc)a.push(b);return a};e.prototype.Er=function(){var a=
[],b;for(b in this.mc)"file"==this.mc[b].type&&a.push(b);return a};e.prototype.Ls=function(){for(var a in this.mc)if("web"==this.mc[a].type)return!0;return!1};e.prototype.Ks=function(){for(var a in this.mc)if("file"==this.mc[a].type)return!0;return!1};e.prototype.rp=function(a,b,c){var m=(new RegExp("%0*"+b,"i")).exec(a.toString());if(m){m=m.toString();var h=c.toString();m.charAt(m.length-1)!=b&&(h=(1+c).toString());if(!isNaN(parseFloat(c)))for(;h.length<m.length-1;)h="0"+h;a=a.replace(m,h)}return a};
e.prototype.Ps=function(a,b,c){a=Math.atan2(a+1,c);var m=Math.atan2(b+1,c);b=Math.sin(a);c=Math.sin(m);a=Math.cos(a);m=Math.cos(m);this.Mn.init(0,0,-1);this.Ln.init(a,0,-b);this.Nn.init(-a,0,-b);this.On.init(0,m,-c);this.Kn.init(0,-m,-c)};e.prototype.Ek=function(a){a=this.fh(a,this.Mn);a=this.fh(a,this.Ln);a=this.fh(a,this.Nn);a=this.fh(a,this.On);return a=this.fh(a,this.Kn)};e.prototype.iq=function(a){if(!this.Je&&this.Vs!=a){this.Vs=a;var b=this.margin.left+this.D.width/2+"px ";b+=this.margin.top+
this.D.height/2+"px ";this.Ga.style[this.Rf]=a+"px";this.Ga.style[this.Rf+"Origin"]=b;this.da.style[this.Rf]=a+"px";this.da.style[this.Rf+"Origin"]=b}};e.prototype.bl=function(a,b,c){""!==a||this.Cd||(a="node1");a||(a=this.pa);return this.mb.hasOwnProperty(a)&&this.mb[a].hasOwnProperty(b)&&this.mb[a][b].hasOwnProperty(c)?this.gj(y.Zb.Zk(this.mb[a][b][c],this.Ea[c].Kd),this.Ea[c].Kd):this.Ea.hasOwnProperty(c)?this.gj(y.Zb.Zk(this.Ea[c].Qk,this.Ea[c].Kd),this.Ea[c].Kd):null};e.prototype.gm=function(a,
b,c,m){""!==a||this.Cd||(a="node1");a||(a=this.pa);m="string"===typeof m?m:y.Zb.Wn(m,this.Ea[c].Kd);this.mb.hasOwnProperty(a)||(this.mb[a]={});this.mb[a].hasOwnProperty(b)||(this.mb[a][b]={});this.mb[a][b].hasOwnProperty(c)&&this.mb[a][b][c]==m||(this.mb[a][b][c]=m,this.I("varchanged_"+c,{}))};e.prototype.Dr=function(a){return this.Ea.hasOwnProperty(a)?this.Ea[a].Qk:null};e.prototype.Zn=function(){return this.C.fe||this.C.Id||this.na&&(4!=this.Z()||0!=this.Dc())?!1:!0};e.prototype.Cm=function(){var a=
new y.Ra(0,0,-100),b=this.ff(),c=this.L.M;var m=100/this.fov.m;var h=c.width/c.height;c=this.D.height*m*h;m*=this.D.height;for(var n=this.Zn(),q=0;q<this.K.length;q++){var r=this.K[q];if("point"==r.type){var t=!1;if(this.cb()){var w=(this.pan.m-r.pan)/100/h*c;var z=(this.u.m-r.u)/100*m;Math.abs(w)<this.D.width/2+500&&Math.abs(z)<this.D.height/2+500&&(t=!0)}else a.init(0,0,-100),a.Ia(-r.u*Math.PI/180),a.Ma(r.pan*Math.PI/180),a.Ma(-this.pan.m*Math.PI/180),a.Ia(this.u.m*Math.PI/180),a.vb(this.W.m*Math.PI/
180),.01>a.z?(z=-b/a.z,w=a.x*z,z*=a.y,Math.abs(w)<this.D.width/2+5E3&&Math.abs(z)<this.D.height/2+5E3&&(t=!0)):z=w=-1E4;r.Jc=w+this.D.width/2;r.uc=z+this.D.height/2;r.Ql=r.Jc/this.D.width*100;r.Rl=r.uc/this.D.height*100;r.visible=t;r.px=r.Jc;r.py=r.uc;r.pxp=r.Ql;r.pyp=r.Rl;r.visible=r.visible;if(r.j&&r.j.onUpdatePosition)r.j.onUpdatePosition(this,r);else r.j&&r.j.__div&&("none"!=r.j.__div.style[this.Sb]&&(r.j.__div.style[this.Sb]="none"),t&&n?(r.j.ggUse3d?(this.Je||this.iq(b),this.cb()?(r.j.__div.style[this.xd]=
"scale("+(100/this.fov.m*500/r.j.gg3dDistance).toFixed(10)+")",r.j.__div.style.left=this.margin.left+w+this.D.width/2+"px",r.j.__div.style.top=this.margin.top+z+this.D.height/2+"px"):(r.j.__div.style.width="1px",r.j.__div.style.height="1px",w="",this.Je&&(w+="perspective("+b+"px) "),w+="translate3d(0px,0px,"+b+"px) ",w+="rotateZ("+this.W.m.toFixed(10)+"deg) ",w+="rotateX("+this.u.m.toFixed(10)+"deg) ",w+="rotateY("+(-this.pan.m).toFixed(10)+"deg) ",w+="rotateY("+r.pan.toFixed(10)+"deg) ",w+="rotateX("+
(-r.u).toFixed(10)+"deg) ",w+="translate3d(0px,0px,"+(-1*r.j.gg3dDistance).toFixed(10)+"px) ",r.j.__div.style[this.xd+"Origin"]="0% 0%",r.j.__div.style[this.xd]=w,r.j.__div.style.left=this.margin.left+this.D.width/2+"px",r.j.__div.style.top=this.margin.top+this.D.height/2+"px")):this.Op?(r.j.__div.style.left=this.margin.left+this.D.width/2+"px",r.j.__div.style.top=this.margin.top+this.D.height/2+"px",r.j.__div.style[this.xd]="translate3d(0px,0px,-1000px) rotateY(0.1deg) translate3d("+w+"px,"+z+"px, 0.5px)",
r.j.__div.style["transform-style"]="preserve-3d"):(r.j.__div.style.left=this.margin.left+w+this.D.width/2+"px",r.j.__div.style.top=this.margin.top+z+this.D.height/2+"px"),r.j.__div.ggVisible&&(r.j.__div.style.visibility="visible")):(r.j.ggUse3d&&(r.j.__div.style[this.xd]=""),r.j.__div.style.left="-1000px",r.j.__div.style.top="-1000px",r.j.__div.style.visibility="hidden"))}if("poly"==r.type){var C=[];if(this.cb())for(r.rg=[],t=0;t<r.vertices.length;t++)z=r.vertices[t],w=(this.pan.m-z.pan)/100/h*c,
z=(this.u.m-z.u)/100*m,w+=this.margin.left+this.D.width/2,z+=this.margin.top+this.D.height/2,r.rg.push({Jc:w,uc:z});else{for(t=0;t<r.vertices.length;t++)z=r.vertices[t],a.init(0,0,-100),a.Ia(-z.u*Math.PI/180),a.Ma(z.pan*Math.PI/180),a.Ma(-this.pan.m*Math.PI/180),a.Ia(this.u.m*Math.PI/180),a.vb(this.W.m*Math.PI/180),C.push(a.clone());C=this.Ek(C);if(0<C.length)for(t=0;t<C.length;t++)a=C[t],.1>a.z?(z=-b/a.z,w=this.D.width/2+a.x*z,z=this.D.height/2+a.y*z):z=w=0,a.Jc=w,a.uc=z;r.rg=C}}}this.I("hotspotsupdated",
{})};e.prototype.Cr=function(){for(var a=[],b=0;b<this.K.length;b++){var c=this.K[b];"point"==c.type&&c.j&&c.j.__div&&a.push(c.j.__div)}return a};e.prototype.Ab=function(a,b){a=Number(a);isNaN(b)&&(b=0);0>b&&(b=0);1<b&&(b=1);return"rgba("+(a>>16&255)+","+(a>>8&255)+","+(a&255)+","+b+")"};e.uo=function(a,b,c){var m,h=!1;var n=0;for(m=a.length-1;n<a.length;m=n++){var q=a[n];m=a[m];q.uc>c!=m.uc>c&&b<(m.Jc-q.Jc)*(c-q.uc)/(m.uc-q.uc)+q.Jc&&(h=!h)}return h};e.prototype.Oi=function(a,b){var c=-1;if((0<=
this.R.mode||0<this.R.wc.length)&&this.Do())for(var m=0;m<this.K.length;m++){var h=this.K[m];"poly"==h.type&&h.rg&&0<h.rg.length&&(-1!=this.R.mode||-1!=this.R.wc.indexOf(h.id))&&y.Zb.uo(h.rg,a,b)&&(c=m,h.Jc=a,h.uc=b)}return 0<=c?this.K[c]:!1};e.prototype.Do=function(){return 4==this.Z()&&0==this.Dc()};e.prototype.aspect=function(){return this.D.width/this.D.height};e.prototype.Ze=function(){this.L.Ze()};e.prototype.update=function(a){void 0===a&&(a=0);this.qb=!0;a&&(this.mh=Math.max(1*a,this.mh))};
e.prototype.$n=function(){return 0<this.L.wi||0<this.L.ee};e.prototype.Ai=function(){var a=Date.now();if(this.cb())this.Cm(),this.na&&(this.qa.Zu(),this.qa.cp());else if(0===this.Gd)if(!this.na||4==this.Z()&&0==this.Dc()){var b=this.ff();this.Ps(this.D.width/2,this.D.height/2,b);this.Cm();this.Ci?this.qa.bv():this.dv&&this.kq();this.Dm();this.na?(this.A.Qc?14==this.A.format?this.qa.av():this.qa.sq():0<this.L.M.levels.length?this.qa.jv():this.qa.lv(),this.qa.cp()):this.Lg&&this.Wu();this.eb&&this.eb.yt()}else this.qa.sq(),
this.Cm(),this.Ms();b=Date.now();50<b-a?(this.G("Time between frames: "+(b-a)),this.tg||(2<this.om?(this.tg=!0,this.G("disabling HighDPI rendering"),this.Xb()):this.om++)):this.om=0;this.kf&&this.L.M.qp++;this.na&&(a=this.S,a.disable(a.BLEND),a.disable(a.STENCIL_TEST),a.disable(a.DEPTH_TEST),a.disable(a.CULL_FACE))};e.prototype.Wu=function(){this.Ze();var a;this.Bc&&(a=this.Bc.getContext("2d"));if(this.D.width!==this.da.offsetWidth||this.D.height!==this.da.offsetHeight)this.D.width=this.da.offsetWidth,
this.D.height=this.da.offsetHeight;if(a){var b=a.canvas.width/2,c=a.canvas.height/2,m=a.createRadialGradient(b,c,5,b,c,Math.max(b,c));m.addColorStop(0,"#333");m.addColorStop(1,"#fff");a.rect(0,0,a.canvas.width,a.canvas.height);a.fillStyle=m;a.fill();a.fillStyle="#f00";a.font="20px Helvetica";a.textAlign="center";a.fillText("Pan: "+this.pan.m.toFixed(1),b,c-60);a.fillText("Tilt: "+this.u.m.toFixed(1),b,c-30);a.fillText("Fov: "+this.fov.m.toFixed(1),b,c+0);a.fillText("Node: "+this.Zi(),b,c+30);a.fillText("Title: "+
this.Pg.title,b,c+60)}};e.prototype.fu=function(a){a=Math.round(a);this.Je=0<(a&1);this.Yl=0<(a&2);this.gk=0<(a&4);this.tg=0<(a&8);4096<=a&&(this.Kg=0<(a&4096),this.na=0<(a&8192),this.Lg=0<(a&32768))};e.prototype.ns=function(){var a=0;this.Je&&(a|=1);this.Yl&&(a|=2);this.gk&&(a|=4);this.Kg&&(a|=4096);this.na&&(a|=8192);this.Lg&&(a|=32768);return a};e.prototype.Dm=function(){var a=Math.round(this.ff());this.Je||this.iq(a);for(var b=0;b<this.Ua.length;b++){var c=this.Ua[b];c.Em(a);c.j.hidden=!1}for(b=
0;b<this.Pb.length;b++)c=this.Pb[b],c.Em(a),c.j.hidden=!1};e.prototype.kq=function(){for(var a=Math.round(this.ff()),b=0;b<this.U.length;b++){var c=this.U[b];c.nd||(c.Em(a),c.j.hidden=!1)}};e.prototype.Ms=function(){for(var a=0;a<this.Ua.length;a++){var b=this.Ua[a];b.Bf(!1)}for(a=0;a<this.U.length;a++)b=this.U[a],b.nd||b.Bf(!1);for(a=0;a<this.Pb.length;a++)b=this.Pb[a],b.Bf(!1)};e.prototype.cv=function(){try{for(var a=0;a<this.hj();a++){var b=this.jl(a);b.nd||b.ge()}}catch(c){this.Mm(c)}};e.prototype.Pc=
function(a){this.te=!1;try{this.Za=a?a:document.createElement("canvas");var b=this.fc.offsetWidth-this.margin.left-this.margin.right,c=this.fc.offsetHeight-this.margin.top-this.margin.bottom;if(100>b||100>c)c=b=100;var m=window.devicePixelRatio||1;this.tg&&(m=1);this.da.style.width=b+"px";this.da.style.height=c+"px";this.Za.style.width=b+"px";this.Za.style.height=c+"px";this.Za.width=b*m;this.Za.height=c*m;this.Za.style.display="none";this.Za.style.touchAction="none";this.da.insertBefore(this.Za,
this.da.firstChild);var h=this.rq;h.stencil=!0;h.depth=!0;h.powerPreference="high-performance";h.alpha=this.Gc?!0:!1;this.jd&&10<=this.Dh[0]&&(h.antialias=!1,h.alpha=!1);a={};a.flags=h;a.canvas=this.Za;this.I("beforewebglcontext",a);this.S=this.Za.getContext("webgl",h);this.S||(this.S=this.Za.getContext("experimental-webgl",h));if(this.S){var n=this.S;this.zb.width=b*m;this.zb.height=c*m;n.clearColor(0,0,0,0);n.enable(this.S.DEPTH_TEST);n.viewport(0,0,500,500);n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT);
4096<=n.getParameter(n.MAX_TEXTURE_SIZE)&&!this.Hh&&(this.L.ng=1<m?4*this.L.ng:2*this.L.ng);this.G("Max tile cnt: "+this.L.ng);this.qa.Eh();this.qa.mj();this.qa.xo(this.Gg);this.qa.yo();this.C&&(this.C.Eh(),this.C.Pc());this.eb&&(this.eb.Eh(),this.eb.Pc())}}catch(q){this.G(q)}this.S?(this.na=!0,this.I("webglready",{gl:this.S})):alert("Could not initialise WebGL!")};e.prototype.eu=function(a){this.fi=a};e.prototype.getQueryParameter=function(){return this.fi};e.prototype.jb=function(a){if(a){if("{"==
a.charAt(0)||"/"==a.charAt(0)||0<a.indexOf(":"))return a;""!=this.fi&&(a=-1==a.indexOf("?")?a+("?"+this.fi):a+("&"+this.fi));return this.me+a}return this.me};e.prototype.gf=function(){return this.pan.m};e.prototype.fs=function(){return this.F.pan};e.prototype.cj=function(){return this.L.cj()};e.prototype.Rd=function(){return this.L.Rd()};e.prototype.cb=function(){return this.L.cb()};e.prototype.$d=function(a){this.ma(!1);isNaN(a)||(this.pan.m=Number(a));this.update()};e.prototype.Rj=function(a){this.ma(!1);
isNaN(a)||(this.pan.m=Number(a)+this.pan.Cj);this.update()};e.prototype.Mi=function(a,b){isNaN(a)||(this.$d(this.gf()+a),b&&(this.pan.d=a))};e.prototype.hn=function(a,b){this.Mi(a*this.ef(),b)};e.prototype.cg=function(){return this.u.m};e.prototype.rs=function(){return this.F.u};e.prototype.ae=function(a){this.ma(!1);isNaN(a)||(this.u.m=Number(a));this.update()};e.prototype.Ni=function(a,b){this.ae(this.cg()+a);b&&(this.u.d=a)};e.prototype.kn=function(a,b){this.Ni(a*this.ef(),b)};e.prototype.wg=function(a){this.L.wg(a)};
e.prototype.fj=function(){return this.L.fj()};e.prototype.zd=function(){return this.L.zd()};e.prototype.Kb=function(){return this.L.Kb()};e.prototype.al=function(a,b){return this.L.al(a,b)};e.prototype.$k=function(a,b){return this.L.$k(a,b)};e.prototype.Fr=function(){return this.F.ui};e.prototype.wb=function(a){return this.L.wb(a)};e.prototype.em=function(a){this.L.em(a)};e.prototype.mi=function(a){this.L.mi(a)};e.prototype.fm=function(a){this.L.fm(a)};e.prototype.cm=function(a){this.L.cm(a)};e.prototype.dm=
function(a,b){if(120<this.zd())this.wb(a);else{var c=this.dj(b.x,b.y,!0);if(this.wb(a)){b=this.dj(b.x,b.y,!0);a=c.pan-b.pan;b=c.tilt-b.tilt;if(15<Math.abs(a)||10<Math.abs(b))b=a=0;a=this.cb()?-a:a*Math.cos(c.tilt*Math.PI/180);this.pan.Rb-=a;this.u.Rb+=b;this.jm(this.pan.m-a,this.u.m+b)}}};e.prototype.Ak=function(a,b){return this.wb(this.zd()+a)?(b&&(this.fov.d=a),!0):!1};e.prototype.Wq=function(a,b){this.dm(this.zd()+a,b)};e.prototype.Li=function(a,b){if(!isNaN(a)){var c=a/90*Math.cos(Math.min(this.fov.m,
90)*Math.PI/360);c=this.fov.m*Math.exp(c);this.wb(c);b&&(this.fov.d=a)}};e.prototype.gn=function(a,b,c){if(!isNaN(a)){var m=a/90*Math.cos(Math.min(this.fov.m,90)*Math.PI/360);m=this.fov.m*Math.exp(m);this.dm(m,b);c&&(this.fov.d=a,this.fov.Mc.enabled=!0,this.fov.Mc.x=b.x,this.fov.Mc.y=b.y)}};e.prototype.jm=function(a,b){this.ma(!1);isNaN(a)||(this.pan.m=a);isNaN(b)||(this.u.m=b);this.update()};e.prototype.Ip=function(a,b,c){this.ma(!1);!isNaN(a)&&1E7>a&&-1E7<a&&(this.pan.m=a);!isNaN(b)&&1E7>b&&-1E7<
b&&(this.u.m=b);!isNaN(c)&&1E7>c&&-1E7<c&&(this.W.m=c);this.update()};e.prototype.vg=function(a,b,c){this.ma(!1);isNaN(a)||(this.pan.m=a);isNaN(b)||(this.u.m=b);isNaN(c)||this.wb(c);this.update()};e.prototype.zp=function(){this.vg(this.pan.Fa,this.u.Fa,this.fov.Fa)};e.prototype.setLocked=function(a){this.Dp(a);this.Ep(a);this.Cp(a)};e.prototype.Dp=function(a){this.J.lc=!!a};e.prototype.Cp=function(a){this.J.Ph=!!a};e.prototype.Rr=function(){return this.J.Ph};e.prototype.Ep=function(a){this.J.Ce=!!a};
e.prototype.Jr=function(){return this.ka.enabled};e.prototype.Zt=function(a){var b=this.ka;a&&(b.ha.x=0,b.ha.y=0);b.enabled=!!a};e.prototype.Cs=function(){return this.J.Hf};e.prototype.uu=function(a){this.J.Hf=a};e.prototype.Pj=function(a){this.sc=!!a};e.prototype.Gr=function(){return this.ql()?!0:this.ml};e.prototype.pu=function(a,b){void 0===b&&(b=!0);this.mq=b;this.Mg==!a&&(a&&this.ql()?this.sp():((this.Mg=!!a)?this.lb.hi=!0:this.W.m=0,this.I("gyrochanged",{}),this.I("playerstatechanged",{})))};
e.prototype.ql=function(){return window.hasOwnProperty("DeviceOrientationEvent")&&DeviceOrientationEvent.hasOwnProperty("requestPermission")&&"function"===typeof DeviceOrientationEvent.requestPermission?!0:!1};e.prototype.sp=function(){var a=this;if(this.ql())try{DeviceOrientationEvent.requestPermission().then(function(b){"granted"===b&&(a.lb.hi=!0,a.Mg=!0,a.I("gyrochanged",{}),a.I("playerstatechanged",{}))})["catch"](console.error)}catch(b){console.log(b)}};e.prototype.ss=function(){return this.Mg};
e.prototype.es=function(){return this.Fh?5:this.wl?6:this.jd?4:this.Go?1:this.xl?2:this.Co?3:0};e.prototype.Ar=function(){return this.vl?5:this.hg?4:this.pj?2:this.Gc?3:this.ul?1:0};e.prototype.Br=function(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?1:0};e.prototype.moveTo=function(a,b,c,m,h,n){this.ma(!1);if("_blank"!==a&&""!==a){this.F.active=!0;this.F.aborted=!1;this.F.Hm=!1;var q=a.toString().split("/");1<q.length&&(a=Number(q[0]),m=Number(b),b=Number(q[1]),
2<q.length&&(c=Number(q[2])));this.F.pan=isNaN(a)?this.pan.m:Number(a);this.F.u=isNaN(b)?this.u.m:Number(b);this.F.fov=!isNaN(c)&&0<c&&180>c?Number(c):this.fov.m;this.F.speed=!isNaN(m)&&0<m?Number(m):1;this.F.W=isNaN(h)?this.W.m:Number(h);void 0!==n?!a||4!=n&&12!=n&&9!=n||(this.F.nb=n):this.F.nb=this.Z()}};e.prototype.zj=function(a){this.ma(!1);var b=0,c=0,m=70,h=4,n=0,q=1;a.hasOwnProperty("pan")&&(b=Number(a.pan),this.F.pan=b);a.hasOwnProperty("tilt")&&(c=Number(a.tilt),this.F.u=c);a.hasOwnProperty("fov")&&
(m=Number(a.fov),this.F.fov=m);a.hasOwnProperty("projection")&&(h=Number(a.projection),this.F.nb=h);a.hasOwnProperty("timingFunction")&&(n=Number(a.timingFunction));a.hasOwnProperty("speed")&&(q=Number(a.speed));0>=q?(this.vg(b,c,m),this.pb(h)):(a=new y.Om,a.$a="__AutoMove",a.Ne=this.cj(),a.si=this.u.m,a.be=this.fov.m,a.ri=this.Z(),a.Hd=b,a.de=c,a.Eg=m,a.ce=h,a.Sf=!1,a.bf=!1,a.cf=!1,0==n&&(a.bf=!0),1==n&&(a.Sf=!0,a.bf=!0),2==n&&(a.cf=!0),a.speed=q,this.F.Wm=this.P,this.P=this.Pn(a),this.F.Xm=(new Date).getTime(),
this.F.Hm=!0,this.F.active=!0,this.F.aborted=!1,this.F.pan=b,this.F.u=c,this.F.fov=m,this.je=!1)};e.prototype.ft=function(a){this.moveTo(this.pan.Fa,this.u.Fa,this.fov.Fa,a)};e.prototype.gt=function(a,b){var c={};c.pan=this.pan.Fa;c.tilt=this.u.Fa;c.fov=this.fov.Fa;c.projection=this.zh();c.timingFunction=b;c.speed=a;this.zj(c)};e.prototype.Jq=function(a,b,c,m){var h=new y.Fi(this);h.type="point";h.pan=b;h.u=c;h.id=a;h.j={};h.j.player=this;h.Vf();h.j.hotspot=h;h.j.__div=document.createElement("div");
h.j.__div.appendChild(m);this.K.push(h);h.j.__div.style.position="absolute";h.j.__div.style.left="-1000px";h.j.__div.style.top="-1000px";h.j.__div.ggVisible=!0;this.Ga.insertBefore(h.j.__div,this.Ga.firstChild);this.qb=!0};e.prototype.Xu=function(a,b,c){for(var m=0;m<this.K.length;m++){var h=this.K[m];h.id==a&&(h.pan=b,h.u=c,h.Vf())}this.qb=!0};e.prototype.Lt=function(a){for(var b=-1,c,m=0;m<this.K.length;m++)c=this.K[m],c.id==a&&(b=m);-1<b&&(c=this.K.splice(b,1).pop(),c.j&&c.j.__div&&this.Ga.removeChild(c.j.__div))};
e.prototype.js=function(){for(var a=[],b=0;b<this.K.length;b++){var c=this.K[b];"point"==c.type&&a.push(String(c.id))}return a};e.prototype.Ir=function(a){for(var b=0;b<this.K.length;b++){var c=this.K[b];if(c.id==a)return b={},b.id=a,b.pan=c.pan,b.tilt=c.u,b.pxp=c.Ql,b.pyp=c.Rl,b.url=c.url,b.target=c.target,b.distance=c.distance,b.title=c.title,b.description=c.description,b.skinid=c.nm,c.fd&&(b.customimage=c.fd,b.customimagewidth=c.af,b.customimageheight=c.ud,b.use3D=c.Ef,b.distance3D=c.Ti),c.j&&
c.j.__div&&(b.div=c.j.__div),b}};e.prototype.pq=function(a,b){this.ia.start.x=a;this.ia.start.y=b;this.ia.oa.x=a;this.ia.oa.y=b;this.ka.oa.x=a;this.ka.oa.y=b;this.Ul++;this.pan.Rb=this.pan.m;this.u.Rb=this.u.m};e.prototype.nq=function(a,b){var c=this.Kb();this.pan.Rb+=a*c/this.D.height;this.u.Rb+=b*c/this.D.height;this.pan.m=this.pan.Rb;this.u.m=this.u.Rb};e.prototype.oq=function(a,b){this.ia.m.x=a;this.ia.m.y=b;this.ia.ha.x=this.ia.m.x-this.ia.oa.x;this.ia.ha.y=this.ia.m.y-this.ia.oa.y;this.J.Vd&&
(this.ia.oa.x=this.ia.m.x,this.ia.oa.y=this.ia.m.y,this.update())};e.prototype.ma=function(a){this.v.active&&(this.v.active=!1,this.I("autorotatechanged",{}),this.pan.d=0,this.u.d=0,this.fov.d=0,this.fov.Mc.enabled=!1);this.F.active&&(this.F.active=!1,this.pan.d=0,this.u.d=0,this.fov.d=0,this.fov.Mc.enabled=!1);this.Se=this.F.aborted=!1;this.v.yj=!1;this.Md=.02;this.Yg=0;this.v.Yc&&(this.v.enabled=this.v.Jf,a&&(this.v.Yc=this.v.Og));this.kg=(new Date).getTime()};e.prototype.Pr=function(){return this.kg};
e.prototype.jo=function(a,b){a||(a=this.ba.x,b=this.ba.y);var c=this.D.height/(2*Math.tan(this.Kb()*Math.PI/360));a-=this.D.width/2;b-=this.D.height/2;var m={};m.pan=180*Math.atan(a/c)/Math.PI;m.tilt=180*Math.atan(-b/Math.sqrt(a*a+c*c))/Math.PI;return m};e.prototype.dj=function(a,b,c){a||(a=this.ba.x,b=this.ba.y);if(this.cb()){var m=this.fov.m/this.D.height;a=-(a-this.D.width/2)*m+this.pan.m;b=-(b-this.D.height/2)*m+this.u.m}else{m=new y.Ra(0,0,1);b=this.jo(a,b);m.Zd(-b.tilt);m.zf(b.pan);m.Zd(-this.u.m);
m.zf(-this.pan.m);c||(m.Zd(-this.Va.pitch),m.Af(this.Va.W));for(a=m.Pq()-180;-180>a;)a+=360;b=m.Qq()}m={};m.pan=a;m.tilt=b;return m};e.prototype.Fc=function(a){return a==this.control||a&&void 0!==a.ggPermeableMap&&1==a.ggPermeableMap?!0:a&&void 0!==a.ggPermeable&&0==a.ggPermeable?!1:a&&a.ggType&&("container"==a.ggType||"cloner"==a.ggType||"timer"==a.ggType)?!0:!1};e.prototype.Ck=function(a,b){var c=this.ff(),m,h;for(m=0;m<this.hj();m++){var n=this.jl(m);if(n.La)return n}for(m=0;m<this.hj();m++)if(n=
this.jl(m),!n.nd){var q=[],r=new y.Ra,t;var w=h=void 0;0<n.fov&&(h=Math.tan(n.fov/2*Math.PI/180),w=0<n.kc?h*n.Nc/n.kc:h,n.Ec&&1!=n.Ec&&(w*=n.Ec));for(t=0;4>t;t++){switch(t){case 0:r.init(-h,-w,0);break;case 1:r.init(h,-w,0);break;case 2:r.init(h,w,0);break;case 3:r.init(-h,w,0)}r.Ia(n.Ia*Math.PI/180);r.Ma(-n.Ma*Math.PI/180);r.vb(n.vb*Math.PI/180);--r.z;r.Ia(-n.u*Math.PI/180);r.Ma(n.pan*Math.PI/180);r.Ma(-this.pan.m*Math.PI/180);r.Ia(this.u.m*Math.PI/180);r.vb(this.W.m*Math.PI/180);q.push(r.clone())}q=
this.Ek(q);if(0<q.length){for(t=0;t<q.length;t++)r=q[t],.1>r.z?(w=-c/r.z,h=this.D.width/2+r.x*w,w=this.D.height/2+r.y*w):w=h=0,r.Jc=h,r.uc=w;if(y.Zb.uo(q,a,b))return n}}return null};e.prototype.hj=function(){return this.U.length+this.Ua.length+this.Pb.length};e.prototype.jl=function(a){return a<this.U.length?this.U[a]:a<this.U.length+this.Ua.length?this.Ua[a-this.U.length]:this.Pb[a-(this.U.length+this.Ua.length)]};e.prototype.Gh=function(){return document.webkitIsFullScreen||document.mozFullScreen||
document.msFullscreenElement&&null!=document.msFullscreenElement||document.fullScreen};e.prototype.et=function(a){this.jq(a);window.focus();if(this.vd)this.vd.onclick();(this.se||this.df&&this.hg)&&7>this.ed&&this.$f();this.Qb=null;if(!this.J.lc&&!this.sc){a=a?a:window.event;if(a.which||0==a.which||1==a.which){var b=(new Date).getTime();if(this.Ge){this.Qb=this.Ge;this.T.Tc=!0;this.T.startTime=b;a.stopPropagation();return}if(this.Fc(a.target)){var c;if((c=this.Ck(this.ba.x,this.ba.y))&&c.we&&(this.Qb=
c,void 0!==c.code&&""!==c.code&&c.jc))return;this.pq(a.pageX,a.pageY);this.T.Tc=!0;this.T.startTime=b;a.preventDefault();this.ma(!0)}}this.ia.ha.x=0;this.ia.ha.y=0}};e.prototype.Jg=function(a,b,c){var m=this.R.Zj;m.enabled&&(this.O!=this.bb&&0<=a&&0<=b&&""!=this.O.title?(this.Ca.innerHTML=this.Sa(this.O.title),this.Ca.style.color=this.Ab(m.$j,m.Yj),this.Ca.style.backgroundColor=m.background?this.Ab(m.ac,m.$b):"transparent",this.Ca.style.border="solid "+this.Ab(m.cc,m.bc)+" "+m.Ki+"px",this.Ca.style.borderRadius=
m.wk+"px",this.Ca.style.textAlign="center",0<m.width?(this.Ca.style.left=a-m.width/2+this.margin.left+"px",this.Ca.style.width=m.width+"px"):(this.Ca.style.width="auto",this.Ca.style.left=a-this.Ca.offsetWidth/2+this.margin.left+"px"),this.Ca.style.height=0<m.height?m.height+"px":"auto",this.Ca.style.top=b+(c?-60:25)+this.margin.top+"px",this.Ca.style.visibility="inherit",this.Ca.style.overflow="hidden"):(this.Ca.style.visibility="hidden",this.Ca.innerHTML=""))};e.prototype.jq=function(a){var b=this.hf();
this.Gh()?(this.ba.x=a.clientX-this.margin.left,this.ba.y=a.clientY-this.margin.top):(this.ba.x=a.clientX-b.x,this.ba.y=a.clientY-b.y)};e.prototype.Ke=function(a){if("string"==typeof a)for(var b=0;b<this.K.length;b++)if(this.K[b].id==a){a=this.K[b];break}this.O=a&&null!==a&&"object"==typeof a?a:this.bb;this.O==this.bb&&(a=this.Oi(this.ba.x,this.ba.y))&&(a.hb=0);this.O.Vf&&this.O.Vf();this.hotspot=this.O;this.I("activehotspotchanged",{hotspot:this.O})};e.prototype.dt=function(a){a=a?a:window.event;
this.jq(a);if(!this.J.lc&&!this.sc&&!this.Ge){this.v.active&&(this.v.uj=(new Date).getTime());0==a.buttons&&(this.T.Tc=!1);this.T.Tc&&(a.preventDefault(),(a.which||0==a.which||1==a.which)&&this.oq(a.pageX,a.pageY),this.ma(!0));var b=!1;if(this.O==this.bb||"poly"==this.O.type){var c=this.bb;0<this.K.length&&this.Fc(a.target)&&(c=this.Oi(this.ba.x,this.ba.y));this.Nj(c);this.Jg(this.ba.x,this.ba.y,!1);0!=c&&c!=this.bb&&(b=!0)}c=null;!b&&this.Fc(a.target)&&(c=this.Ck(this.ba.x,this.ba.y));this.v.Ri&&
(this.v.Ri=!1);this.Ga.style.cursor=this.O!=this.bb&&this.O.ye&&b||c&&c.fg?"pointer":"default"}};e.prototype.Nj=function(a){!1===a&&(a=this.bb);this.O!=a&&(this.O!=this.bb&&(0<this.R.mode&&(this.O.hb=0),this.fa&&this.fa.hotspotProxyOut&&this.fa.hotspotProxyOut(this.O.id,this.O.url),this.I("hsproxyout",{id:this.O.id,url:this.O.url})),a!=this.bb?(this.Ke(a),this.fa&&this.fa.hotspotProxyOver&&this.fa.hotspotProxyOver(this.O.id,this.O.url),this.I("hsproxyover",{id:this.O.id,url:this.O.url}),0<this.R.mode&&
(this.R.hb=1,this.O.hb=1)):(this.Ke(this.bb),0<this.R.mode&&(this.R.hb=0)))};e.prototype.ct=function(a){a=a?a:window.event;this.tj=-1;if(this.se||this.df&&this.hg)7<=this.ed?this.Sp():this.$f();if(!this.J.lc&&!this.sc&&(this.Qb&&(this.Qb.we(),this.Ge=this.Qb.La?this.Qb:null),this.T.Tc)){this.ma(!0);a.preventDefault();this.T.Tc=!1;a=(new Date).getTime();var b=Math.abs(this.ia.start.x-this.ia.oa.x)+Math.abs(this.ia.start.y-this.ia.oa.y);if(400>a-this.T.startTime&&0<=b&&20>b){var c=this.Oi(this.ba.x,
this.ba.y);c&&this.eq(c);b=Math.abs(this.ia.Wd.x-this.ia.oa.x)+Math.abs(this.ia.Wd.y-this.ia.oa.y);var m=this.dj(this.ba.x,this.ba.y,!0);700>a-this.Jh&&0<=b&&20>b?(c?this.fq(c):this.J.Ok&&this.bk(),this.I("doubleclick",{pan:-Math.round(100*m.pan)/100,tilt:Math.round(100*m.tilt)/100}),this.Jh=0):(this.I("panoclick",{pan:-Math.round(100*m.pan)/100,tilt:Math.round(100*m.tilt)/100}),this.Jh=a);this.ia.Wd.x=this.ia.oa.x;this.ia.Wd.y=this.ia.oa.y}}};e.prototype.Ro=function(a){if(!this.J.Ce&&!this.sc&&(a=
a?a:window.event,this.Fc(a.target))){var b=a.detail?-1*a.detail:a.wheelDelta/40;this.J.zo&&(b=-b);a.axis&&(-1==this.tj?this.tj=a.axis:this.tj!=a.axis&&(b=0));var c=0<b?1:-1;a.wheelDeltaX&&a.wheelDeltaY&&Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)&&(b=0);0!=b&&(this.J.Hf?(b=this.hf(),this.gn(c*this.J.pm,{x:a.clientX-b.x,y:a.clientY-b.y},!0)):this.Li(c*this.J.pm,!0),this.update());a.preventDefault();this.ma(!0)}};e.prototype.Tu=function(a){a||(a=window.event);var b=a.touches,c=this.hf();this.ba.x=
b[0].clientX-c.x;this.ba.y=b[0].clientY-c.y;this.Pe=this.Qb=null;window.focus();this.rl||(this.rl=!0,this.I("hastouch",{}),this.I("playerstatechanged",{}));!this.Eo&&(this.se||this.df&&this.hg)&&7>this.ed&&this.$f();if(!this.J.lc&&!this.sc)if(c=(new Date).getTime(),this.Ge)this.Qb=this.Ge,this.T.gd=!0,this.T.startTime=c,a.preventDefault(),this.T.ai=!0,b[0]&&(this.xb=b[0].target);else{if(!this.T.gd&&b[0]){this.T.startTime=c;this.T.start.x=b[0].pageX;this.T.start.y=b[0].pageY;this.T.oa.x=b[0].pageX;
this.T.oa.y=b[0].pageY;c=this.xb=b[0].target;if(this.Fc(c)){var m;(m=this.Ck(this.ba.x,this.ba.y))&&m.we&&(this.Qb=m);if(m=this.Oi(this.ba.x,this.ba.y))this.G(m),this.Pe=m,this.Nj(m),this.bg(a),this.Jg(this.ba.x,this.ba.y,!0);this.pq(b[0].pageX,b[0].pageY);this.T.Hn=b[0].identifier;this.T.gd=!0;a.preventDefault();this.T.ai=!0;this.ma(!0)}if(c){m=!1;if(null!=this.T.Cg)for(var h=this.T.Cg;h&&h!=this.control;){if(h.onmouseout)h.onmouseout(a);h=h.parentNode}h=c;for(var n=!0;h&&h!=this.control;)c!=this.T.Cg&&
h.onmouseover&&(h.onmouseover(a),7<=this.ed&&this.Fc(a)&&(m=!0)),h.onmousedown&&(h.onmousedown(a),n=!1,m=!0),h.onclick&&(n=!1),h=h.parentNode;this.T.Cg=n&&7<=this.ed&&c!=this.T.Cg?c:null;m&&(a.preventDefault(),this.T.ai=!0)}}1<b.length&&(this.T.gd=!1);!this.ol&&2==b.length&&b[0]&&b[1]&&this.Fc(this.xb)&&(a=b[0].pageX-b[1].pageX,b=b[0].pageY-b[1].pageY,this.fov.Tp=Math.sqrt(a*a+b*b),this.fov.prev=this.fov.m);this.ia.ha.x=0;this.ia.ha.y=0}};e.prototype.$f=function(){this.G("froce start sound!");try{this.Bi&&
this.A.j&&(!this.A.Qc&&this.A.Uj&&this.A.j.play(),this.A.j.muted=!1);if(this.ga&&(this.G("resume!"),this.G(this.ga.state),this.ga.resume(),"suspended"==this.ga.state)){this.G("audio context suspended");return}if(this.jd&&this.ga&&this.ga.createOscillator){var a=this.ga.createOscillator(),b=this.ga.createGain();a.frequency.value=30;a.type="sine";a.connect(b);b.connect(this.ga.destination);b.gain.value=.01;a.start(0);setTimeout(function(){a.stop()},1E4)}for(b=0;b<this.X.length;b++){var c=this.X[b];
this.G(c);(!this.isPlaying(c.id)||c.ua)&&0<=c.loop&&c.autoplay&&!this.Uc&&(this.G("start "+c.id),c.ua&&(this.G("from buffer"),c.Mf()),this.Xd(c.id,c.loop))}for(b=0;b<this.U.length;b++){var m=this.U[b];!this.isPlaying(m.id)&&m.autoplay&&this.Bi&&!this.Uc&&this.Xd(m.id,m.loop);this.isPlaying(m.id)&&m.autoplay&&this.Bi&&!this.Uc&&(m.Ld&&m.If(),m.j.muted=!1)}this.df=this.se=!1}catch(h){this.G(h)}};e.prototype.Su=function(a){a||(a=window.event);var b=a.touches,c=this.hf();this.ba.x=b[0].clientX-c.x;this.ba.y=
b[0].clientY-c.y;if(this.J.lc||this.sc)(this.C.Id||this.C.fe||this.C.Xc)&&a.preventDefault();else{b[0]&&(this.T.oa.x=b[0].pageX,this.T.oa.y=b[0].pageY);if(this.xb){c=this.xb;for(var m=!1;c&&c!=this.control&&!m;)"scrollarea"==c.ggType&&(m=!0),"map"==c.ggType&&(m=!0),"text"==c.ggType&&(m=!0),c=c.parentNode;m||a.preventDefault()}if(this.T.gd){a.preventDefault();for(c=0;c<b.length;c++)if(b[c].identifier==this.T.Hn){this.oq(b[c].pageX,b[c].pageY);break}this.Pe&&(this.bg(a),this.Jg(this.ba.x,this.ba.y,
!0));this.ma(!0)}2==b.length&&b[0]&&b[1]&&(this.T.gd=!1,!this.ol&&this.Fc(this.xb)&&(this.J.Ce||(c=b[0].pageX-b[1].pageX,m=b[0].pageY-b[1].pageY,this.fov.vn=Math.sqrt(c*c+m*m),this.ka.fov.active=!0,this.ka.fov.center.enabled=!0,this.ka.fov.center.x=(b[0].pageX+b[1].pageX)/2,this.ka.fov.center.y=(b[0].pageY+b[1].pageY)/2,this.ka.fov.hc=this.fov.prev*Math.sqrt(this.fov.Tp/this.fov.vn),4==this.Z()&&!this.cb()&&this.ka.fov.hc>this.fov.max&&(this.ka.fov.hc=this.fov.max),this.ka.fov.hc<this.fov.min&&(this.ka.fov.hc=
this.fov.min)),this.ma(!0),a.preventDefault()))}};e.prototype.Ru=function(a){this.T.ai&&(this.T.ai=!1,a.preventDefault());var b=!1;if(this.se||this.df&&this.hg)7<=this.ed?this.Sp():this.$f();if(!this.J.lc&&!this.sc){this.T.gd&&(a.preventDefault(),this.ma(!0));var c=(new Date).getTime(),m=void 0,h=!1;this.Fc(this.xb)&&(a.preventDefault(),this.Qb&&(this.Qb.we(),this.Ge=this.Qb.La?this.Qb:null));m=Math.abs(this.T.start.x-this.T.oa.x)+Math.abs(this.T.start.y-this.T.oa.y);if(0<=m&&20>m){b=!0;if(this.xb){var n=
this.xb;for(m=function(){if(n.onclick){var r=n;setTimeout(function(){r.onclick(a)},0);"hotspot"!=n.rv&&(h=!0);b=!1}n=n.parentNode};n&&n!=this.control;)m()}m=Math.abs(this.T.Wd.x-this.T.oa.x)+Math.abs(this.T.Wd.y-this.T.oa.y);if(700>c-this.Jh&&0<=m&&20>m){if(this.Fc(this.xb))if(a.preventDefault(),this.Pe)this.fq(this.Pe);else if(this.J.Ok){var q=this;setTimeout(function(){q.bk()},1)}if(this.xb)for(n=this.xb;n&&n!=this.control;)n.ondblclick&&(n.ondblclick(),h=!0,b=!1),n=n.parentNode;this.Jh=0}else this.Jh=
c;this.T.Wd.x=this.T.oa.x;this.T.Wd.y=this.T.oa.y}if(this.xb)for(n=this.xb;n&&n!=this.control;)this.T.Cg!=this.xb&&n.onmouseout&&(n.onmouseout(a),7<=this.ed&&(h=!0)),n.onmouseup&&(n.onmouseup(a),7<=this.ed&&(h=!0)),n=n.parentNode;h&&a.preventDefault();this.bg(a);this.Pe&&(this.Jg(-1,-1,!0),b&&this.eq(this.Pe));this.xb=null;this.T.gd=!1;this.Nj(this.bb);this.Pe=null}};e.prototype.Qu=function(a){this.J.lc||this.sc||(this.T.gd=!1);this.Pe=null;this.Nj(this.bb);this.bg(a);this.Jg(-1,-1,!0)};e.prototype.Fo=
function(){return null!=this.xb||this.T.gd||this.T.Tc};e.prototype.So=function(a){if(!this.tf&&window.MSGesture){var b=window.MSGesture;this.G("setup gesture");this.tf=new b;this.tf.target=this.control}this.tf&&this.tf.addPointer(a.pointerId)};e.prototype.Rn=function(a){this.ol=!0;this.Aj=1;this.J.lc||this.J.Ce||this.sc||(a.touches?(this.xb=a.touches.target,this.Fc(a.target)&&(a.preventDefault(),this.fov.prev=this.fov.m,this.ma(!0))):(a.preventDefault(),this.fov.prev=this.fov.m,this.ma(!0)))};e.prototype.wr=
function(a){if(!this.J.lc&&!this.J.Ce&&!this.sc&&this.Fc(a.target)){a.preventDefault();this.ka.fov.active=!0;this.ka.fov.center.enabled=!0;var b=this.bg(a);this.ka.fov.center.x=b.x;this.ka.fov.center.y=b.y;this.ka.fov.hc=this.fov.prev/Math.sqrt(a.scale);4==this.Z()&&2!=this.Gd&&this.ka.fov.hc>this.fov.max&&(this.ka.fov.hc=this.fov.max);this.update();this.ma(!0)}};e.prototype.ht=function(a){this.J.lc||this.J.Ce||this.sc||(a.preventDefault(),1!=a.scale&&(this.ka.fov.active=!0,this.Aj*=a.scale,this.ka.fov.center.enabled=
!0,a=this.bg(a),this.ka.fov.center.x=a.x,this.ka.fov.center.y=a.y,this.ka.fov.hc=this.fov.prev/Math.sqrt(this.Aj),4==this.Z()&&2!=this.Gd&&this.ka.fov.hc>this.fov.max&&(this.ka.fov.hc=this.fov.max),this.update(),this.ma(!0)))};e.prototype.Qn=function(a){this.J.lc||this.J.Ce||this.sc||(this.ka.fov.active=!1,a.preventDefault(),this.ma(!0),this.tf&&this.tf.reset&&this.tf.reset())};e.prototype.Ts=function(a){this.J.Ph||this.sc||(this.isFullscreen&&a.preventDefault(),this.rj=a.keyCode,this.ma(!0))};e.prototype.Us=
function(a){this.rj&&(this.rj=0,a.preventDefault())};e.prototype.ot=function(){this.rj=0};e.prototype.Wh=function(){this.isFullscreen&&(this.Gh()||this.exitFullscreen(),this.Gh()&&(this.$.style.left="0px",this.$.style.top="0px"))};e.prototype.ut=function(a,b,c,m){m?(this.Ch.alpha=a,this.Ch.beta=b,this.Ch.gamma=c,this.Ch.gamma+=90):(this.lb.alpha=a,this.lb.beta=b,this.lb.gamma=c,this.lb.gamma+=90);this.lb.orientation=window.orientation?1*parseInt(""+window.orientation,10):0;c=new y.Qm;a=this.lb;c.zf(-a.alpha);
c.Af(-a.beta);c.Zd(-a.gamma);c.Af(90-a.orientation);1>c.Mb?-1<c.Mb?(b=180/Math.PI*Math.asin(-c.Mb),a=180/Math.PI*Math.atan2(c.qc,c.pc),c=180/Math.PI*Math.atan2(c.oc,c.nc)):(b=0,a=90,c=-180/Math.PI*Math.atan2(-c.Ub,c.Vb)):(b=0,a=-90,c=180/Math.PI*Math.atan2(-c.Ub,c.Vb));if(this.Mg)if(this.Fo()||this.F.kj||this.lb.hi)this.lb.uf=this.gf()+c,this.lb.fadeIn=0,this.lb.hi=!1;else{m=this.F.active;var h=1;10>this.lb.fadeIn&&(this.lb.fadeIn+=1,h=.1*this.lb.fadeIn);c=-c+this.lb.uf;this.$d(h*c+(1-h)*this.gf());
this.ae(h*a+(1-h)*this.cg());this.mq?this.wg(h*b+(1-h)*this.fj()):this.wg(0);this.Ze();this.F.active=m}};e.prototype.eq=function(a){this.fa&&this.fa.hotspotProxyClick&&this.fa.hotspotProxyClick(a.id,a.url);this.I("hsproxyclick",{id:this.O.id,url:this.O.url});""!=a.url&&(this.Kl(a.url,a.target),this.Jg(-1,-1,!1))};e.prototype.fq=function(a){this.fa&&this.fa.hotspotProxyDoubleClick&&this.fa.hotspotProxyDoubleClick(a.id,a.url);this.I("hsproxydblclick",{id:this.O.id,url:this.O.url})};e.prototype.ef=function(){return Math.min(1,
2*Math.tan(Math.PI*Math.min(this.fov.m,90)/360))};e.prototype.ep=function(){var a=this;setTimeout(function(){a.ep()},100);9!=a.Kj||a.nj||window.requestAnimationFrame(function(){a.Xh();a.G("restart recover timer")});10<a.Kj&&1<a.Ul&&(a.Rc("recover timer - disabling requestAnimationFrame"),a.nj=!0,a.Xh());a.Kj++};e.prototype.ni=function(a){if("__VideoPano"!=this.P.$a){var b={PAN:{value:0,name:"pan"},pv:{value:1,name:"tilt"},mv:{value:2,name:"fov"}},c=0,m=0,h=0;a=Math.max(a,0);for(var n in b){var q=
b[n],r=this.Tb(this.ko(a,q.value,""),q.value,"");var t=(t=this.eo(r))?this.Sn(r,t,a):r.value;switch(q.value){case 0:q=this.pan.m;if(this.je&&3!=r.type){if(!this.cb()){for(;360<t;)t-=360;for(;-360>t;)t+=360}c=t-q;this.cb()||(180<c&&(c-=360),-180>c&&(c+=360));this.pan.m+=c*this.Md}else this.pan.m=t;this.v.Mh=this.pan.m;break;case 1:q=this.u.m;this.je&&3!=r.type?(m=t-q,this.u.m+=m*this.Md):this.u.m=t;this.v.Nh=this.u.m;break;case 2:q=this.fov.m,this.je&&3!=r.type?(h=t-q,this.fov.m+=h*this.Md):this.fov.m=
t,this.v.Lh=this.fov.m}}t=this.Z();for(b=Math.floor(a);!this.Tb(b,3)&&0<b;)b--;b=this.Tb(b,3);n=a-b.time;this.je&&-1!=this.Zg&&this.Hi+this.sk>a?(t=this.xh(this.Zg),this.fov.m>t?this.Hi=a:(n=(a-this.Hi)/this.sk,n=Math.min(1,n),this.pb(this.Z(),this.Zg,1-n))):(0==b.Eb||n>b.Eb-.3?this.pb(b.value):(n/=b.Eb,this.pb(t,b.value,1-n)),this.v.Ko=b.value);this.je&&(t=Math.sqrt(c*c+m*m+h*h),.3>t&&(this.je=!1,this.Md=.02,this.Yg=0),0<this.Yg&&t>this.Yg&&(this.Md+=.01,this.Md=Math.min(this.Md,1)),this.Yg=t)}c=
Math.floor(a);m=this.yr(c);for(h=0;h<m.length;h++)if(n=m[h],3>n.Vm)c!=this.Ym&&(t=n.qd,this.Nb.hasOwnProperty(t)&&(b=this.Nb[t].type,0==b?this.Le(t,n.Im):1==b?this.Le(t,n.value):2==b&&this.Le(t,"true"==n.Im)));else if(b=this.Tb(this.ko(a,n.ob,n.qd),n.ob,n.qd),t=(t=this.eo(b))?this.Sn(b,t,a):b.value,n=n.qd.split("|"),2==n.length)for(b=n[0],n=n[1],r=0;r<this.K.length;r++)q=this.K[r],q.id==b&&("pan"==n?q.pan=t:"tilt"==n&&(q.u=t));this.Ym=c;this.update()};e.prototype.Tn=function(){if(""!=this.v.pg){var a=
this.io(this.v.pg);if(0==a.length||1==a.length&&a[0]==this.pa)return this.pa}a=this.pa;do if(this.v.Xo){var b=1E3;do a=this.Xa[Math.floor(Math.random()*this.Xa.length)];while(b--&&a==this.pa)}else b=this.Xa.indexOf(a),b++,b>=this.Xa.length&&(b=0),a=this.Xa[b];while(""!=this.v.pg&&!this.yh(a).tags.includes(this.v.pg)&&a!=this.pa);return a};e.prototype.Bt=function(a){var b=this.F.speed;this.F.Cl&&(b=b*(a.getTime()-this.F.Cl)/60);this.F.Cl=a.getTime();this.v.uh&&(this.qa.ready()||4==this.Z())&&this.aj()&&
(this.v.uh=!1,this.v.active=!0,this.Ba.running=!0,this.Ba.finished=!1);if(this.F.active||0!=this.F.nb&&this.qa.ready()){if(this.F.Hm&&"__AutoMove"==this.P.$a){var c=a.getTime()-this.F.Xm;b=c/100;if(b>=this.P.length){if(this.ni(this.P.length),this.va.splice(this.va.indexOf(this.P),1),this.F.active=!1,this.P=this.F.Wm,this.F.nb=0,this.vg(this.F.pan,this.F.u,this.F.fov),this.pan.Rb=this.F.pan,this.u.Rb=this.F.u,this.F.og&&(this.F.og=!1,this.v.yj=!0,this.v.Yc=!0,this.v.active=!0,this.I("autorotatechanged",
{})),this.onMoveComplete)this.onMoveComplete()}else this.ni(b)}else{this.pan.d=this.F.pan-this.pan.m;if(!this.cb()&&360==this.pan.max-this.pan.min){for(;-180>this.pan.d;)this.pan.d+=360;for(;180<this.pan.d;)this.pan.d-=360}this.u.d=this.F.u-this.u.m;this.W.d=this.F.W-this.W.m;this.fov.d=this.F.fov-this.fov.m;c=b*this.ef();var m=Math.sqrt(this.pan.d*this.pan.d+this.u.d*this.u.d+this.W.d*this.W.d+this.fov.d*this.fov.d),h=this.pan.m-this.F.Mh,n=this.u.m-this.F.Nh,q=this.W.m-this.F.Lo,r=this.fov.m-this.F.Lh;
100*Math.sqrt(h*h+n*n+q*q+r*r)<c&&0==this.F.nb&&(this.F.aborted=!0);this.F.Mh=this.pan.m;this.F.Nh=this.u.m;this.F.Lo=this.W.m;this.F.Lh=this.fov.m;if(100*m<c||this.F.aborted){if(this.pan.d=0,this.u.d=0,this.W.d=0,this.fov.d=0,this.fov.Mc.enabled=!1,this.F.active&&(this.F.active=!1,this.pan.m=this.F.pan,this.u.m=this.F.u,this.W.m=this.F.W,this.fov.m=this.F.fov,this.onMoveComplete))this.onMoveComplete()}else m=m>5*c?c/m:.2,this.pan.d*=m,this.u.d*=m,this.fov.d*=m;this.pan.m+=this.pan.d;this.u.m+=this.u.d;
this.W.m+=this.W.d;this.J.Hf&&this.fov.Mc.enabled?this.dm(this.fov.m+this.fov.d,this.fov.Mc):this.fov.m+=this.fov.d;0!=this.F.nb&&(this.F.nb!=this.Z()?(b=this.xh(this.F.nb),this.zd()>b?(this.fov.m+=-Math.max((2.5-1.7*Math.min(Math.sqrt(this.pan.d*this.pan.d+this.u.d*this.u.d+this.W.d*this.W.d)/c,1))*c,this.fov.d)-this.fov.d,this.F.fov=this.fov.m):(this.pb(this.F.nb,this.Z(),0),this.G("New projection from Target:"+this.Z()),this.F.di=0,this.qa.mj())):1>this.F.di?(this.F.di=Math.min(1,this.F.di+.05*
b),this.pb(this.Z(),this.Dc(),this.F.di)):(this.pb(this.Z(),0,0),this.F.nb=0,this.qa.mj()))}this.kg=a.getTime();this.update()}else if(this.v.active&&!this.C.fe){c=a.getTime()-this.v.startTime;this.v.uj<this.v.startTime&&(this.v.uj=this.v.startTime);if((this.v.Yc||this.Ba.running)&&0<this.va.length){b=c/100;m=!1;if(this.rc!=this.P.$a||""!=this.P.Te&&this.v.Nd!=this.P.Te){for(c=0;c<this.va.length;c++)if(""==this.rc&&this.va[c].Te==this.v.Nd||""!=this.rc&&this.va[c].$a==this.rc&&this.va[c].Te==this.v.Nd){m=
!0;this.P=this.va[c];this.rc=this.P.$a;break}!m&&0<this.va.length&&this.va[0].Te==this.v.Nd&&(m=!0,this.P=this.va[0],this.rc=this.P.$a)}else m=!0;if(m)if(c=(h=this.A.j&&this.A.Qc)&&this.v.tm&&!this.Ba.running,this.Se){m=b;if(c){if(0==this.Re&&0!=this.A.j.duration)for(;this.Re<this.P.length/10;)this.Re+=this.A.j.duration;this.A.j.currentTime<this.$m&&this.uk&&(this.tk++,this.uk=!1);m=10*(this.tk*this.A.j.duration+this.A.j.currentTime);this.$m=this.A.j.currentTime;.05>this.A.j.duration-this.A.j.currentTime&&
(this.uk=!0);for(;m>=10*this.Re;)m-=10*this.Re}if(!h&&b>=this.P.length||h&&!c&&b>=this.P.length||h&&c&&(this.P.$a!=this.P.Uo||this.P.To!=this.pa)&&b>=this.P.length){this.ni(this.P.length);this.v.Dd=0;this.Se=!1;if(this.Ba.running){this.Ap();return}if(this.v.mn){c=0;do b=this.Zm[this.P.Te],m=Math.floor(Math.random()*Object.keys(b).length),m=b[m],this.rc=m.cliptitle,b=m.nodeid,m=m.startview,c++;while(b==this.pa&&10>c)}else this.rc=this.P.Uo,b=this.P.To,m=this.P.lt;this.rc==this.P.$a&&this.pa==b?1<this.Xa.length&&
0<this.v.Bj&&(this.v.startTime=a.getTime(),(c=this.Tn())&&c!=this.pa&&(this.od("{"+c+"}"),this.Se=!1,this.v.active=!0,this.C.le=!0,this.C.ke=!0)):(this.Cd&&b!=this.pa&&(this.od("{"+b+"}",m),this.C.enabled?(this.v.active=!1,this.C.le=!0,this.C.ke=!0):this.v.active=!0),this.v.startTime=a.getTime())}else this.ni(m),this.v.Dd=m}else if(b=this.Tb(0,0),m=this.Tb(0,1),h=this.Tb(0,2),n=this.Tb(0,3),3!=n.ob&&(n=0),this.v.yj||this.F.aborted||this.Ba.running||c){if(this.Se=!0,this.v.startTime=0<this.v.Dd?a.getTime()-
100*this.v.Dd:a.getTime(),this.je=c){this.Re=this.tk=0;m=10*this.A.j.currentTime;for(c=Math.floor(m);!this.Tb(c,3)&&0<c;)c--;c=this.Tb(c,3);c.value==this.Z()?this.Zg=-1:(this.Zg=c.value,this.Hi=m,this.sk=Math.max(5,c.time+c.Eb-m))}}else{c={};if(0<this.v.Dd)c.pan=this.v.Mh,c.tilt=this.v.Nh,c.fov=this.v.Lh,c.projection=this.v.Ko;else{c.pan=b.value;if(!this.cb()){for(;360<c.pan;)c.pan-=360;for(;-360>c.pan;)c.pan+=360}c.tilt=m.value;c.fov=h.value;c.projection=n?n.value:4}c.timingFunction=3;c.speed=1;
this.F.og=!0;this.zj(c);this.v.active=!0}}else 0<this.v.Bj&&this.Cd&&c>=1E3*this.v.Bj?1<this.Xa.length&&(this.v.startTime=a.getTime(),(c=this.Tn())&&c!=this.pa&&(this.v.kd=a.getTime(),this.v.timeout=0,this.od("{"+c+"}"),this.v.active=!0,this.C.le=!0)):(c=a.getTime(),m=b=1E3/60,0!=this.v.kd&&(m=c-this.v.kd),this.u.d=this.v.ak*((this.v.vo?this.u.Fa:0)-this.u.m)/100,this.fov.d=this.v.ak*(this.fov.Fa-this.fov.m)/100,this.pan.d=.95*this.pan.d+-this.v.speed*this.ef()*.05,b=m/b,this.pan.m+=this.pan.d*b,
this.u.m+=this.u.d*b,this.fov.m+=this.fov.d*b,this.v.kd=c,this.update());3E3<a.getTime()-this.v.uj&&!this.v.Ri&&(this.Ga.style.cursor="none",this.v.Ri=!0)}else!this.Ba.finished&&1E3<a.getTime()-this.kg&&(this.va.splice(this.va.indexOf(this.P),1),this.P=this.Yk(!1),this.rc=this.P.$a,this.v.active=!1,this.v.uh=!0),this.v.enabled&&!this.T.oj()&&a.getTime()-this.kg>1E3*this.v.timeout&&!this.v.uh&&(this.v.Ag&&this.aj()||!this.v.Ag)&&(this.v.active=!0,this.v.startTime=a.getTime(),this.v.kd=0,this.I("autorotatechanged",
{}),this.pan.d=0,this.u.d=0,this.fov.d=0,this.fov.Mc.enabled=!1),!this.ka.enabled||this.T.oj()||0==this.pan.d&&0==this.u.d&&0==this.fov.d||(this.F.kj=!0,this.pan.d*=.9,this.u.d*=.9,this.fov.d*=.9,this.pan.m+=this.pan.d,this.u.m+=this.u.d,this.J.Hf&&this.fov.Mc.enabled?this.gn(this.fov.d,this.fov.Mc):this.Li(this.fov.d),1E-4>this.pan.d*this.pan.d+this.u.d*this.u.d+this.fov.d*this.fov.d&&(this.pan.d=0,this.u.d=0,this.fov.d=0,this.fov.Mc.enabled=!1),this.update())};e.prototype.gq=function(a){var b=this.C;
b.Xc=!1;"previewtrack"==b.delay&&2!=this.Gd||"videopano"==b.delay&&!this.A.j?0<this.L.M.levels.length?this.L.M.levels[this.L.M.levels.length-1].loaded||(b.Xc=!0):this.qa.hp()||(b.Xc=!0):"videopano"==b.delay&&this.A.j&&!this.A.jg&&(b.Xc=!0);b.Xc||this.Vj(a)};e.prototype.Vj=function(a){a||(a=new Date);var b=this.C;b.Xc=!1;b.fe=!0;b.ke=this.v.Yc;b.Wp=a.getTime()+100;0==b.cd||b.Tg||this.rm()};e.prototype.rm=function(){var a=this.C;4==a.cd?(this.P=this.Yk(!0,a.um,a.vm,a.ui),this.rc=this.P.$a,this.v.active=
!0,this.Ba.running=!0):this.moveTo(a.um,a.vm,a.ui,a.Ug,0,a.ce)};e.prototype.Dt=function(a){var b=this.C;if(!b.Lp){if(b.Id){var c=a.getTime()-b.uq;c/=1E3*b.tq;1<=c?(b.Ml(1),b.Id=!1,this.Fn(),this.Vp(),this.gq(a)):0<=c&&b.Ml(c)}else b.fe&&(c=a.getTime()-b.Wp,c/=1E3*b.$g,1<=c?(b.fe=!1,this.kg=a.getTime(),this.update(),0!=b.cd&&b.Tg&&this.rm(),4!=b.cd&&(this.Pj(!1),this.v.active=b.le,this.v.Yc=b.ke,this.I("autorotatechanged",{}),b.le=!1,b.ke=!1),this.v.kd=0,this.ea&&this.Jk(),this.dh=!1):0<=c&&b.Ml(c));
b=this.xt;b.Sq&&(b.Si?a.getTime()-b.Rk>=1E3*b.delay&&(b.Si=!1):(b.current+=b.rd,0>b.current&&(b.current=0,b.rd=-b.rd,b.Si=!0,b.Rk=a.getTime()),1<b.current&&(b.current=1,b.rd=-b.rd,b.Si=!0,b.Rk=a.getTime())))}};e.prototype.Gt=function(){var a,b=this.R;if(0<b.wc.length){for(a=0;a<b.wc.length;a++)b.pd[a]!=b.Kc[a]&&(b.pd[a]>b.Kc[a]?(b.Kc[a]+=.05,b.pd[a]<b.Kc[a]&&(b.Kc[a]=b.pd[a])):(b.Kc[a]-=.05,b.pd[a]>b.Kc[a]&&(b.Kc[a]=b.pd[a],-1!=b.Sj.indexOf(b.wc[a])&&(b.Sj.splice(b.Sj.indexOf(b.wc[a]),1),b.wc.splice(a,
1),b.pd.splice(a,1),b.Kc.splice(a,1)))));this.update()}if(2==b.mode)for(a=0;a<this.K.length;a++){var c=this.K[a];"poly"==c.type&&c.hb!=c.Da&&(c.hb>c.Da?(c.Da+=b.rd,c.hb<c.Da&&(c.Da=c.hb)):(c.Da-=b.rd,c.hb>c.Da&&(c.Da=c.hb)),this.update())}3==b.mode&&b.hb!=b.Da&&(b.hb>b.Da?(b.Da+=b.rd,b.hb<b.Da&&(b.Da=b.hb)):(b.Da-=b.rd,b.hb>b.Da&&(b.Da=b.hb)),this.update())};e.prototype.Ft=function(){var a=this.ka;this.T.oj()&&(this.J.Vd?(a.ha.x=.4*(this.ia.oa.x-a.oa.x),a.ha.y=.4*(this.ia.oa.y-a.oa.y),a.oa.x+=a.ha.x,
a.oa.y+=a.ha.y):(a.ha.x=.1*-this.ia.ha.x*this.J.sensitivity/8,a.ha.y=.1*-this.ia.ha.y*this.J.sensitivity/8),this.nq(a.ha.x,a.ha.y),this.update());a.fov.active&&(this.J.Hf&&a.fov.center.enabled?this.Wq(.4*(a.fov.hc-this.fov.m),a.fov.center):this.Ak(.4*(a.fov.hc-this.fov.m)),.001>Math.abs(a.fov.hc-this.fov.m)/this.fov.m&&(a.fov.active=!1),this.update());if(a.enabled&&(0!=a.ha.x||0!=a.ha.y)&&!this.T.oj()){var b=.9*(1-a.$l);a.ha.x*=b;a.ha.y*=b;this.F.kj=!0;.01>a.ha.x*a.ha.x+a.ha.y*a.ha.y?(a.ha.x=0,a.ha.y=
0):(this.nq(a.ha.x,a.ha.y),this.update())}};e.prototype.Et=function(){if(!this.aj()&&this.kf&&5<this.L.M.qp){var a,b=0,c=this.sd.length;if(this.Lg)c=50,this.Sk<c&&this.Sk++,b=this.Sk;else for(a=0;a<c;a++)(this.sd[a].complete&&this.sd[a].src!=this.pr||""==this.sd[a].src)&&b++;b==c?(this.Zh=1,this.isLoaded=!0,this.sa&&this.sa.ggLoaded&&this.sa.ggLoaded(),this.I("imagesready",{}),this.v.Ag&&this.v.enabled&&!this.F.active&&!this.C.Id&&(this.v.active=!0,this.v.Ag=!1,this.v.startTime=(new Date).getTime(),
this.v.kd=0)):this.Zh=b/(1*c);this.I("downloadprogress",{percentLoaded:this.Zh})}};e.prototype.Xh=function(){var a=this;a.Mj||(a.nj?setTimeout(function(){a.Mj=!1;a.Xh()},1E3/60):window.requestAnimationFrame(function(){a.Mj=!1;a.Xh()}));a.Mj=!0;this.Ul=this.Kj=0;a.F.kj=!1;var b=new Date;this.Yi++;120<=this.Yi&&(this.G("F/s: "+Math.round(1E3*this.Yi/(b.getTime()-this.Ho))),this.Ho=b.getTime(),this.Yi=0);this.I("timer",{});this.na&&this.qa.mr();this.Gm&&(this.Xb(),this.Gm=!1);this.Ft();this.Et();this.A.j&&
this.A.Qc&&!this.Se&&!this.F.og&&this.ik&&(this.P=this.ik,this.ni(10*this.A.j.currentTime));this.Bt(b);this.L.Ct();this.Dt(b);this.qa.$u();(0<=this.R.mode||0<this.R.wc.length)&&this.Gt();this.ek();if(this.rf.pan!=this.pan.m||this.rf.u!=this.u.m||this.rf.fov!=this.fov.m)this.rf.pan=this.pan.m,this.rf.u=this.u.m,this.rf.fov=this.fov.m,this.I("positionchanged",{});this.Bl!=this.Z()&&(this.Bl=this.Z(),this.I("projectionchanged",{}));this.qb&&(0<this.mh?this.mh--:(this.qb=!1,this.mh=0),this.C.fe||this.C.Id||
this.C.Xc||this.he||(this.Ai(),this.I("renderframe",{})),this.I("repaint",{}));b=this.$n();b!=this.Io&&(b?(this.sa&&this.sa.ggReLoadedLevels&&this.sa.ggReLoadedLevels(),this.I("tilesrequested",{})):(a.sa&&a.sa.ggLoadedLevels&&a.sa.ggLoadedLevels(),this.I("tilesready",{})),this.Io=b)};e.prototype.xh=function(a){switch(a){case 4:a=Math.min(110,this.fov.max);break;case 12:a=Math.min(270,this.fov.Gl);a=Math.min(360*this.aspect(),a);a=Math.min(360/this.aspect(),a);break;case 9:a=Math.min(270,this.fov.Hl);
break;default:a=90}return a};e.prototype.ek=function(){this.Mk.Jn(this.pan.m,this.u.m);for(var a=0;a<this.X.length+this.U.length;a++){if(a<this.X.length)var b=this.X[a];else if(b=this.U[a-this.X.length],b.nd)continue;b.ek()}};e.prototype.xu=function(a,b){var c=this;var m="<<L>>"+String(c.yb);m=m.toUpperCase();"U"!=m.charAt(2)&&(c.J.gg=!1);if(0!=c.Sh.length||!c.J.gg||c.J.gh||c.J.hh&&c.lf()||c.J.Pi)if(c.vd)c.$.removeChild(c.vd),c.vd=null;else{c.vd=document.createElement("div");var h=c.vd;m="left: "+
a+"px;top:\t "+(b+"px;z-index: 32000;");m+="position:relative;";m+="display: table;";m+="color: black;";m+="background-color: white;";m+="border: 1px solid lightgray;";m+="box-shadow: 1px 1px 3px #333;";m+="font-family: Verdana, Arial, Helvetica, sans-serif;";m+="font-size: 9pt;";m+="opacity : 0.95;";h.setAttribute("style",m);h.setAttribute("class","gg_contextmenu");m=document.createElement("style");a=document.createTextNode(".gg_context_row:hover { background-color: #3399FF }");m.type="text/css";
m.styleSheet?m.styleSheet.cssText=a.nodeValue:m.appendChild(a);h.appendChild(m);for(a=0;a<c.Sh.length;a++)if(b=c.Sh[a],""!=b.text){var n=document.createElement("div");m="text-align: left;";m+="margin: 0;";m+="padding: 5px 20px;";m+="vertical-align: left;";n.setAttribute("style",m);n.setAttribute("class","gg_context_row");""!=b.url?(m=document.createElement("a"),m.href=b.url,m.target="_blank",m.innerHTML=this.Sa(b.text),m.setAttribute("style","color: black; text-decoration: none;"),n.appendChild(m)):
(m=document.createElement("span"),m.innerHTML=this.Sa(b.text),m.setAttribute("style","color: black; text-decoration: none;"),n.appendChild(m));h.appendChild(n)}0<c.Sh.length&&(!c.J.gg||c.J.gh||c.J.hh&&c.lf()||c.J.Pi)&&h.appendChild(document.createElement("hr"));if(c.J.Pi&&c.na){b=[];b.push({text:this.Sa("Rectilinear Projection"),bi:4});b.push({text:this.Sa("Stereographic Projection"),bi:9});b.push({text:this.Sa("Fisheye Projection"),bi:12});for(a=0;a<b.length;a++){n=b[a];var q=document.createElement("div");
q.setAttribute("class","gg_context_row");m="text-align: left;";m+="margin: 0;";m=c.Z()==n.bi?m+"padding: 5px 20px 5px 7px;":m+"padding: 5px 20px;";m+="vertical-align: left;";m+="cursor: pointer;";q.setAttribute("style",m);q.onclick=function(r){return function(){c.Bk(r,1);c.update()}}(n.bi);q.innerHTML=c.Z()==n.bi?"&#10687; "+n.text:n.text;h.appendChild(q)}(!c.J.gg||c.J.gh||c.J.hh&&c.lf())&&h.appendChild(document.createElement("hr"))}c.J.gh&&(a=document.createElement("div"),a.setAttribute("class",
"gg_context_row"),m="text-align: left;margin: 0;padding: 5px 20px;",m+="vertical-align: left;",m+="cursor: pointer;",a.setAttribute("style",m),a.onclick=function(){c.bk()},a.innerHTML=c.Gh()?this.Sa("Exit Fullscreen"):this.Sa("Enter Fullscreen"),h.appendChild(a));c.J.hh&&c.lf()&&(a=document.createElement("div"),a.setAttribute("class","gg_context_row"),m="text-align: left;margin: 0;padding: 5px 20px;",m+="vertical-align: left;",m+="cursor: pointer;",a.setAttribute("style",m),a.onclick=function(){c.Tf()},
a.innerHTML="Enter VR",h.appendChild(a));c.J.gg||(a=document.createElement("div"),m="text-align: left;margin: 0;padding: 5px 20px;",m+="vertical-align: left;",a.setAttribute("style",m),a.setAttribute("class","gg_context_row"),m=document.createElement("a"),m.href=e.lh("aHR0cDovL3Bhbm8ydnIuY29tLw=="),m.target="_blank",m.innerHTML=e.lh("Q3JlYXRlZCB3aXRoIFBhbm8yVlI="),7<this.wj.length&&(m.innerHTML+="<br/>"+e.wn(this.wj).replace(/./gm,function(r){return"&#"+r.charCodeAt(0)+";"})),m.setAttribute("style",
"color: black; text-decoration: none;"),a.appendChild(m),h.appendChild(a));c.$.insertBefore(c.vd,c.$.firstChild);h.onclick=function(){c.vd&&(c.$.removeChild(c.vd),c.vd=null)};h.oncontextmenu=h.onclick}};e.prototype.Rq=function(){var a=this;var b=a.Ga;a.control=b;a.control=b;setTimeout(function(){a.Xh()},10);setTimeout(function(){a.ep()},200);setTimeout(function(){a.ge();a.Ai()},10);b.addEventListener&&(b.addEventListener("touchstart",function(c){a.Tu(c)},!1),b.addEventListener("touchmove",function(c){a.Su(c)},
!1),b.addEventListener("touchend",function(c){a.Ru(c)},!1),b.addEventListener("touchcancel",function(c){a.Qu(c)},!1),b.addEventListener("pointerdown",function(c){a.So(c)},!1),b.addEventListener("MSPointerDown",function(c){a.So(c)},!1),b.addEventListener("MSGestureStart",function(c){a.Rn(c)},!1),b.addEventListener("MSGestureEnd",function(c){a.Qn(c)},!1),b.addEventListener("MSGestureChange",function(c){a.ht(c)},!1),b.addEventListener("gesturestart",function(c){a.Rn(c)},!1),b.addEventListener("gesturechange",
function(c){a.wr(c)},!1),b.addEventListener("gestureend",function(c){a.Qn(c)},!1),b.addEventListener("mousedown",function(c){a.et(c)},!1),b.addEventListener("mousemove",function(c){a.dt(c)},!1),document.addEventListener("mouseup",function(c){a.ct(c)},!1),b.addEventListener("mousewheel",function(c){a.Ro(c)},!1),b.addEventListener("DOMMouseScroll",function(c){a.Ro(c)},!1),document.addEventListener("keydown",function(c){a.Ts(c)},!1),document.addEventListener("keyup",function(c){a.Us(c)},!1),window.addEventListener("resize",
function(){a.ge()},!1),a.fc.addEventListener("resize",function(){a.ge()},!1),window.addEventListener("blur",function(){a.ot()},!1),a.$.addEventListener("webkitfullscreenchange",function(){a.Wh()},!1),document.addEventListener("mozfullscreenchange",function(){a.Wh()},!1),window.addEventListener("webkitfullscreenchange",function(){a.Wh()},!1),document.addEventListener("MSFullscreenChange",function(){a.Wh()},!1),document.addEventListener("fullscreenchange",function(){a.Wh()},!1));b.oncontextmenu=function(c){void 0===
c&&(c=window.event);if(c.target&&!a.Fc(c.target))return!0;if(!c.ctrlKey){var m=a.hf();a.xu(c.clientX-m.x,c.clientY-m.y);return!1}return!0};window.addEventListener("deviceorientation",function(c){a.ut(c.alpha,c.beta,c.gamma,c.absolute);null!=c.alpha&&null!=c.beta&&null!=c.gamma&&0==a.ml&&(a.ml=!0,a.I("gyroavailable",{available:!0}),a.I("playerstatechanged",{}))})};e.prototype.Um=function(){for(var a=0;a<this.K.length;a++)if("point"==this.K[a].type&&(this.fa&&this.fa.addSkinHotspot?(this.K[a].Vf(),
this.K[a].j=this.fa.addSkinHotspot(this.K[a])):(this.K[a].j=new y.vq(this,this.K[a]),this.K[a].fd&&this.K[a].Ef&&(this.K[a].j.ggUse3d=!0,this.K[a].j.gg3dDistance=this.K[a].Ti)),this.K[a].j.__div.style.left="-1000px",this.K[a].j.__div.style.top="-1000px",this.K[a].j&&this.K[a].j.__div)){var b=this.Ga.firstChild;b?this.Ga.insertBefore(this.K[a].j.__div,b):this.Ga.appendChild(this.K[a].j.__div)}};e.prototype.Xq=function(){if(!this.fa||!this.fa.addSkinHotspot)for(var a=0;a<this.K.length;a++)"point"==
this.K[a].type&&this.K[a].j&&this.K[a].j.Es()};e.prototype.Yq=function(){for(var a=0;a<this.Ua.length;a++)this.Ua[a].Od();for(a=0;a<this.Pb.length;a++)this.Pb[a].Od();for(a=0;a<this.X.length;a++)this.X[a].Od();for(a=0;a<this.U.length;a++)this.U[a].Od()};e.prototype.Nm=function(){var a,b=document.createElement("fakeelement"),c={OTransition:"oTransitionEnd",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",transition:"transitionEnd"};for(a in c)if(void 0!==
b.style[a])return c[a]};e.prototype.Ta=function(a){var b=[];a="#"==a.substr(0,1)?a.substr(1):"^"+a+"$";a=new RegExp(a,"");for(var c=0;c<this.X.length;c++)a.test(this.X[c].id)&&b.push(this.X[c]);for(c=0;c<this.U.length;c++)a.test(this.U[c].id)&&b.push(this.U[c]);for(c=0;c<this.Ua.length;c++)a.test(this.Ua[c].id)&&b.push(this.Ua[c]);for(c=0;c<this.Pb.length;c++)a.test(this.Pb[c].id)&&b.push(this.Pb[c]);return b};e.prototype.Wr=function(a){if("_videopanorama"==a)return this.A.j;a=this.Ta(a);return 0<
a.length?a[0].j:null};e.prototype.Vr=function(a){a=this.Ta(a);return 0<a.length&&a[0].ua?a[0]:null};e.prototype.lp=function(a,b){var c=this;b.addEventListener("ended",function(h){c.I("videoended",{video:h.target})});b.addEventListener("pause",function(h){c.I("videopaused",{video:h.target})});b.addEventListener("play",function(h){c.I("videostarted",{video:h.target})});for(var m=0;m<this.U.length;m++)if(this.U[m].id==a)return this.U[m].j=b,this.U[m];m=new y.Tm(this);m.registerElement(a,b);return m};
e.prototype.isPlaying=function(a){if("_main"===a)return!0;a=this.Ta(a);return 0<a.length?a[0].ua?a[0].qg:!a[0].j.ended&&!a[0].j.paused:!1};e.prototype.Xd=function(a,b){var c=this,m=null,h=this;this.G("Play Sound: "+a+" loop:"+b);this.G("playerMuted: "+this.Uc);if(!this.Uc)try{for(var n=this.Ta(a),q=0;q<n.length;q++){var r=n[q];if(r instanceof y.ie){r.ib=b&&!isNaN(Number(b))?Number(b)-1:r.loop-1;-1==r.ib&&(r.ib=1E7);this.G(r.j);this.isPlaying(a)&&this.Wj(a);if(r.ua)r.oe();else{m=r.j.play();if(void 0!==
m)m.then(function(){c.xg(!0);c.G("Sound permitted! "+h.ga.state)})["catch"](function(t){c.G(t);c.xg(!1)});r.Ld&&(this.G("waitingForWebAudioNodesToBeAdded?"),r.If())}this.li(r.id,!1)}}}catch(t){this.G(t)}return m};e.prototype.gp=function(a,b){a=this.Ta(a);for(var c=0;c<a.length;c++){var m=a[c];this.isPlaying(m.id)?this.Yh(m.id):this.Xd(m.id,b)}};e.prototype.It=function(a,b){a=this.Ta(a);for(var c=0;c<a.length;c++){var m=a[c];m instanceof y.ie&&(this.isPlaying(m.id)?this.Wj(m.id):this.Xd(m.id,b))}};
e.prototype.Yh=function(a){try{var b=void 0;if("_main"==a){this.li(a,!0);for(b=0;b<this.X.length;b++)this.X[b].ua?this.X[b].xk():this.X[b].j.pause();for(b=0;b<this.U.length;b++)this.U[b].j.pause()}else{var c=this.Ta(a);for(b=0;b<c.length;b++){var m=c[b];m instanceof y.ie&&(this.li(m.id,!0),m.ua?m.xk():m.j.pause())}}}catch(h){this.G(h)}};e.prototype.Hq=function(a,b){a=this.Ta(a);for(var c=0;c<a.length;c++){var m=a[c];0==b||1==b?m.jf&&m.jf(1==b):2==b&&m.we&&m.we();!m.La||-1==this.Ua.indexOf(m)&&-1==
this.U.indexOf(m)&&-1==this.Pb.indexOf(m)||(this.Qb=this.Ge=m)}};e.prototype.Wj=function(a){var b;this.G("Stop Sound: "+a);try{if("_main"===a){this.li(a,!0);for(b=0;b<this.X.length;b++)this.X[b].ua?this.X[b].Mf():(this.X[b].j.pause(),this.X[b].j.currentTime=0);for(b=0;b<this.U.length;b++)this.U[b].j.pause(),this.U[b].j.currentTime=0}else{var c=this.Ta(a);for(b=0;b<c.length;b++){var m=c[b];m instanceof y.ie&&(this.li(m.id,!0),m.ua?m.Mf():m.j&&m.j.pause&&(m.j.pause(),m.j.currentTime=0))}}}catch(h){this.G(h)}};
e.prototype.li=function(a,b){a=this.Ta("_main"===a?".*":a);for(var c=0;c<a.length;c++)a[c].stopped=b};e.prototype.Au=function(a){a=this.Ta(a);return 0<a.length?(a=a[0],a instanceof y.ie?a.ua?a.Uq():a.j?a.j.currentTime:0:0):0};e.prototype.Cu=function(a,b){a=this.Ta(a);for(var c=0;c<a.length;c++){var m=a[c];m instanceof y.ie&&(m.ua?(0>b&&(b=0),b>m.Ji.duration&&(b=m.Ji.duration-.1),m.Vq(b)):m.j&&(0>b&&(b=0),b>m.j.duration&&(b=m.j.duration-.1),m.j.currentTime=b))}};e.prototype.Bu=function(a,b){a=this.Ta(a);
0<a.length&&(a=a[0],a.j&&(a.j.playbackRate=b))};e.prototype.setVolume=function(a,b){try{var c=void 0,m=Number(b);1<m&&(m=1);0>m&&(m=0);"_videopanorama"===a&&this.A.j&&(this.A.j.volume=m,this.A.level=m);if("_main"===a){this.aa=m;for(c=0;c<this.X.length;c++)this.X[c].j.volume=this.X[c].level*this.aa;for(c=0;c<this.U.length;c++)this.U[c].j.volume=this.U[c].level*this.aa;this.A.j&&(this.A.j.volume=this.aa*this.A.level)}else{var h=this.Ta(a);this.G(h);for(c=0;c<h.length;c++){var n=h[c];n.j&&null!=n.j.volume&&
(n.j.volume=m*this.aa);n.level=m}}}catch(q){this.G(q)}};e.prototype.cr=function(a,b){try{var c=void 0,m=void 0;"_videopanorama"===a&&this.A.j&&(this.A.j.volume+=Number(b));if("_main"===a){c=this.aa;c+=Number(b);1<c&&(c=1);0>c&&(c=0);this.aa=c;for(m=0;m<this.X.length;m++)this.X[m].j.volume=this.X[m].level*this.aa;for(m=0;m<this.U.length;m++)this.U[m].j.volume=this.U[m].level*this.aa;this.A.j&&(this.A.j.volume=this.aa*this.A.level)}else{var h=this.Ta(a);for(m=0;m<h.length;m++){var n=h[m];n instanceof
y.ie&&(c=n.level,c+=Number(b),1<c&&(c=1),0>c&&(c=0),n.level=c,n.j&&null!=n.j.volume&&(n.j.volume=c*this.aa))}}}catch(q){this.G(q)}};e.prototype.im=function(a,b){if("_main"===a||"_all"===a||"_videopanorama"===a)"_all"===a&&(b=(this.Uc=1==b||-1==b&&!this.Uc?!0:!1)?1:0),this.A.j&&(this.A.j.muted=-1==b?!this.A.j.muted:1==b);a=this.Ta("_main"===a||"_all"===a?".*":a);for(var c=0;c<a.length;c++){var m=a[c];m.Gp&&m.Gp(b)}};e.prototype.kt=function(a){this.im(a,1)};e.prototype.Vu=function(a){this.im(a,0)};
e.prototype.Ou=function(a){this.im(a,-1)};e.prototype.Hr=function(){return this.Td};e.prototype.Os=function(){this.bn=document.createElement("audio");this.bn.src="./media/testsound.mp3"};e.prototype.Rp=function(){var a=this;this.ga&&"suspended"===this.ga.state&&this.ga.resume();var b=a.bn.play();if(void 0!==b)b.then(function(){a.xg(!0)})["catch"](function(){a.xg(!1)})};e.prototype.Sp=function(){this.Td&&1!=this.oi?this.Rp():this.se=this.df=!1};e.prototype.os=function(){return this.oi};e.prototype.xg=
function(a){if(1!=this.oi){var b=a?1:0;this.oi!=b&&(this.oi=b,this.I("soundspermittedchanged",{permitted:a}))}};e.prototype.Fu=function(){var a=this;this.$f();this.se&&setTimeout(function(){a.$f()},500)};e.prototype.Qj=function(a,b,c){a.j.style.opacity=0==b?1:0;a.j.style[this.Sb]="opacity "+c+"ms";a.j.style.opacity=0==b?0:1};e.prototype.bu=function(a,b,c){function m(){var r=h[q];if(!r.j)return"continue";0==b?(n.Qj(r,b,c),setTimeout(function(){0==r.j.style.opacity&&r.Bf(!1)},c+10),r.jc=!1):1==b?(n.Qj(r,
b,c),r.Bf(!0),r.jc=!0):2==b&&("visible"==r.j.style.visibility?(n.Qj(r,0,c),setTimeout(function(){0==r.j.style.opacity&&r.Bf(!1)},c+10),r.jc=!1):(n.Qj(r,1,c),r.Bf(!0),r.jc=!0))}for(var h=this.Ta(a),n=this,q=0;q<h.length;q++)m()};e.prototype.Vp=function(){var a=this;try{for(var b=this,c=!1,m=!1,h=0;h<this.X.length;h++){var n=this.X[h];if(-1!=n.loop&&!this.isPlaying(n.id)&&!n.stopped){var q=void 0;this.ga&&this.Wa.enabled&&4!=n.mode&&6!=n.mode&&!this.Uc?this.Wa.tn?(n.ua?n.oe():(q=n.j.play(),n.Ld&&n.If(),
n.j.currentTime=0),n.ta=0,m=!0):c=!0:4==n.mode||6==n.mode||"_background"==n.id&&this.isPlaying(n.id)||this.Uc||(n.ua?n.oe():(q=n.j.play(),n.j.currentTime&&(n.j.currentTime=0)));if(void 0!==q)q.then(function(){a.xg(!0)})["catch"](function(){a.xg(!1)})}}c&&setTimeout(function(){b.Wa.Iu()},1E3*this.Wa.Eb);m&&(this.Wa.Eu=this.ga.currentTime,this.Wa.Du=setInterval(function(){b.Wa.sr()},10))}catch(r){this.G(r)}};e.prototype.Fn=function(){for(var a=0;a<this.Wa.zi.length;a++)this.Wa.En(this.Wa.zi[a])};e.prototype.pp=
function(){if(this.O&&this.O!=this.bb&&this.O.div&&this.O.div.onmouseout)this.O.div.onmouseout();for(var a;0<this.K.length;)a=this.K.pop(),a.j&&(this.Ga.removeChild(a.j.__div),delete a.j),a.j=null;this.R.Da=0;this.R.hb=0;this.I("hotspotsremoved",{})};e.prototype.km=function(a){this.Gf=a;this.$.style.zIndex=0!=a?a.toString():"auto";this.eb&&this.eb.ah&&(this.eb.ah.zIndex=(a+4).toString());this.Ga.style.zIndex=(a+4).toString();this.Ca.style.zIndex=(a+5).toString();for(var b=0;b<this.hj();b++){var c=
b<this.U.length?this.U[b]:this.Ua[b-this.U.length];c.j&&(c.j.style.zIndex=(a+(c.La?8E4:0)).toString())}};e.prototype.Oj=function(a){var b=this.isFullscreen!==a;this.isFullscreen!==a&&(this.isFullscreen=a,this.update(100));if(this.isFullscreen){if(this.gk)try{this.$.webkitRequestFullScreen?this.$.webkitRequestFullScreen():this.$.mozRequestFullScreen?this.$.mozRequestFullScreen():this.$.msRequestFullscreen?this.$.msRequestFullscreen():this.$.requestFullScreen?this.$.requestFullScreen():this.$.requestFullscreen&&
this.$.requestFullscreen()}catch(c){this.G(c)}this.$.style.position="absolute";a=this.hf();this.$.style.left=window.pageXOffset-a.x+this.margin.left+"px";this.$.style.top=window.pageYOffset-a.y+this.margin.top+"px";this.km(10);document.body.style.overflow="hidden";b&&(this.sa&&this.sa.ggEnterFullscreen&&this.sa.ggEnterFullscreen(),this.I("fullscreenenter",{}),this.I("playerstatechanged",{}))}else{if(this.gk)try{document.webkitIsFullScreen?document.webkitCancelFullScreen():document.mozFullScreen?document.mozCancelFullScreen():
document.msExitFullscreen?document.msExitFullscreen():document.fullScreen&&(document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen&&document.exitFullscreen())}catch(c){this.G(c)}this.$.style.position="relative";this.$.style.left="0px";this.$.style.top="0px";this.km(0);document.body.style.overflow="";b&&(this.sa&&this.sa.ggExitFullscreen&&this.sa.ggExitFullscreen(),this.I("fullscreenexit",{}),this.I("playerstatechanged",{}))}this.ge()};e.prototype.bk=function(){this.Oj(!this.isFullscreen)};
e.prototype.qr=function(){this.Oj(!0)};e.prototype.exitFullscreen=function(){this.Oj(!1)};e.prototype.Lr=function(){return this.isFullscreen};e.prototype.Tf=function(){this.Aa.ir();this.sp();this.Aa.Tf();this.Aa.wt();return!0};e.prototype.us=function(){return"N/A"};e.prototype.ts=function(){if(this.Aa)return this.Aa.ig()?this.Aa.kk:this.Aa.camera};e.prototype.vs=function(){if(this.Aa)return this.Aa.Pa};e.prototype.qu=function(a){this.Aa&&(this.Aa.ag=a)};e.prototype.Uf=function(){this.Aa&&(this.Aa.Uf(),
this.Aa.yf(),this.Aa.Fk());return!0};e.prototype.bq=function(){this.Aa&&(this.Aa.ig()?this.Uf():this.Tf());return!0};e.prototype.ig=function(){return this.Aa&&this.Aa.ig()?!0:!1};e.prototype.lf=function(){return this.Aa&&this.Aa.lf()?!0:!1};e.prototype.hl=function(){return this.Aa?this.Aa.hl():!1};e.prototype.Gu=function(a,b,c){this.v.Nd=this.v.Ii;this.v.Yc=this.v.Og;this.v.enabled=!0;this.v.Jf=this.v.enabled;this.v.active=!0;this.v.kd=0;var m=new Date;this.v.Dd=0;this.v.startTime=m.getTime();void 0!==
a&&0!=a&&(this.v.speed=a);void 0!==b&&(this.v.timeout=b);void 0!==c&&(this.v.ak=c);this.I("autorotatechanged",{})};e.prototype.Ju=function(){this.v.active=!1;this.v.enabled=!1;this.v.Jf=this.v.enabled;this.Se=this.v.yj=!1;this.F.active&&this.F.og&&(this.F.active=!1,this.F.og=!1,this.F.nb=0);this.I("autorotatechanged",{})};e.prototype.Nu=function(){this.v.enabled=!this.v.active;this.v.Jf=this.v.enabled;this.v.active=this.v.enabled;this.v.kd=0;if(this.v.enabled){var a=new Date;this.v.Dd=0;this.v.startTime=
a.getTime();this.v.Nd=this.v.Ii;this.v.Yc=this.v.Og}this.I("autorotatechanged",{})};e.prototype.Ht=function(){this.ma(!1)};e.prototype.Qt=function(){this.v.enabled&&(this.v.active=!0,this.v.kd=0)};e.prototype.Vt=function(a){this.v.pg=a;this.v.Wo=!0};e.prototype.Qp=function(a){this.Ba.running&&this.Ap();this.rc="";a&&""!=a&&(this.v.Nd=a);this.v.Jf=this.v.enabled;this.v.Yc=!0;this.v.enabled=!0;this.v.active=!0;this.v.kd=0;this.C.fe&&(this.C.ke=!0,this.C.le=!0);a=new Date;this.v.Dd=0;this.v.startTime=
a.getTime();this.I("autorotatechanged",{})};e.prototype.Pt=function(a){a&&""!=a&&this.v.Nd!=a||0==this.v.Dd?this.Qp(a):(this.v.Yc=!0,this.v.enabled=!0,this.v.active=!0,this.I("autorotatechanged",{}))};e.prototype.Ap=function(){this.Ba.running=!1;this.Ba.finished=!0;this.v.active=this.C.le;this.v.Yc=this.C.ke;this.va.splice(this.va.indexOf(this.P),1);0<this.va.length&&(this.P=this.va[0]);this.rc="";this.Pj(!1);this.C.le=!1;this.C.ke=!1;this.kg=(new Date).getTime()};e.prototype.ln=function(a){if(this.fc=
document.getElementById(a))return this.fc.innerHTML="",!0;alert("container not found!");return!1};e.prototype.Xt=function(a){var b=this;b.fc.removeEventListener("resize",function(){b.ge()});b.ln(a)&&(b.fc.appendChild(b.$),b.fc.addEventListener("resize",function(){b.ge()},!1))};e.prototype.sn=function(a){this.ln(a)&&(this.$=document.createElement("div"),this.$.onselectstart=function(){return!1},U&&this.$.setAttribute("id","viewport"),this.$.setAttribute("role","application"),a="top:\t0px;left: 0px;position:relative;-ms-touch-action: none;touch-action: none;text-align: left;"+
(this.yb+"user-select: none;"),this.$.setAttribute("style",a),this.fc.appendChild(this.$),this.da=document.createElement("div"),a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+(this.yb+"user-select: none;"),U&&this.da.setAttribute("id","viewer"),this.da.setAttribute("style",a),this.$.appendChild(this.da),this.eb&&(this.eb.ah=document.createElement("canvas"),U&&this.eb.ah.setAttribute("id","lensflarecanvas"),a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+
(this.yb+"user-select: none;"),a+=this.yb+"pointer-events: none;",this.eb.ah.setAttribute("style",a),this.$.appendChild(this.eb.ah)),this.Ga=document.createElement("div"),U&&this.Ga.setAttribute("id","hotspots"),a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;",this.vl&&(a+="background-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);"),this.Gc&&!this.na&&(a+=this.yb+"transform: translateZ(9999999px);"),a+=this.yb+"user-select: none;",
this.Ga.setAttribute("style",a),this.$.appendChild(this.Ga),this.Ca=document.createElement("div"),U&&this.Ca.setAttribute("id","hotspottext"),this.Ca.setAttribute("style","top:\t0px;left: 0px;position:absolute;padding: 3px;visibility: hidden;"),this.Ca.classList.add("ggskin"),this.Ca.classList.add("ggdefaulthotspot"),this.Ca.innerHTML=" Hotspot text!",this.$.appendChild(this.Ca),this.divSkin=this.sa=this.Ga,this.km(0))};e.prototype.yf=function(){var a;this.ka.ha.x=0;this.ka.ha.y=0;this.qa.yf();var b=
[];for(a=0;a<this.U.length;a++){var c=this.U[a];c.nd?"_videopanorama"!=c.id&&b.push(c):c.Ie()}for(a=0;a<this.Ua.length;a++)this.Ua[a].Ie();for(a=0;a<this.Pb.length;a++)this.Pb[a].Ie();this.R.Al=-1;this.Gd=0;this.Cf=[];this.Wa.zi=[];for(a=0;a<this.X.length;a++)c=this.X[a],c.Vo||7>this.ed&&0==c.mode||this.Cf.push(c);this.U=b;this.Ua=[];this.Pb=[];this.A.j&&(this.$.removeChild(this.A.j),this.A.j=null,a=this.Ta("_videopanorama"),0<a.length&&(a[0].j=null));this.A.Qc=!1;this.A.jg=!1};e.prototype.no=function(){var a=
1,b=-1!=navigator.userAgent.indexOf("Mac");window.devicePixelRatio&&b&&(a=window.devicePixelRatio);return{w:screen.width*a,h:screen.height*a}};e.prototype.co=function(){var a=this.no();return a.w>a.h?a.w:a.h};e.prototype.Tl=function(a,b){a=(new DOMParser).parseFromString(a,"text/xml");this.kp(a,b)};e.prototype.jp=function(a,b,c){try{var m=void 0;m=new XMLHttpRequest;m.open("GET",a,!1);m.send(null);if(m.responseXML){var h=a.lastIndexOf("/");0<=h&&(this.me=a.slice(0,h+1));2<=arguments.length&&null!=
b&&(this.me=b);this.Tl(m.responseText,c)}else alert("Error loading panorama XML")}catch(n){alert("Error:"+n)}};e.prototype.Kt=function(a,b,c,m){var h=new XMLHttpRequest;var n=this;h.onload=function(q){if(4<=h.readyState)if(h.responseXML){var r=a.lastIndexOf("/");0<=r&&(n.me=a.slice(0,r+1));3<=arguments.length&&null!=c&&(n.me=c);n.Tl(h.responseText,m);b&&b()}else alert("Error loading panorama XML");else console.error("Wrong state loading XML:"+h.statusText)};h.onerror=function(){console.error("Error loading XML:"+
h.statusText)};h.open("GET",a,!0);h.send(null)};e.prototype.zk=function(a){var b="";"{"==a.charAt(0)&&(b=a.slice(1,a.length-1));(a=this.pe[b])&&(b=a);a={oldNodeId:this.pa,nodeId:b};this.I("beforechangenodeid",a);this.kl?this.kl=!1:this.Jl.push(this.pa);""!=this.pa&&-1==this.jk.indexOf(this.pa)&&(this.jk.push(this.pa),this.I("changevisitednodes",{}));this.Jo=this.pa;this.pa=b;this.G("change active node: "+b);this.fa&&this.fa.changeActiveNode&&this.fa.changeActiveNode("{"+b+"}");this.I("changenodeid",
a);this.df=!0};e.prototype.Zi=function(){return this.pa};e.prototype.Yr=function(a){return 0<this.Xa.length?(a||(a=this.pa),a=this.Xa.indexOf(a),a++,a>=this.Xa.length&&(a=0),this.Xa[a]):""};e.prototype.ls=function(a){return 0<this.Xa.length?(a||(a=this.pa),a=this.Xa.indexOf(a),a--,0>a&&(a=this.Xa.length-1),this.Xa[a]):""};e.prototype.Qr=function(){return this.Jo};e.prototype.ps=function(){return this.Wb};e.prototype.mt=function(a){return-1!=this.jk.indexOf(a)};e.prototype.er=function(){this.jk=[];
this.I("changevisitednodes",{})};e.prototype.kp=function(a,b){a=a.firstChild;this.Qe=[];this.Xa=[];this.pe=[];this.Td=!1;var c;if(c=a.getAttributeNode("appversion")){if(c=c.nodeValue.toString().match(/(\d+)\.(\d+)\.?(\d+)?/))this.nn=[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3]||"0",10)];this.G(this.nn)}for(var m=a.firstChild;m;){if("map"==m.nodeName){var h={};(c=m.getAttributeNode("index"))&&(h.index=Number(c.nodeValue));(c=m.getAttributeNode("title"))&&(h.title=c.nodeValue.toString());c=m.getAttributeNode("type");
h.type=c.nodeValue.toString();"web"==h.type?(c=m.getAttributeNode("mapprovider"),h.mapprovider=c.nodeValue.toString(),(c=m.getAttributeNode("mapstyle"))&&(h.mapstyle=c.nodeValue.toString()),(c=m.getAttributeNode("googlecustomstylecode"))&&(h.googlecustomstylecode=c.nodeValue.toString()),(c=m.getAttributeNode("mapurltemplate"))&&(h.mapurltemplate=c.nodeValue.toString()),(c=m.getAttributeNode("mapmaxzoom"))&&(h.mapmaxzoom=Number(c.nodeValue)),(c=m.getAttributeNode("customlayernames"))&&(h.customlayernames=
c.nodeValue.toString().split("|")),(c=m.getAttributeNode("customlayerurltemplates"))&&(h.customlayerurltemplates=c.nodeValue.toString().split("|")),(c=m.getAttributeNode("customlayermaxzooms"))&&(h.customlayermaxzooms=c.nodeValue.toString().split("|")),(c=m.getAttributeNode("mapkey"))&&(h.mapkey=c.nodeValue.toString()),(c=m.getAttributeNode("styleurl"))&&(h.styleurl=c.nodeValue.toString()),(c=m.getAttributeNode("mapboxlayernames"))&&(h.mapboxlayernames=c.nodeValue.toString().split("|")),(c=m.getAttributeNode("mapboxlayerstyleurls"))&&
(h.mapboxlayerstyleurls=c.nodeValue.toString().split("|")),(c=m.getAttributeNode("googlelayernames"))&&(h.googlelayernames=c.nodeValue.toString().split("|")),(c=m.getAttributeNode("googlelayerstyles"))&&(h.googlelayerstyles=c.nodeValue.toString().split("|")),(c=m.getAttributeNode("maplimits"))&&(h.maplimits=c.nodeValue.toString().split("|"))):(c=m.getAttributeNode("width"),h.width=Number(c.nodeValue),c=m.getAttributeNode("height"),h.height=Number(c.nodeValue),c=m.getAttributeNode("zoomlevels"),h.zoomlevels=
Number(c.nodeValue),c=m.getAttributeNode("tileformat"),h.tileformat=c.nodeValue.toString(),c=m.getAttributeNode("bgcolor"),h.bgcolor=c.nodeValue.toString(),c=m.getAttributeNode("crispedges"),h.crispedges=1==c.nodeValue,c=m.getAttributeNode("transparent"),h.transparent=1==c.nodeValue,c=m.getAttributeNode("floorplannorth"),h.floorplannorth=Number(c.nodeValue));c=m.getAttributeNode("id");this.mc[c.nodeValue.toString()]=h}m=m.nextSibling}if("tour"==a.nodeName){this.Cd=!0;if(c=a.getAttributeNode("start"))this.Wb=
c.nodeValue.toString();this.hasOwnProperty("startNode")&&this.startNode&&(this.Wb=String(this.startNode),this.startNode="");this.hasOwnProperty("startView")&&this.startView&&("object"===typeof this.startView&&null!==this.startView?b=this.startView:""!=this.startView&&(b=String(this.startView)),this.startView="");m=a.firstChild;for(a=h="";m;){if("panorama"==m.nodeName){if(c=m.getAttributeNode("id"))h=c.nodeValue.toString(),""==this.Wb&&(this.Wb=h),""==a&&(a=h),this.Qe[h]=m,this.Xa.push(h);for(c=m.firstChild;c;){if("userdata"==
c.nodeName){var n=this.Wf(c);this.Qg[h]=n;h==this.Wb&&(this.Qg._first=n);n.customnodeid&&(this.pe[n.customnodeid]=h);this.Sc[h]=this.Bn(c);this.mg[h]=this.Cn(c);this.Ff[h]=this.Dn(c)}if("hotspots"==c.nodeName)for(n=c.firstChild;n;)"hotspot"!=n.nodeName&&"polyhotspot"!=n.nodeName||this.Tk(h,c),n=n.nextSibling;if("sounds"==c.nodeName||"media"==c.nodeName)for(n=c.firstChild;n;){"sound"!=n.nodeName||this.Il||(this.Td=!0);if("video"==n.nodeName){var q;(q=n.getAttributeNode("level"))&&0<Number(q.nodeValue)&&
(this.Td=!0)}n=n.nextSibling}c=c.nextSibling}}if("masternode"==m.nodeName)for(c=m.firstChild;c;){"userdata"==c.nodeName&&(n=this.Wf(c),this.Qg._master=n);"animationsequences"==c.nodeName&&this.rr(c);if("translations"==c.nodeName){(q=c.getAttributeNode("json"))&&this.Wg(q.nodeValue.toString());for(n=c.firstChild;n;){"json"==n.nodeName&&this.Wg(n.textContent);if("projecttranslation"==n.nodeName){var r={};if(q=n.getAttributeNode("langcode"))r.langCode=q.nodeValue;if(q=n.getAttributeNode("langname"))r.langName=
q.nodeValue;this.Pl.push(r)}n=n.nextSibling}this.zl||this.hm(window.navigator.language)}c=c.nextSibling}"customproperty"==m.nodeName&&this.An(m);m=m.nextSibling}!this.Qe.hasOwnProperty(this.Wb)&&(m=this.pe[this.Wb])&&(this.Wb=m);this.Qe.hasOwnProperty(this.Wb)||(this.Rc("Start node "+this.Wb+" not found!"),this.Wb=a);this.Sl(this.Qe[this.Wb],b);this.zk("{"+this.Wb+"}");this.pa=this.Wb}else this.Cd=!1,this.Sl(a,b),this.zk(""),this.Xa.push("");this.he&&(this.G("add pano vr config"),this.Aa.Gi());this.Td&&
(this.Os(),this.Rp());this.I("configloaded",{});this.I("changenode",{});this.I("playerstatechanged",{})};e.prototype.Sl=function(a,b){var c=this;this.pp();this.eb&&this.eb.Mt();this.Ke(this.bb);this.yf();this.ik=0;for(var m=a.firstChild,h,n,q=0,r=this.L.M;m;){if("view"==m.nodeName){if(h=m.getAttributeNode("fovmode"))this.fov.mode=Number(h.nodeValue);h=m.getAttributeNode("pannorth");this.pan.Cj=1*(h?h.nodeValue:0);for(var t=m.firstChild;t;){"start"==t.nodeName&&(h=t.getAttributeNode("pan"),this.pan.m=
Number(h?h.nodeValue:0),this.pan.Fa=this.pan.m,h=t.getAttributeNode("tilt"),this.u.m=Number(h?h.nodeValue:0),this.u.Fa=this.u.m,h=t.getAttributeNode("roll"),this.W.m=Number(h?h.nodeValue:0),this.W.Fa=this.W.m,h=t.getAttributeNode("fov"),this.fov.m=Number(h?h.nodeValue:70),this.fov.Fa=this.fov.m,h=t.getAttributeNode("projection"),this.L.bp=Number(h?h.nodeValue:4),this.pb(this.zh()));"min"==t.nodeName&&(h=t.getAttributeNode("pan"),this.pan.min=1*(h?h.nodeValue:0),h=t.getAttributeNode("tilt"),this.u.min=
1*(h?h.nodeValue:-90),h=t.getAttributeNode("fov"),this.fov.min=1*(h?h.nodeValue:5),1E-20>this.fov.min&&(this.fov.min=1E-20),h=t.getAttributeNode("fovpixel"),this.fov.Th=1*(h?h.nodeValue:0));if("max"==t.nodeName){h=t.getAttributeNode("pan");this.pan.max=1*(h?h.nodeValue:0);h=t.getAttributeNode("tilt");this.u.max=1*(h?h.nodeValue:90);h=t.getAttributeNode("fov");this.fov.max=1*(h?h.nodeValue:120);180<=this.fov.max&&(this.fov.max=179.9);if(h=t.getAttributeNode("fovstereographic"))this.fov.Hl=1*h.nodeValue;
if(h=t.getAttributeNode("fovfisheye"))this.fov.Gl=1*h.nodeValue;if(h=t.getAttributeNode("scaletofit"))this.J.xp=1==h.nodeValue}if("flyin"==t.nodeName){if(h=t.getAttributeNode("projection"))this.ic.nb=Number(h.nodeValue);if(h=t.getAttributeNode("pan"))this.ic.pan=parseFloat(h.nodeValue);if(h=t.getAttributeNode("tilt"))this.ic.u=parseFloat(h.nodeValue);if(h=t.getAttributeNode("fov"))this.ic.fov=parseFloat(h.nodeValue)}t=t.nextSibling}}if("autorotate"==m.nodeName){if(h=m.getAttributeNode("speed"))this.v.speed=
1*h.nodeValue;if(h=m.getAttributeNode("delay"))this.v.timeout=1*h.nodeValue;if(h=m.getAttributeNode("returntohorizon"))this.v.ak=1*h.nodeValue;if(h=m.getAttributeNode("horizonfromdefview"))this.v.vo=1==h.nodeValue;if(h=m.getAttributeNode("nodedelay"))this.v.Bj=1*h.nodeValue;if(h=m.getAttributeNode("noderandom"))this.v.Xo=1==h.nodeValue;(h=m.getAttributeNode("nodefilter"))&&!this.v.Wo&&(this.v.pg=h.nodeValue);this.yd&&(this.v.enabled=!0,this.v.Jf=!0,this.v.active=!1);(h=m.getAttributeNode("startloaded"))&&
this.yd&&(this.v.Ag=1==h.nodeValue,this.v.Ag&&(this.v.active=!1));if(h=m.getAttributeNode("useanimation"))this.v.Og=1==h.nodeValue,this.v.Yc=this.v.Og;if(h=m.getAttributeNode("syncanimationwithvideo"))this.v.tm=1==h.nodeValue}if("animation"==m.nodeName){if(h=m.getAttributeNode("syncanimationwithvideo"))this.v.tm=1==h.nodeValue;if(h=m.getAttributeNode("useinautorotation"))this.v.Og=1==h.nodeValue;if(h=m.getAttributeNode("animsequence"))this.v.Ii=h.nodeValue,this.yd&&(this.v.Nd=this.v.Ii);if(h=m.getAttributeNode("clipsrandom"))this.v.mn=
1==h.nodeValue;this.va=[];for(t=m.firstChild;t;){if("clip"==t.nodeName){this.P=new y.Pm;if(h=t.getAttributeNode("animtitle"))this.P.Te=h.nodeValue.toString();if(h=t.getAttributeNode("cliptitle"))this.P.$a=h.nodeValue.toString();if(h=t.getAttributeNode("nodeid"))this.P.tv=h.nodeValue.toString();if(h=t.getAttributeNode("length"))this.P.length=Number(h.nodeValue);if(h=t.getAttributeNode("animtype"))this.P.Oq=Number(h.nodeValue);if(h=t.getAttributeNode("nextcliptitle"))this.P.Uo=h.nodeValue.toString();
if(h=t.getAttributeNode("nextclipnodeid"))this.P.To=h.nodeValue.toString();if(h=t.getAttributeNode("nextclipstartview"))this.P.lt=h.nodeValue.toString();if(h=t.getAttributeNode("transitiontype"))this.P.Uu=Number(h.nodeValue);var w=t.firstChild;for(this.P.Ha=[];w;){if("keyframe"==w.nodeName){var z=new y.dd;if(h=w.getAttributeNode("time"))z.time=Number(h.nodeValue);if(h=w.getAttributeNode("value"))z.value=Number(h.nodeValue);if(h=w.getAttributeNode("valuestring"))z.Im=h.nodeValue.toString();if(h=w.getAttributeNode("transitiontime"))z.Eb=
Number(h.nodeValue);h=w.getAttributeNode("type");var C=0;h&&(z.type=Number(h.nodeValue),C=Number(h.nodeValue));if(h=w.getAttributeNode("property"))z.ob=Number(h.nodeValue);if(h=w.getAttributeNode("additionaltrackid"))z.qd=h.nodeValue.toString();if(h=w.getAttributeNode("additionaltracktype"))z.Vm=Number(h.nodeValue);if(1==C||2==C){if(h=w.getAttributeNode("bezierintime"))z.Ue=Number(h.nodeValue);if(h=w.getAttributeNode("bezierinvalue"))z.Ve=Number(h.nodeValue);if(h=w.getAttributeNode("bezierouttime"))z.We=
Number(h.nodeValue);if(h=w.getAttributeNode("bezieroutvalue"))z.Xe=Number(h.nodeValue)}this.P.Ha.push(z)}w=w.nextSibling}this.va.push(this.P);"__VideoPano"==this.P.$a&&(this.ik=this.P)}t=t.nextSibling}}"input"==m.nodeName&&(n||(n=m));if(n)for(w=0;6>w;w++)h=n.getAttributeNode("prev"+w+"url"),this.jh[w]=h?String(h.nodeValue):"";"altinput"==m.nodeName&&(t=0,(h=m.getAttributeNode("screensize"))&&(t=1*h.nodeValue),0<t&&t<=this.co()&&t>q&&(q=t,n=m));if("control"==m.nodeName&&this.yd){if(h=m.getAttributeNode("simulatemass"))this.ka.enabled=
1==h.nodeValue;if(h=m.getAttributeNode("rubberband"))this.J.wp=1==h.nodeValue;if(h=m.getAttributeNode("zoomcentercursor"))this.J.Hf=1==h.nodeValue;if(h=m.getAttributeNode("locked"))this.J.lc=1==h.nodeValue;h&&(this.J.Ph=1==h.nodeValue);if(h=m.getAttributeNode("lockedmouse"))this.J.lc=1==h.nodeValue;if(h=m.getAttributeNode("lockedkeyboard"))this.J.Ph=1==h.nodeValue;if(h=m.getAttributeNode("lockedkeyboardzoom"))this.J.Xs=1==h.nodeValue;if(h=m.getAttributeNode("lockedwheel"))this.J.Ce=1==h.nodeValue;
if(h=m.getAttributeNode("invertwheel"))this.J.zo=1==h.nodeValue;if(h=m.getAttributeNode("speedwheel"))this.J.pm=1*h.nodeValue;if(h=m.getAttributeNode("invertcontrol"))this.J.Vd=1==h.nodeValue;if(h=m.getAttributeNode("sensitivity"))this.J.sensitivity=1*h.nodeValue,1>this.J.sensitivity&&(this.J.sensitivity=1);if(h=m.getAttributeNode("dblclickfullscreen"))this.J.Ok=1==h.nodeValue;if(h=m.getAttributeNode("contextfullscreen"))this.J.gh=1==h.nodeValue;if(h=m.getAttributeNode("contextvr"))this.J.hh=1==h.nodeValue;
if(h=m.getAttributeNode("contextprojections"))this.J.Pi=1==h.nodeValue;if(h=m.getAttributeNode("hideabout"))this.J.gg=1==h.nodeValue;for(t=m.firstChild;t;)"menulink"==t.nodeName&&(w={text:"",url:""},h=t.getAttributeNode("text"),w.text=h.nodeValue,h=t.getAttributeNode("url"),w.url=h.nodeValue,this.Sh.push(w)),t=t.nextSibling}"vr"==m.nodeName&&this.yd&&(h=m.getAttributeNode("toggleskinbutton"))&&(this.Aa.zn=1==h.nodeValue);if("transition"==m.nodeName&&this.yd){if(h=m.getAttributeNode("enabled"))this.C.enabled=
1==h.nodeValue;if(h=m.getAttributeNode("blendtime"))this.C.$g=1*h.nodeValue;if(h=m.getAttributeNode("blendcolor"))this.C.Kf=h.nodeValue.toString();if(h=m.getAttributeNode("type"))this.C.type=h.nodeValue.toString();if(h=m.getAttributeNode("delay"))this.C.delay=h.nodeValue.toString();if(h=m.getAttributeNode("softedge"))this.C.Wc=1*h.nodeValue;if(h=m.getAttributeNode("zoomin"))this.C.ca=1*h.nodeValue;if(h=m.getAttributeNode("zoomout"))this.C.cd=1*h.nodeValue;if(h=m.getAttributeNode("zoomfov"))this.C.qk=
1*h.nodeValue;if(h=m.getAttributeNode("zoomafterinfov"))this.C.nk=1*h.nodeValue;if(h=m.getAttributeNode("zoomafteroutfov"))this.C.pk=1*h.nodeValue;if(h=m.getAttributeNode("zoomspeed"))this.C.Ug=1*h.nodeValue;if(h=m.getAttributeNode("zoomoutpause"))this.C.Tg=1==h.nodeValue;"cut"==this.C.type&&(this.C.$g=0)}if("soundstransition"==m.nodeName){if(h=m.getAttributeNode("enabled"))this.Wa.enabled=1==h.nodeValue;if(h=m.getAttributeNode("transitiontime"))this.Wa.Eb=1*h.nodeValue;if(h=m.getAttributeNode("crossfade"))this.Wa.tn=
1==h.nodeValue}if("flyintransition"==m.nodeName){if(h=m.getAttributeNode("enabled"))this.Ba.enabled=1==h.nodeValue&&this.na;if(h=m.getAttributeNode("speed"))this.Ba.speed=1*h.nodeValue}"userdata"==m.nodeName&&(this.userdata=this.Pg=this.Wf(m),this.Sc[a.id]||(this.Sc[a.id]=this.Bn(m),this.mg[a.id]=this.Cn(m),this.Ff[a.id]=this.Dn(m)));"projectuserdata"==m.nodeName&&(this.Qg._master=this.Wf(m));"customproperty"==m.nodeName&&this.An(m);if("translations"==m.nodeName)for((h=m.getAttributeNode("json"))&&
this.Wg(h.nodeValue.toString()),this.zl||this.hm(window.navigator.language),t=m.firstChild;t;){"json"==t.nodeName&&this.Wg(t.textContent);if("projecttranslation"==t.nodeName){w={};if(h=t.getAttributeNode("langcode"))w.langCode=h.nodeValue;if(h=t.getAttributeNode("langname"))w.langName=h.nodeValue;this.Pl.push(w)}t=t.nextSibling}if("hotspots"==m.nodeName){if(h=m.getAttributeNode("smoothmovement"))this.Op=1==h.nodeValue;for(t=m.firstChild;t;){if("label"==t.nodeName&&this.yd){w=this.R.Zj;if(h=t.getAttributeNode("enabled"))w.enabled=
1==h.nodeValue;if(h=t.getAttributeNode("width"))w.width=1*h.nodeValue;if(h=t.getAttributeNode("height"))w.height=1*h.nodeValue;if(h=t.getAttributeNode("textcolor"))w.$j=1*h.nodeValue;if(h=t.getAttributeNode("textalpha"))w.Yj=1*h.nodeValue;if(h=t.getAttributeNode("background"))w.background=1==h.nodeValue;if(h=t.getAttributeNode("backgroundalpha"))w.$b=1*h.nodeValue;if(h=t.getAttributeNode("backgroundcolor"))w.ac=1*h.nodeValue;if(h=t.getAttributeNode("border"))w.Ki=1*h.nodeValue;if(h=t.getAttributeNode("bordercolor"))w.cc=
1*h.nodeValue;if(h=t.getAttributeNode("borderalpha"))w.bc=1*h.nodeValue;if(h=t.getAttributeNode("borderradius"))w.wk=1*h.nodeValue;if(h=t.getAttributeNode("wordwrap"))w.mk=1==h.nodeValue}if("polystyle"==t.nodeName&&this.yd){if(h=t.getAttributeNode("mode"))this.R.mode=1*h.nodeValue;if(h=t.getAttributeNode("bordercolor"))this.R.cc=1*h.nodeValue;if(h=t.getAttributeNode("backgroundcolor"))this.R.ac=1*h.nodeValue;if(h=t.getAttributeNode("borderalpha"))this.R.bc=1*h.nodeValue;if(h=t.getAttributeNode("backgroundalpha"))this.R.$b=
1*h.nodeValue;if(h=t.getAttributeNode("handcursor"))this.R.ye=1==h.nodeValue}h=void 0;"hotspot"==t.nodeName&&(h=new y.Fi(this),h.type="point",h.ub(t),this.K.push(h),this.Tk(a.id,t));"polyhotspot"==t.nodeName&&(h=new y.Fi(this),h.type="poly",h.ub(t),this.K.push(h),this.Tk(a.id,t));t=t.nextSibling}}if("sounds"==m.nodeName||"media"==m.nodeName)for(t=m.firstChild;t;){if("sound"==t.nodeName&&!this.Il)for(this.Td=!0,h=new y.ie(this),h.ub(t),h.addElement(),w=0;w<this.Cf.length;w++)h.id==this.Cf[w].id&&(this.Cf.splice(w,
1),w--);"video"==t.nodeName&&(h=new y.Tm(this),h.ub(t),h.addElement(),0<h.level&&(this.Td=!0));"image"==t.nodeName&&(h=new y.Cq(this),h.ub(t),h.addElement());"webelement"==t.nodeName&&(h=new y.Eq(this),h.ub(t),h.addElement());"lensflare"==t.nodeName&&this.eb&&(h=new y.Dq(this),h.ub(t),this.eb.Oh.push(h));t=t.nextSibling}m=m.nextSibling}for(w=this.v.Dd=0;w<this.Cf.length;w++){a=this.Cf[w];if(this.ga&&this.Wa.enabled&&this.isPlaying(a.id))this.Wa.zi.push(a);else{try{a.ua?a.Mf():a.j.pause()}catch(D){this.G(D)}a.Ie()}this.X.splice(this.X.indexOf(a),
1)}1!=this.C.ca&&2!=this.C.ca&&6!=this.C.ca&&7!=this.C.ca&&this.Fn();this.he||(this.lb.hi=!0);b&&("object"===typeof b&&null!==b?(b.hasOwnProperty("pan")&&this.$d(Number(b.pan)),b.hasOwnProperty("tilt")&&this.ae(Number(b.tilt)),b.hasOwnProperty("projection")&&this.pb(Number(b.projection)),b.hasOwnProperty("fov")&&this.wb(Number(b.fov))):""!=b&&(b=b.toString().split("/"),4<b.length&&this.pb(Number(b[4])),0<b.length&&(h=String(b[0]),"N"==h.charAt(0)?this.Rj(Number(h.substr(1))):"S"==h.charAt(0)?this.Rj(-180+
Number(h.substr(1))):this.$d(Number(h))),1<b.length&&this.ae(Number(b[1])),2<b.length&&this.wb(Number(b[2]))),this.pan.open=this.pan.m,this.Ba.wd.pan=this.pan.m,this.Ba.wd.u=this.u.m,this.Ba.wd.fov=this.fov.m,this.Ba.wd.nb=this.Z(),this.Ba.wd.lq=!0);if(n){h=n.getAttributeNode("stereo");this.Bd=!1;h&&1==h.nodeValue&&(this.Bd=!0);h=n.getAttributeNode("fliplr");this.Bg=!1;h&&1==h.nodeValue&&(this.Bg=!0);for(w=0;w<(this.Bd?12:6);w++)(h=n.getAttributeNode("tile"+w+"url"))&&(this.ih[w]=String(h.nodeValue));
for(w=0;6>w;w++)(h=n.getAttributeNode("prev"+w+"url"))&&(this.jh[w]=String(h.nodeValue));if(h=n.getAttributeNode("tilevrurl"))this.Kk=String(h.nodeValue);if(h=n.getAttributeNode("tilesize"))this.Oe=1*h.nodeValue;h=n.getAttributeNode("canvassize");if(h=n.getAttributeNode("tilescale"))this.Gg=1*h.nodeValue;if(h=n.getAttributeNode("leveltileurl"))r.El=h.nodeValue;if(h=n.getAttributeNode("leveltilesize"))r.V=Number(h.nodeValue);if(h=n.getAttributeNode("levelbias"))r.No=Number(h.nodeValue);if(h=n.getAttributeNode("levelbiashidpi"))r.Oo=
Number(h.nodeValue);h=n.getAttributeNode("overlap");this.Va.W=0;this.Va.pitch=0;h&&(r.fb=Number(h.nodeValue));if(h=n.getAttributeNode("levelingroll"))this.Va.W=Number(h.nodeValue);if(h=n.getAttributeNode("levelingpitch"))this.Va.pitch=Number(h.nodeValue);this.Gd=0;(h=n.getAttributeNode("flat"))&&1==h.nodeValue&&(this.Gd=2);h=n.getAttributeNode("width");r.width=1*(h?h.nodeValue:1);h=n.getAttributeNode("height");r.height=1*(h?h.nodeValue:r.width);this.A.src=[];r.levels=[];for(t=n.firstChild;t;){if("preview"==
t.nodeName){if(h=t.getAttributeNode("color"))r.Hj=h.nodeValue;if(h=t.getAttributeNode("strip"))r.ip=1==h.nodeValue}if("video"==t.nodeName){if(h=t.getAttributeNode("format"))"3x2"==h.nodeValue&&(this.A.format=14),"equirectangular"==h.nodeValue&&(this.A.format=1);if(h=t.getAttributeNode("flipy"))this.A.flipY=Number(h.nodeValue);if(h=t.getAttributeNode("startonload"))this.A.Uj=1==h.nodeValue;if(h=t.getAttributeNode("startmutedmobile"))this.A.qm=1==h.nodeValue;if(h=t.getAttributeNode("level"))this.A.level=
Number(h.nodeValue);if(h=t.getAttributeNode("bleed"))this.A.Ye=Number(h.nodeValue);if(h=t.getAttributeNode("endaction"))this.A.re=String(h.nodeValue);if(h=t.getAttributeNode("targetview"))this.A.Xj=String(h.nodeValue);if(h=t.getAttributeNode("width"))this.A.width=Number(h.nodeValue);if(h=t.getAttributeNode("height"))this.A.height=Number(h.nodeValue);for(w=t.firstChild;w;)"source"==w.nodeName&&(h=w.getAttributeNode("url"))&&this.A.src.push(h.nodeValue.toString()),w=w.nextSibling;0<this.A.src.length&&
""!=this.A.src[0]&&0<this.A.level&&(this.Td=!0)}if("level"==t.nodeName){n=new y.Sm;h=t.getAttributeNode("width");n.width=1*(h?h.nodeValue:1);h=t.getAttributeNode("height");n.height=1*(h?h.nodeValue:n.width);if(h=t.getAttributeNode("preload"))n.cache=1==h.nodeValue;if(h=t.getAttributeNode("preview"))n.xf=1==h.nodeValue;n.Y=Math.floor((n.width+r.V-1)/r.V);n.ra=Math.floor((n.height+r.V-1)/r.V);r.levels.push(n)}t=t.nextSibling}r.Dl=r.levels.length}this.kf=!0;this.Lg&&(this.na=this.Kg=!1,this.Bc||(this.G("dummy rendering"),
this.Bc=document.createElement("canvas"),this.Bc.width=100,this.Bc.height=100,this.Bc.id="dummycanvas",this.da.appendChild(this.Bc)),this.Xb());this.na&&this.S&&(this.qa.xo(this.Gg),this.qa.yo());var E=this;0<r.levels.length&&r.ip&&0==this.Gd&&(b=new Image,n=new y.Sm,n.xf=!0,n.cache=!0,n.Y=n.ra=0,n.height=n.width=0,r.levels.push(n),b.crossOrigin=this.crossOrigin,b.onload=this.qa.jt(b),b.setAttribute("src",this.L.Fg(6,r.Dl-1,0,0)));if(0<this.A.src.length&&this.na)if(this.Bi){this.A.j=document.createElement("video");
this.A.j.crossOrigin=this.crossOrigin;this.A.j.setAttribute("style","display:none; max-width:none;");this.A.j.setAttribute("playsinline","playsinline");this.A.j.preload=!0;this.A.j.volume=this.aa*this.A.level;this.$.appendChild(this.A.j);this.A.Qc=!1;this.A.xm=!1;this.A.j.oncanplay=function(){if(!E.A.Qc){E.A.jg=!0;var D,F,A=[],G=new y.Ra,I=E.S,J=E.A.j.videoWidth/3;E.A.width=E.A.j.videoWidth;E.A.height=E.A.j.videoHeight;for(D=0;6>D;D++){var H=D%3*J+E.A.Ye;var L=H+J-2*E.A.Ye;var K=4;3>D&&(K+=J);var M=
K+J-2*E.A.Ye;for(F=0;4>F;F++){G.x=-1;G.y=-1;G.z=1;for(var O=0;O<F;O++)G.vp();A.push((0<G.x?H:L)/(3*J),(0<G.y?M:K)/(2*J))}}I.bindBuffer(I.ARRAY_BUFFER,E.A.vi);I.bufferData(I.ARRAY_BUFFER,new Float32Array(A),I.STATIC_DRAW);E.C.Xc&&"videopano"==E.C.delay&&E.Vj(null)}};this.A.ib=function(){var D=E.Ta("_videopanorama");return 0<D.length&&D[0].ib?D[0].ib:0};this.A.bm=function(D){var F=E.Ta("_videopanorama");0<F.length&&(F[0].ib=D)};this.A.loop=function(){return 0<E.A.ib()?(E.A.bm(E.A.ib()-1),E.A.j.play(),
!0):!1};"exit"==this.A.re?this.A.j.onended=function(){E.A.jg=!1;E.A.Qc=!1;E.$.removeChild(E.A.j);E.A.j=null;E.update()}:"stop"==this.A.re?E.A.j.onended=function(){E.A.loop()||E.update()}:"{"==this.A.re.charAt(0)?this.A.j.onended=function(){E.od(E.A.re,E.A.Xj)}:this.A.j.loop=!0;for(w=0;w<this.A.src.length;w++)r=document.createElement("source"),r.setAttribute("src",this.jb(this.A.src[w])),this.A.j.appendChild(r);r=this.Ta("_videopanorama");0<r.length?r[0].j=this.A.j:this.lp("_videopanorama",this.A.j);
if(this.A.Uj&&(r=this.A.j.play(),void 0!==r))r.then(function(){})["catch"](function(){c.A.qm&&(c.A.j.muted=!0,c.A.j.play())})}else"{"==this.A.re.charAt(0)&&E.od(E.A.re,E.A.Xj);this.Um();this.C.Id||this.Vp();this.update();this.yd&&(this.yd=!1,this.I("viewerinit",{}),this.sa&&this.sa.ggViewerInit&&this.sa.ggViewerInit(),this.Ba.enabled&&0==this.Gd&&this.na&&(this.pb(9),this.pan.m=this.ic.pan,this.u.m=this.ic.u,this.fov.m=this.ic.fov,this.pb(this.ic.nb),this.P=this.Yk(!1),this.pan.m=this.Tb(0,0).value,
this.u.m=this.Tb(0,1).value,this.fov.m=this.Tb(0,2).value,r=this.Tb(0,3).value,3==r&&this.pb(r),this.rc=this.P.$a,this.Pj(!0),this.v.active=!1,this.v.uh=!0));this.Xb()};e.prototype.Kl=function(a,b){0<a.length&&(".xml"==a.slice(-4)||".swf"==a.slice(-4)||"{"==a.charAt(0)?this.od(this.jb(a),b):window.open(this.jb(a),b))};e.prototype.Hu=function(){this.kf=this.isLoaded=!1;this.checkLoaded=this.sd=[];this.Zh=0;this.sa&&this.sa.ggReLoaded&&this.sa.ggReLoaded();this.I("beforechangenode",{})};e.prototype.Fs=
function(a){var b="";0<this.Jl.length&&(b=this.Jl.pop());""!=b&&(this.kl=!0);this.od("{"+b+"}",a)};e.prototype.od=function(a,b){if(""!=a&&"{}"!=a){this.Hu();this.te&&!this.Lg&&(this.Pc(0),this.Xb());this.fa&&this.fa.hotspotProxyOut&&this.fa.hotspotProxyOut(this.O.id,this.O.url);this.I("hsproxyout",{id:this.O.id,url:this.O.url});".swf"==a.substr(a.length-4)&&(a=a.substr(0,a.length-4)+".xml");var c="",m=null;"object"===typeof b&&null!==b?m=b:b&&(c=b.toString());b="/"+this.u.m+"/"+this.fov.m+"//"+this.Z();
c=c.replace("$cur",this.pan.m+b);c=c.replace("$(cur)",this.pan.m+b);c=c.replace("$fwd","N"+this.Rd()+b);c=c.replace("$(fwd)","N"+this.Rd()+b);c=c.replace("$bwd","S"+this.Rd()+b);c=c.replace("$(bwd)","S"+this.Rd()+b);c=c.replace("$ap",String(this.pan.m));c=c.replace("$(ap)",String(this.pan.m));c=c.replace("$an",String(this.Rd()));c=c.replace("$(an)",String(this.Rd()));c=c.replace("$at",String(this.u.m));c=c.replace("$(at)",String(this.u.m));c=c.replace("$af",String(this.fov.m));c=c.replace("$(af)",
String(this.fov.m));c=c.replace("$ar",String(this.Z()));c=c.replace("$(ar)",String(this.Z()));""!=c&&(b=c.split("/"),3<b.length&&""!=b[3]&&(this.startNode=b[3]));m=null!==m?m:c;this.ma(!1);if("{"==a.charAt(0)){b=a.substr(1,a.length-2);if(this.pa==b&&this.dh){this.kf=this.isLoaded=!0;return}(c=this.pe[b])&&(b=c);c=this.C;var h=this.S;if(this.Qe[b]){this.dh=!0;if(this.C.enabled&&this.na&&this.C.xc){c.Lp=!0;c.fe||c.Id||c.Xc||this.Pj(!0);var n=void 0;"wipeleftright"==c.type?n=1:"wiperightleft"==c.type?
n=2:"wipetopbottom"==c.type?n=3:"wipebottomtop"==c.type?n=4:"wiperandom"==c.type&&(n=Math.ceil(4*Math.random()));c.Nk=n;h.bindFramebuffer(h.FRAMEBUFFER,c.xc);h.viewport(0,0,c.xc.width,c.xc.height);h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);c.yi=!0;this.Ai();c.yi=!1;h.bindFramebuffer(h.FRAMEBUFFER,null);h.viewport(0,0,this.zb.width,this.zb.height);h=new Date;this.O!=this.bb&&6!=c.ca?7==c.ca?(c.Rg=this.O.Jc/this.D.width,c.Sg=.5):(c.Rg=this.O.Jc/this.D.width,c.Sg=1-this.O.uc/this.D.height):(c.Rg=
.5,c.Sg=.5);if(1==c.ca||2==c.ca||6==c.ca||7==c.ca)c.uq=h.getTime()+100,c.Id=!0,c.Fb=Math.sin(this.zd()/2*Math.PI/180)/Math.sin(c.qk/2*Math.PI/180),c.Fb=Math.max(c.Fb,1),c.tq=1/c.Ug*c.Fb*.3}this.Sl(this.Qe[b],m);this.zk(a);if(c.enabled&&this.na&&(this.gq(null),0!=c.cd)){c.um=this.gf();c.vm=this.cg();c.ui=this.zd();c.ce=this.Z();if(1==c.cd||3==c.cd)this.wb(c.pk);else if(2==c.cd)this.wb(c.nk);else if(4==c.cd){for(m=a=0;m<this.va.length;m++)this.va[m].$a&&0==this.va[m].$a.indexOf("__FlyIn")&&(a=this.va[m]);
0!=a?(this.pb(this.bj(3,a).value),this.$d(this.bj(0,a).value),this.ae(this.bj(1,a).value),this.wb(this.bj(2,a).value)):(this.pb(this.ic.nb),this.$d(this.ic.pan),this.ae(this.ic.u),this.wb(this.ic.fov))}c.Tg||1==c.ca||2==c.ca||6==c.ca||7==c.ca||this.rm()}c.Lp=!1;this.he&&(this.G("add pano opennext"),this.Aa.Gi());this.C.Id||this.C.fe||this.C.Xc||(this.ea&&this.Jk(),this.dh=!1)}else{this.Rc("invalid node id: "+b);return}}else this.jp(a,null,m);this.I("changenode",{});this.update(5)}};e.prototype.fo=
function(){return this.kf?this.Cd?this.Xa.slice(0):[""]:[]};e.prototype.Wf=function(a){var b;var c={title:"",description:"",author:"",datetime:"",copyright:"",source:"",information:"",comment:"",latitude:0,longitude:0,altitude:-1E4,heading:0,customnodeid:"",streetviewlink:"",tags:[]};if(a&&((b=a.getAttributeNode("title"))&&(c.title=b.nodeValue.toString()),(b=a.getAttributeNode("description"))&&(c.description=b.nodeValue.toString()),(b=a.getAttributeNode("author"))&&(c.author=b.nodeValue.toString()),
(b=a.getAttributeNode("datetime"))&&(c.datetime=b.nodeValue.toString()),(b=a.getAttributeNode("copyright"))&&(c.copyright=b.nodeValue.toString()),(b=a.getAttributeNode("source"))&&(c.source=b.nodeValue.toString()),(b=a.getAttributeNode("info"))&&(c.information=b.nodeValue.toString()),(b=a.getAttributeNode("comment"))&&(c.comment=b.nodeValue.toString()),(b=a.getAttributeNode("latitude"))&&(c.latitude=Number(b.nodeValue)),(b=a.getAttributeNode("longitude"))&&(c.longitude=Number(b.nodeValue)),(b=a.getAttributeNode("nodeid"))&&
(c.nodeid=b.nodeValue.toString()),(b=a.getAttributeNode("altitude"))&&(c.altitude=Number(b.nodeValue)),(b=a.getAttributeNode("heading"))&&(c.heading=Number(b.nodeValue)),(b=a.getAttributeNode("customnodeid"))&&(c.customnodeid=b.nodeValue.toString()),(b=a.getAttributeNode("streetviewlink"))&&(c.streetviewlink=b.nodeValue.toString()),b=a.getAttributeNode("tags"))){a=b.nodeValue.toString().split("|");for(b=0;b<a.length;b++)""==a[b]&&(a.splice(b,1),b--);c.tags=a}return c};e.prototype.rr=function(a){for(var b=
"",c=a.firstChild;c;){if("sequence"==c.nodeName){if(a=c.getAttributeNode("title"))b=a.nodeValue;for(var m=[],h=c.firstChild;h;){if("sequenceelement"==h.nodeName){var n={};if(a=h.getAttributeNode("index"))n.index=a.nodeValue;if(a=h.getAttributeNode("nodeid"))n.nodeid=a.nodeValue;if(a=h.getAttributeNode("cliptitle"))n.cliptitle=a.nodeValue;if(a=h.getAttributeNode("startview"))n.startview=a.nodeValue;m.push(n)}h=h.nextSibling}this.Zm[b]=m}c=c.nextSibling}};e.prototype.Bn=function(a){for(var b={},c=a.firstChild;c;){if("mapcoords"==
c.nodeName){var m={x:0,y:0};a=c.getAttributeNode("x");m.x=Number(a.nodeValue);a=c.getAttributeNode("y");m.y=Number(a.nodeValue);a=c.getAttributeNode("mapid");b[a.nodeValue.toString()]=m}c=c.nextSibling}return b};e.prototype.Cn=function(a){for(var b={},c=a.firstChild;c;){if("mapcoords"==c.nodeName){var m={x:0,y:0};a=c.getAttributeNode("x_floorplan_percent");m.x=Number(a.nodeValue);a=c.getAttributeNode("y_floorplan_percent");m.y=Number(a.nodeValue);a=c.getAttributeNode("mapid");b[a.nodeValue.toString()]=
m}c=c.nextSibling}return b};e.prototype.Dn=function(a){for(var b={},c=a.firstChild;c;){if("custompropertyvalue"==c.nodeName){a=c.getAttributeNode("value");var m=a.nodeValue.toString();a=c.getAttributeNode("variablename");b[a.nodeValue.toString()]=m}c=c.nextSibling}return b};e.prototype.Tk=function(a,b){var c,m="";(c=b.getAttributeNode("id"))&&(m=c.nodeValue.toString());if(!this.mb.hasOwnProperty(a)||!this.mb[a].hasOwnProperty(m)){var h={};for(b=b.firstChild;b;){if("custompropertyvalue"==b.nodeName){c=
b.getAttributeNode("variablename");var n=c.nodeValue;c=b.getAttributeNode("value");h[n]=c.nodeValue}b=b.nextSibling}this.mb[a]||(this.mb[a]={});this.mb[a][m]=h}};e.prototype.An=function(a){var b=a.getAttributeNode("variablename"),c=b.nodeValue.toString();b=a.getAttributeNode("variabletype");var m=Number(b.nodeValue);b=a.getAttributeNode("propertytype");var h=Number(b.nodeValue);b=a.getAttributeNode("defaultvalue");var n;b&&(n=b.nodeValue.toString());this.Ea[c]={Kd:m,ei:h,Qk:n}};e.prototype.yh=function(a){return a?
this.Qg[a]?this.Qg[a]:this.Wf():this.Pg};e.prototype.ho=function(a,b){""!==a||this.Cd||(a="node1");a||(a=this.pa);return this.Ff.hasOwnProperty(a)&&this.Ff[a].hasOwnProperty(b)?this.gj(y.Zb.Zk(this.Ff[a][b],this.Ea[b].Kd),this.Ea[b].Kd):null};e.prototype.Hp=function(a,b,c){c="string"===typeof c?c:y.Zb.Wn(c,this.Ea[b].Kd);this.Ff[a][b]!=c&&(this.Ff[a][b]=c,this.I("varchanged_"+b,{}))};e.prototype.el=function(a){a=this.yh(a);var b=[];""!=a.latitude&&0!=a.latitude&&0!=a.longitude&&(b.push(a.latitude),
b.push(a.longitude));return b};e.prototype.io=function(a){for(var b=[],c=0;c<this.Xa.length;c++){var m=this.Xa[c],h=this.yh(m);h&&h.tags.includes(a)&&b.push(m)}return b};e.prototype.cs=function(a){return this.yh(a).title};e.prototype.Zr=function(a,b){var c=-1;a=this.el(a);b=this.el(b);if(2==a.length&&2==b.length){c=Math.PI/180*(b[0]-a[0]);var m=Math.PI/180*(b[1]-a[1]);a=Math.sin(c/2)*Math.sin(c/2)+Math.sin(m/2)*Math.sin(m/2)*Math.cos(Math.PI/180*a[0])*Math.cos(Math.PI/180*b[0]);c=12742E3*Math.atan2(Math.sqrt(a),
Math.sqrt(1-a))}return c};e.prototype.Tb=function(a,b,c){var m;for(m=0;m<this.P.Ha.length;m++){var h=this.P.Ha[m];if(h.time==a&&h.ob==b&&(!c||h.qd==c))return h}return!1};e.prototype.bj=function(a,b){var c;for(c=0;c<b.Ha.length;c++)if(0==b.Ha[c].time&&b.Ha[c].ob==a)return b.Ha[c];return!1};e.prototype.ko=function(a,b,c){for(a=Math.floor(a);!this.Tb(a,b,c)&&0<a;)a--;return a};e.prototype.eo=function(a){var b,c=1E5,m=a,h=!1;for(b=0;b<this.P.Ha.length;b++){var n=this.P.Ha[b];n.ob==a.ob&&n.qd==a.qd&&n.time>
a.time&&n.time<c&&(m=this.P.Ha[b],c=m.time,h=!0)}return h?m:!1};e.prototype.yr=function(a){for(var b=[],c=0;c<this.P.Ha.length;c++){var m=this.P.Ha[c];if(m.time<=a&&4==m.ob){for(var h=!1,n=0;n<b.length;n++)if(b[n].qd==this.P.Ha[c].qd){b[n].time<m.time?b.splice(n,1):h=!0;break}h||b.push(m)}}return b};e.prototype.Sn=function(a,b,c){var m=new y.Lc(a.time,a.value),h=new y.Lc(b.time,b.value),n=(c-a.time)/(b.time-a.time);if(0!=a.type||0!=b.type&&3!=b.type)if(3==a.type)c=a.value;else{n=new y.Lc;var q=new y.Lc,
r=b.time-a.time;0==a.type?q.init(a.time+.3*r,a.value):q.init(a.We,a.Xe);0==b.type||3==b.type?n.init(b.time-.3*r,b.value):n.init(b.Ue,b.Ve);a=new y.Lc;a.vk(m,h,q,n,c);c=a.y}else a=new y.Lc,a.Ud(m,h,n),c=a.y;return c};e.prototype.Yk=function(a,b,c,m){for(var h=0;h<this.va.length;h++)if(this.va[h].$a&&0==this.va[h].$a.indexOf("__FlyIn"))return this.va[h];h=new y.Om;h.$a="__FlyIn";h.Ne=this.pan.m;h.si=this.u.m;h.be=this.fov.m;h.ri=this.Z();h.ce=this.zh();a?(h.Sf=!1,h.bf=!1,h.speed=this.C.Ug,h.Hd=b,h.de=
c,h.Eg=m):(h.Sf=!0,h.bf=!0,h.speed=this.Ba.speed,this.Ba.wd.lq?(h.Hd=this.Ba.wd.pan,h.de=this.Ba.wd.u,h.Eg=this.Ba.wd.fov,h.ce=this.Ba.wd.nb):(h.Hd=this.pan.Fa,h.de=this.u.Fa,h.Eg=this.fov.Fa));return this.Pn(h)};e.prototype.Pn=function(a){var b=new y.Pm;b.$a=a.$a;b.Te="";b.Ha=[];for(var c=a.ri!=a.ce&&-1!=a.ce;-180>a.Hd;)a.Hd+=360;for(;180<a.Hd;)a.Hd-=360;var m=a.Hd-a.Ne;if(360==this.pan.max-this.pan.min&&!this.cb()){for(;-180>m;)m+=360;for(;180<m;)m-=360}var h=a.de-a.si,n=a.Eg-a.be,q=Math.round(Math.sqrt(m*
m+h*h+n*n)/a.speed*.33);c&&(q=Math.max(10,q));b.length=q;if(a.cf){var r=Math.ceil(.7*q);r=Math.min(15,r);r=Math.max(5,r);b.length=q+r;var t=.33*r}var w=a.Eg,z=q,C=0,E=q-1;if(c){var D=a.be;var F=4==a.ce?120:this.xh(a.ce);n=w-a.be;var A=new y.Lc(0,a.be),G=new y.Lc(q,w),I=new y.Lc,J=new y.Lc;J.init(q/3,a.be+n/3);I.init(2*q/3,w-n/3);if(D>F)for(;C<=q&&D>F;)D=new y.Lc,D.vk(A,G,J,I,C),D=D.y,C++;else C=1;C>=.8*q&&(z=C=Math.round(.8*q));0==C&&(C=1);F=4==a.ri?120:this.xh(a.ri);D=a.Eg;if(D>F)for(;E>C&&D>F;)D=
new y.Lc,D.vk(A,G,J,I,E),D=D.y,E--}A=new y.dd;A.time=0;A.ob=0;A.value=a.Ne;A.type=1;A.We=q/3;A.Xe=a.Sf?a.Ne:a.Ne+m/3;b.Ha.push(A);A=new y.dd;A.time=0;A.ob=1;A.value=a.si;A.type=1;A.We=q/3;A.Xe=a.Sf?a.si:a.si+h/3;b.Ha.push(A);A=new y.dd;A.time=0;A.ob=2;A.value=a.be;A.type=1;A.We=q/3;A.Xe=a.Sf?a.be:a.be+n/3;b.Ha.push(A);A=new y.dd;A.time=0;A.ob=3;A.value=a.ri;A.type=0;A.Eb=0;b.Ha.push(A);c&&(A=new y.dd,A.time=C,A.ob=3,A.value=a.ce,A.type=0,A.Eb=E-C,b.Ha.push(A));A=new y.dd;A.time=q;A.ob=0;A.value=a.Ne+
m;A.type=1;A.Ue=2*q/3;A.Ve=a.bf&&!a.cf?A.value:A.value-m/3;a.cf&&(A.We=q+t,A.Xe=A.value+t/q*m);b.Ha.push(A);A=new y.dd;A.time=q;A.ob=1;A.value=a.de;A.type=1;A.Ue=2*q/3;A.Ve=a.bf&&!a.cf?a.de:a.de-h/3;a.cf&&(A.We=q+t,A.Xe=A.value+t/q*h);b.Ha.push(A);A=new y.dd;A.time=z;A.ob=2;A.value=w;A.type=1;A.Ue=2*z/3;A.Ve=a.bf?w:w-n/3;b.Ha.push(A);a.cf&&(A=new y.dd,A.time=q+r,A.ob=0,A.value=a.Ne+m,A.type=1,A.Ue=q+r-t,A.Ve=a.Ne+m,b.Ha.push(A),A=new y.dd,A.time=q+r,A.ob=1,A.value=a.de,A.type=1,A.Ue=q+r-t,A.Ve=a.de,
b.Ha.push(A));this.va.push(b);return b};e.prototype.gv=function(){this.A.j&&this.A.j.play()};e.prototype.hv=function(){this.A.j&&(this.A.j.pause(),this.A.j.currentTime=0)};e.prototype.fv=function(){this.A.j&&this.A.j.pause()};e.prototype.tu=function(a){this.A.j&&(0>a&&(a=0),a>this.A.j.duration&&(a=this.A.j.duration-.1),this.A.j.currentTime=a,this.update())};e.prototype.xs=function(){return this.A.j?this.A.j.currentTime:0};e.prototype.ws=function(){if(this.A.j)return this.A.j};e.prototype.su=function(a){if(this.A.j){var b=
!this.A.j.paused&&!this.A.j.ended,c=this.A.j.currentTime;this.A.j.pause();this.A.j.src=isNaN(parseInt(a,10))?String(a):this.A.src[parseInt(a,10)];b&&(this.A.j.onloadedmetadata=function(){this.currentTime=c;this.play();this.onloadedmetadata=null});this.A.j.currentTime=c}};e.prototype.nr=function(){this.Il=!0};e.prototype.hs=function(){var a={};a.currentNode=this.Zi();a.position={pan:this.pan.m,tilt:this.u.m,fov:this.fov.m,projection:this.Z()};for(var b=a.variables={},c=0,m=Object.keys(this.Nb);c<m.length;c++){var h=
m[c];this.Nb[h].wo||"undefined"!==this.il(h)&&((b[h]={}).value=this.il(h))}b=a.hsprops={};c=0;for(m=Object.keys(this.mb);c<m.length;c++){h=m[c];for(var n=b[h]={},q=0,r=Object.keys(this.mb[h]);q<r.length;q++)for(var t=r[q],w=n[t]={},z=0,C=Object.keys(this.mb[h][t]);z<C.length;z++){var E=C[z];w[E]=this.bl(h,t,E)}}b=a.polyhotspots=[];for(c=0;c<this.K.length;c++)"poly"==this.K[c].type&&(m=this.K[c],h={},h.id=m.id,h.bordercolor=m.cc,h.borderalpha=m.bc,h.backgroundcolor=m.ac,h.backgroundalpha=m.$b,b.push(h));
return a};e.prototype.cu=function(a){if(a.hasOwnProperty("position")){var b=a.position;this.pan.m=b.pan;this.u.m=b.tilt;this.fov.m=b.fov;this.pb(b.projection)}b=0;for(var c=Object.keys(a.variables);b<c.length;b++){var m=c[b];this.Le(m,a.variables[m].value)}b=0;for(c=Object.keys(a.hsprops);b<c.length;b++){m=c[b];for(var h=a.hsprops[m],n=0,q=Object.keys(h);n<q.length;n++)for(var r=q[n],t=h[r],w=0,z=Object.keys(t);w<z.length;w++){var C=z[w];this.gm(m,r,C,t[C])}}for(b=0;b<a.polyhotspots.length;b++)for(c=
a.polyhotspots[b],m=0;m<this.K.length;m++)"poly"==this.K[m].type&&this.K[m].id==c.id&&(this.K[m].cc=c.bordercolor,this.K[m].bc=c.borderalpha,this.K[m].$b=c.backgroundalpha,this.K[m].ac=c.backgroundcolor);return this.qb=!0};return e}();y.Zb=f})(ggP2VR||(ggP2VR={}));window.ggHasHtml5Css3D=p;window.ggHasWebGL=Q;window.pano2vrPlayer=ggP2VR.Zb;var Z=ggP2VR.Zb.prototype;Z._=Z.Sa;Z.setContainer=Z.Xt;Z.setLanguage=Z.hm;Z.getLanguage=Z.Or;Z.addTranslations=Z.Wg;Z.getProjectTranslations=Z.ms;Z.getVersion=Z.po;
Z.readConfigString=Z.Tl;Z.readConfigUrl=Z.jp;Z.readConfigUrlAsync=Z.Kt;Z.readConfigXml=Z.kp;Z.openUrl=Z.Kl;Z.openNext=Z.od;Z.goBack=Z.Fs;Z.setMargins=Z.au;Z.addListener=Z.addListener;Z.on=Z.addListener;Z.removeEventListener=Z.removeEventListener;Z.off=Z.removeEventListener;Z.detectBrowser=Z.yn;Z.initWebGL=Z.Pc;Z.getPercentLoaded=Z.gs;Z.setBasePath=Z.Wt;Z.getBasePath=Z.Un;Z.setViewerSize=Z.Kp;Z.getViewerSize=Z.As;Z.updateViewerSizeNow=Z.Xb;Z.setSkinObject=Z.mu;Z.changeViewMode=Z.ar;Z.getViewMode=Z.ys;
Z.changePolygonMode=Z.jn;Z.setPolygonMode=Z.jn;Z.getPolygonMode=Z.ks;Z.showOnePolyHotspot=Z.Mp;Z.hideOnePolyHotspot=Z.to;Z.changePolyHotspotColor=Z.$q;Z.setPolyHotspotHandcursor=Z.du;Z.toggleOnePolyHotspot=Z.Pu;Z.changeViewState=Z.br;Z.getViewState=Z.zs;Z.setRenderFlags=Z.fu;Z.getRenderFlags=Z.ns;Z.setMaxTileCount=Z.Fp;Z.updatePanorama=Z.Ai;Z.isTouching=Z.Fo;Z.getIsMobile=Z.dl;Z.setIsMobile=Z.$t;Z.getHasTouch=Z.Yn;Z.getIsTour=Z.Nr;Z.getNodesCount=Z.ds;Z.getIsAutorotating=Z.Kr;Z.getIsLoading=Z.Mr;
Z.getIsLoaded=Z.aj;Z.getIsTileLoading=Z.$n;Z.getLastActivity=Z.Pr;Z.getPan=Z.gf;Z.getPanNorth=Z.Rd;Z.getPanDest=Z.fs;Z.getPanN=Z.cj;Z.setPan=Z.$d;Z.setPanNorth=Z.Rj;Z.changePan=Z.Mi;Z.changePanLog=Z.hn;Z.getTilt=Z.cg;Z.getTiltDest=Z.rs;Z.setTilt=Z.ae;Z.changeTilt=Z.Ni;Z.changeTiltLog=Z.kn;Z.getFov=Z.zd;Z.getFovDest=Z.Fr;Z.setFov=Z.wb;Z.setFovMode=Z.em;Z.changeFov=Z.Ak;Z.changeFovLog=Z.Li;Z.getVFov=Z.Kb;Z.setVFov=Z.mi;Z.getHFov=Z.al;Z.setHFov=Z.fm;Z.getDFov=Z.$k;Z.setDFov=Z.cm;Z.getRoll=Z.fj;
Z.setRoll=Z.wg;Z.setPanTilt=Z.jm;Z.setPanTiltFov=Z.vg;Z.setDefaultView=Z.zp;Z.setLocked=Z.setLocked;Z.setLockedMouse=Z.Dp;Z.setLockedKeyboard=Z.Cp;Z.getLockedKeyboard=Z.Rr;Z.setLockedWheel=Z.Ep;Z.moveTo=Z.moveTo;Z.moveToEx=Z.zj;Z.moveToDefaultView=Z.ft;Z.moveToDefaultViewEx=Z.gt;Z.addHotspotElements=Z.Um;Z.playSound=Z.Xd;Z.playPauseSound=Z.gp;Z.playStopSound=Z.It;Z.pauseSound=Z.Yh;Z.activateSound=Z.Hq;Z.soundGetTime=Z.Au;Z.soundSetTime=Z.Cu;Z.soundSetPlaybackRate=Z.Bu;Z.setMediaVisibility=Z.bu;
Z.isPlaying=Z.isPlaying;Z.stopSound=Z.Wj;Z.setVolume=Z.setVolume;Z.changeVolume=Z.cr;Z.mute=Z.kt;Z.unmute=Z.Vu;Z.toggleMuted=Z.Ou;Z.getHasSounds=Z.Hr;Z.getSoundsPermitted=Z.os;Z.startAutoplayMedia=Z.Fu;Z.removeHotspots=Z.pp;Z.getHotspotsVisible=Z.Zn;Z.getHotspotPropValue=Z.bl;Z.setHotspotPropValue=Z.gm;Z.getCustomPropertyDefaultValue=Z.Dr;Z.getCurrentPerspective=Z.ff;Z.addHotspot=Z.Jq;Z.updateHotspot=Z.Xu;Z.removeHotspot=Z.Lt;Z.setActiveHotspot=Z.Ke;Z.getPointHotspotIds=Z.js;Z.getHotspot=Z.Ir;
Z.setFullscreen=Z.Oj;Z.toggleFullscreen=Z.bk;Z.enterFullscreen=Z.qr;Z.exitFullscreen=Z.exitFullscreen;Z.getIsFullscreen=Z.Lr;Z.startAutorotate=Z.Gu;Z.stopAutorotate=Z.Ju;Z.toggleAutorotate=Z.Nu;Z.pauseAutorotate=Z.Ht;Z.resumeAutorotate=Z.Qt;Z.setAutorotateNodeFilter=Z.Vt;Z.startAnimation=Z.Qp;Z.resumeAnimation=Z.Pt;Z.createLayers=Z.sn;Z.removePanorama=Z.yf;Z.getScreenResolution=Z.no;Z.getMaxScreenResolution=Z.co;Z.getNodeIds=Z.fo;Z.getNodeUserdata=Z.yh;Z.getNodeUserdataPropValue=Z.ho;
Z.setNodeUserdataPropValue=Z.Hp;Z.getNodeLatLng=Z.el;Z.getNodeTitle=Z.cs;Z.getNodeDistance=Z.Zr;Z.getCurrentNode=Z.Zi;Z.getNextNode=Z.Yr;Z.getPrevNode=Z.ls;Z.getLastVisitedNode=Z.Qr;Z.getStartNode=Z.ps;Z.getNodesWithTag=Z.io;Z.getCurrentPointHotspots=Z.Cr;Z.getPositionAngles=Z.dj;Z.getPositionRawAngles=Z.jo;Z.nodeVisited=Z.mt;Z.clearVisitedNodes=Z.er;Z.setElementIdPrefix=Z.Yt;Z.videoPanoPlay=Z.gv;Z.videoPanoStop=Z.hv;Z.videoPanoPause=Z.fv;Z.getVideoPanoTime=Z.xs;Z.setVideoPanoTime=Z.tu;
Z.getVideoPanoObject=Z.ws;Z.setVideoPanoSource=Z.su;Z.getMediaObject=Z.Wr;Z.getMediaBufferSourceObject=Z.Vr;Z.registerVideoElement=Z.lp;Z.disableSoundLoading=Z.nr;Z.setCrossOrigin=Z.setCrossOrigin;Z.setProjection=Z.pb;Z.getProjection=Z.Z;Z.changeProjection=Z.Bk;Z.changeProjectionEx=Z.Bk;Z.changeLensflares=Z.Zq;Z.setTransition=Z.ou;Z.getMapType=Z.Ur;Z.getMapDetails=Z.Tr;Z.getNodeMapCoords=Z.$r;Z.getNodeMapCoordsInPercent=Z.bs;Z.getMapContainingNode=Z.Sr;Z.getMapsContainingNode=Z.bo;Z.getMapIDs=Z.ao;
Z.getFloorplanIDs=Z.Er;Z.getFirstMap=Z.Xn;Z.getFirstFloorplan=Z.$i;Z.hasMap=Z.Ls;Z.hasFloorplan=Z.Ks;Z.addVariable=Z.Mq;Z.setVariableOptions=Z.Jp;Z.setVariableValue=Z.Le;Z.getVariableValue=Z.il;Z.setSuperCookie=Z.nu;Z.getGyroAvailable=Z.Gr;Z.setUseGyro=Z.pu;Z.getUseGyro=Z.ss;Z.getOS=Z.es;Z.getBrowser=Z.Ar;Z.getBrowserTheme=Z.Br;Z.triggerEvent=Z.I;Z.requestRedraw=Z.Nt;Z.getWebGlContext=Z.Bs;Z.getHasTouch=Z.Yn;Z.updateViewerSizeNow=Z.Xb;Z.getApiVersion=Z.zr;Z.setApiVersion=Z.Ut;Z.getInertia=Z.Jr;
Z.setInertia=Z.Zt;Z.getZoomCenterCursor=Z.Cs;Z.setZoomCenterCursor=Z.uu;Z.getPlayerState=Z.hs;Z.setPlayerState=Z.cu;Z.getQueryParameter=Z.getQueryParameter;Z.setQueryParameter=Z.eu;Z.enterVR=Z.Tf;Z.exitVR=Z.Uf;Z.toggleVR=Z.bq;Z.isInVR=Z.ig;Z.hasVR=Z.lf;Z.getVRDisplayName=Z.us;Z.getVRCamera=Z.ts;Z.getVRRenderer=Z.vs;Z.setVRFrameBufferScaleFactor=Z.qu;Z.getSkinGroup=Z.hl;
